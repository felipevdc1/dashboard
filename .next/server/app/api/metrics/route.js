/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/metrics/route";
exports.ids = ["app/api/metrics/route"];
exports.modules = {

/***/ "(rsc)/./app/api/metrics/route.ts":
/*!**********************************!*\
  !*** ./app/api/metrics/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   revalidate: () => (/* binding */ revalidate)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase_queries__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase/queries */ \"(rsc)/./lib/supabase/queries.ts\");\n/* harmony import */ var _lib_dateUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/dateUtils */ \"(rsc)/./lib/dateUtils.ts\");\n/* harmony import */ var _lib_cache__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/cache */ \"(rsc)/./lib/cache.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/logger */ \"(rsc)/./lib/logger.ts\");\n\n\n\n\n\n// Cache configuration - reduced to 2 minutes for faster updates\nconst CACHE_TTL = 2 * 60 * 1000; // 2 minutes in milliseconds\n// Remove force-dynamic to allow caching\n// export const dynamic = 'force-dynamic';\nconst revalidate = 120; // Revalidate every 2 minutes\nasync function GET(request) {\n    const startTime = Date.now();\n    try {\n        const { searchParams } = new URL(request.url);\n        // Support both old period-based and new date-based queries\n        const startDate = searchParams.get('start_date');\n        const endDate = searchParams.get('end_date');\n        const period = searchParams.get('period');\n        const forceRefresh = searchParams.get('force_refresh') === 'true';\n        let currentStartDate;\n        let currentEndDate;\n        if (startDate && endDate) {\n            // Use provided date range\n            currentStartDate = startDate;\n            currentEndDate = endDate;\n        } else if (period) {\n            // Use period-based (backwards compatible)\n            const days = parseInt(period);\n            currentEndDate = getDateString(0);\n            currentStartDate = getDateString(days);\n        } else {\n            // Default to last 30 days\n            currentEndDate = getDateString(0);\n            currentStartDate = getDateString(30);\n        }\n        // Get comparison period for previous period\n        const comparison = (0,_lib_dateUtils__WEBPACK_IMPORTED_MODULE_2__.getComparisonPeriod)(currentStartDate, currentEndDate);\n        // Generate cache key based on date ranges\n        const metricsCacheKey = (0,_lib_cache__WEBPACK_IMPORTED_MODULE_3__.generateCacheKey)('supabase-metrics', {\n            currentStart: currentStartDate,\n            currentEnd: currentEndDate,\n            previousStart: comparison.start,\n            previousEnd: comparison.end\n        });\n        // Force refresh: delete cache and fetch fresh data\n        if (forceRefresh) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_4__.cacheLogger.debug('FORCE REFRESH - Bypassing cache');\n            _lib_cache__WEBPACK_IMPORTED_MODULE_3__.memoryCache.delete(metricsCacheKey);\n        }\n        // Try to get from cache first with metadata\n        const cacheResult = _lib_cache__WEBPACK_IMPORTED_MODULE_3__.memoryCache.getWithMetadata(metricsCacheKey);\n        let result = cacheResult.data;\n        const cacheMetadata = {\n            cachedAt: cacheResult.cachedAt,\n            cacheAge: cacheResult.age,\n            cacheExpiresIn: cacheResult.ttl && cacheResult.age ? cacheResult.ttl - cacheResult.age : null,\n            cacheExpiresAt: cacheResult.expiresAt\n        };\n        if (!result) {\n            // Cache miss - fetch from Supabase\n            _lib_logger__WEBPACK_IMPORTED_MODULE_4__.metricsLogger.debug('Cache MISS - Fetching metrics from Supabase', {\n                currentPeriod: `${currentStartDate} to ${currentEndDate}`,\n                previousPeriod: `${comparison.start} to ${comparison.end}`\n            });\n            result = await (0,_lib_supabase_queries__WEBPACK_IMPORTED_MODULE_1__.calculateDashboardMetrics)(currentStartDate, currentEndDate, comparison.start, comparison.end);\n            // Store in cache for 2 minutes\n            _lib_cache__WEBPACK_IMPORTED_MODULE_3__.memoryCache.set(metricsCacheKey, result, CACHE_TTL);\n            // Update metadata for fresh data\n            cacheMetadata.cachedAt = Date.now();\n            cacheMetadata.cacheAge = 0;\n            cacheMetadata.cacheExpiresIn = CACHE_TTL;\n            cacheMetadata.cacheExpiresAt = Date.now() + CACHE_TTL;\n        } else {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_4__.cacheLogger.debug('Cache HIT - Using cached metrics');\n        }\n        const duration = Date.now() - startTime;\n        _lib_logger__WEBPACK_IMPORTED_MODULE_4__.metricsLogger.debug(`Request completed in ${duration}ms`);\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            metrics: result.metrics,\n            activities: result.activities,\n            lastUpdated: new Date().toISOString(),\n            dateRange: {\n                start: currentStartDate,\n                end: currentEndDate\n            },\n            cache: {\n                cachedAt: cacheMetadata.cachedAt,\n                age: cacheMetadata.cacheAge,\n                expiresIn: cacheMetadata.cacheExpiresIn,\n                expiresAt: cacheMetadata.cacheExpiresAt\n            },\n            _meta: {\n                cached: cacheResult.data !== null,\n                duration,\n                dataSource: 'supabase'\n            }\n        });\n        // Add cache headers (2 minutes)\n        response.headers.set('Cache-Control', 'public, s-maxage=120, stale-while-revalidate=240');\n        response.headers.set('CDN-Cache-Control', 'public, s-maxage=120');\n        response.headers.set('Vercel-CDN-Cache-Control', 'public, s-maxage=120');\n        return response;\n    } catch (error) {\n        _lib_logger__WEBPACK_IMPORTED_MODULE_4__.metricsLogger.error('Error fetching metrics', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Failed to fetch metrics',\n            message: error instanceof Error ? error.message : 'Unknown error'\n        }, {\n            status: 500\n        });\n    }\n}\nfunction getDateString(daysAgo) {\n    const date = new Date();\n    date.setDate(date.getDate() - daysAgo);\n    return date.toISOString().split('T')[0];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUtIO0lBQzlCLE9BQU9DLEtBQUtiLFdBQVcsR0FBR2dCLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUN6QyIsInNvdXJjZXMiOlsiL1VzZXJzL2ZlbGlwZXZkYzEvRG9jdW1lbnRzL3Byb2pldG9zIGNsYXVkZSBjb2RlL2Rhc2hib2FyZCBlc2NhbGEgaW5kZXBlbmRlbnRlL2Rhc2hib2FyZC9hcHAvYXBpL21ldHJpY3Mvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgY2FsY3VsYXRlRGFzaGJvYXJkTWV0cmljcyB9IGZyb20gJ0AvbGliL3N1cGFiYXNlL3F1ZXJpZXMnO1xuaW1wb3J0IHsgZ2V0Q29tcGFyaXNvblBlcmlvZCB9IGZyb20gJ0AvbGliL2RhdGVVdGlscyc7XG5pbXBvcnQgeyBtZW1vcnlDYWNoZSwgZ2VuZXJhdGVDYWNoZUtleSB9IGZyb20gJ0AvbGliL2NhY2hlJztcbmltcG9ydCB7IG1ldHJpY3NMb2dnZXIsIGNhY2hlTG9nZ2VyLCBsb2dnZXIgfSBmcm9tICdAL2xpYi9sb2dnZXInO1xuXG4vLyBDYWNoZSBjb25maWd1cmF0aW9uIC0gcmVkdWNlZCB0byAyIG1pbnV0ZXMgZm9yIGZhc3RlciB1cGRhdGVzXG5jb25zdCBDQUNIRV9UVEwgPSAyICogNjAgKiAxMDAwOyAvLyAyIG1pbnV0ZXMgaW4gbWlsbGlzZWNvbmRzXG5cbi8vIFJlbW92ZSBmb3JjZS1keW5hbWljIHRvIGFsbG93IGNhY2hpbmdcbi8vIGV4cG9ydCBjb25zdCBkeW5hbWljID0gJ2ZvcmNlLWR5bmFtaWMnO1xuZXhwb3J0IGNvbnN0IHJldmFsaWRhdGUgPSAxMjA7IC8vIFJldmFsaWRhdGUgZXZlcnkgMiBtaW51dGVzXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogUmVxdWVzdCkge1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuXG4gICAgLy8gU3VwcG9ydCBib3RoIG9sZCBwZXJpb2QtYmFzZWQgYW5kIG5ldyBkYXRlLWJhc2VkIHF1ZXJpZXNcbiAgICBjb25zdCBzdGFydERhdGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzdGFydF9kYXRlJyk7XG4gICAgY29uc3QgZW5kRGF0ZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ2VuZF9kYXRlJyk7XG4gICAgY29uc3QgcGVyaW9kID0gc2VhcmNoUGFyYW1zLmdldCgncGVyaW9kJyk7XG4gICAgY29uc3QgZm9yY2VSZWZyZXNoID0gc2VhcmNoUGFyYW1zLmdldCgnZm9yY2VfcmVmcmVzaCcpID09PSAndHJ1ZSc7XG5cbiAgICBsZXQgY3VycmVudFN0YXJ0RGF0ZTogc3RyaW5nO1xuICAgIGxldCBjdXJyZW50RW5kRGF0ZTogc3RyaW5nO1xuXG4gICAgaWYgKHN0YXJ0RGF0ZSAmJiBlbmREYXRlKSB7XG4gICAgICAvLyBVc2UgcHJvdmlkZWQgZGF0ZSByYW5nZVxuICAgICAgY3VycmVudFN0YXJ0RGF0ZSA9IHN0YXJ0RGF0ZTtcbiAgICAgIGN1cnJlbnRFbmREYXRlID0gZW5kRGF0ZTtcbiAgICB9IGVsc2UgaWYgKHBlcmlvZCkge1xuICAgICAgLy8gVXNlIHBlcmlvZC1iYXNlZCAoYmFja3dhcmRzIGNvbXBhdGlibGUpXG4gICAgICBjb25zdCBkYXlzID0gcGFyc2VJbnQocGVyaW9kKTtcbiAgICAgIGN1cnJlbnRFbmREYXRlID0gZ2V0RGF0ZVN0cmluZygwKTtcbiAgICAgIGN1cnJlbnRTdGFydERhdGUgPSBnZXREYXRlU3RyaW5nKGRheXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEZWZhdWx0IHRvIGxhc3QgMzAgZGF5c1xuICAgICAgY3VycmVudEVuZERhdGUgPSBnZXREYXRlU3RyaW5nKDApO1xuICAgICAgY3VycmVudFN0YXJ0RGF0ZSA9IGdldERhdGVTdHJpbmcoMzApO1xuICAgIH1cblxuICAgIC8vIEdldCBjb21wYXJpc29uIHBlcmlvZCBmb3IgcHJldmlvdXMgcGVyaW9kXG4gICAgY29uc3QgY29tcGFyaXNvbiA9IGdldENvbXBhcmlzb25QZXJpb2QoY3VycmVudFN0YXJ0RGF0ZSwgY3VycmVudEVuZERhdGUpO1xuXG4gICAgLy8gR2VuZXJhdGUgY2FjaGUga2V5IGJhc2VkIG9uIGRhdGUgcmFuZ2VzXG4gICAgY29uc3QgbWV0cmljc0NhY2hlS2V5ID0gZ2VuZXJhdGVDYWNoZUtleSgnc3VwYWJhc2UtbWV0cmljcycsIHtcbiAgICAgIGN1cnJlbnRTdGFydDogY3VycmVudFN0YXJ0RGF0ZSxcbiAgICAgIGN1cnJlbnRFbmQ6IGN1cnJlbnRFbmREYXRlLFxuICAgICAgcHJldmlvdXNTdGFydDogY29tcGFyaXNvbi5zdGFydCxcbiAgICAgIHByZXZpb3VzRW5kOiBjb21wYXJpc29uLmVuZCxcbiAgICB9KTtcblxuICAgIC8vIEZvcmNlIHJlZnJlc2g6IGRlbGV0ZSBjYWNoZSBhbmQgZmV0Y2ggZnJlc2ggZGF0YVxuICAgIGlmIChmb3JjZVJlZnJlc2gpIHtcbiAgICAgIGNhY2hlTG9nZ2VyLmRlYnVnKCdGT1JDRSBSRUZSRVNIIC0gQnlwYXNzaW5nIGNhY2hlJyk7XG4gICAgICBtZW1vcnlDYWNoZS5kZWxldGUobWV0cmljc0NhY2hlS2V5KTtcbiAgICB9XG5cbiAgICAvLyBUcnkgdG8gZ2V0IGZyb20gY2FjaGUgZmlyc3Qgd2l0aCBtZXRhZGF0YVxuICAgIGNvbnN0IGNhY2hlUmVzdWx0ID0gbWVtb3J5Q2FjaGUuZ2V0V2l0aE1ldGFkYXRhPHsgbWV0cmljczogYW55OyBhY3Rpdml0aWVzOiBhbnkgfT4oXG4gICAgICBtZXRyaWNzQ2FjaGVLZXlcbiAgICApO1xuICAgIGxldCByZXN1bHQgPSBjYWNoZVJlc3VsdC5kYXRhO1xuICAgIGNvbnN0IGNhY2hlTWV0YWRhdGEgPSB7XG4gICAgICBjYWNoZWRBdDogY2FjaGVSZXN1bHQuY2FjaGVkQXQsXG4gICAgICBjYWNoZUFnZTogY2FjaGVSZXN1bHQuYWdlLFxuICAgICAgY2FjaGVFeHBpcmVzSW46IGNhY2hlUmVzdWx0LnR0bCAmJiBjYWNoZVJlc3VsdC5hZ2UgPyBjYWNoZVJlc3VsdC50dGwgLSBjYWNoZVJlc3VsdC5hZ2UgOiBudWxsLFxuICAgICAgY2FjaGVFeHBpcmVzQXQ6IGNhY2hlUmVzdWx0LmV4cGlyZXNBdCxcbiAgICB9O1xuXG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIC8vIENhY2hlIG1pc3MgLSBmZXRjaCBmcm9tIFN1cGFiYXNlXG4gICAgICBtZXRyaWNzTG9nZ2VyLmRlYnVnKCdDYWNoZSBNSVNTIC0gRmV0Y2hpbmcgbWV0cmljcyBmcm9tIFN1cGFiYXNlJywge1xuICAgICAgICBjdXJyZW50UGVyaW9kOiBgJHtjdXJyZW50U3RhcnREYXRlfSB0byAke2N1cnJlbnRFbmREYXRlfWAsXG4gICAgICAgIHByZXZpb3VzUGVyaW9kOiBgJHtjb21wYXJpc29uLnN0YXJ0fSB0byAke2NvbXBhcmlzb24uZW5kfWAsXG4gICAgICB9KTtcblxuICAgICAgcmVzdWx0ID0gYXdhaXQgY2FsY3VsYXRlRGFzaGJvYXJkTWV0cmljcyhcbiAgICAgICAgY3VycmVudFN0YXJ0RGF0ZSxcbiAgICAgICAgY3VycmVudEVuZERhdGUsXG4gICAgICAgIGNvbXBhcmlzb24uc3RhcnQsXG4gICAgICAgIGNvbXBhcmlzb24uZW5kXG4gICAgICApO1xuXG4gICAgICAvLyBTdG9yZSBpbiBjYWNoZSBmb3IgMiBtaW51dGVzXG4gICAgICBtZW1vcnlDYWNoZS5zZXQobWV0cmljc0NhY2hlS2V5LCByZXN1bHQsIENBQ0hFX1RUTCk7XG5cbiAgICAgIC8vIFVwZGF0ZSBtZXRhZGF0YSBmb3IgZnJlc2ggZGF0YVxuICAgICAgY2FjaGVNZXRhZGF0YS5jYWNoZWRBdCA9IERhdGUubm93KCk7XG4gICAgICBjYWNoZU1ldGFkYXRhLmNhY2hlQWdlID0gMDtcbiAgICAgIGNhY2hlTWV0YWRhdGEuY2FjaGVFeHBpcmVzSW4gPSBDQUNIRV9UVEw7XG4gICAgICBjYWNoZU1ldGFkYXRhLmNhY2hlRXhwaXJlc0F0ID0gRGF0ZS5ub3coKSArIENBQ0hFX1RUTDtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FjaGVMb2dnZXIuZGVidWcoJ0NhY2hlIEhJVCAtIFVzaW5nIGNhY2hlZCBtZXRyaWNzJyk7XG4gICAgfVxuXG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgIG1ldHJpY3NMb2dnZXIuZGVidWcoYFJlcXVlc3QgY29tcGxldGVkIGluICR7ZHVyYXRpb259bXNgKTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgbWV0cmljczogcmVzdWx0Lm1ldHJpY3MsXG4gICAgICBhY3Rpdml0aWVzOiByZXN1bHQuYWN0aXZpdGllcyxcbiAgICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBkYXRlUmFuZ2U6IHtcbiAgICAgICAgc3RhcnQ6IGN1cnJlbnRTdGFydERhdGUsXG4gICAgICAgIGVuZDogY3VycmVudEVuZERhdGUsXG4gICAgICB9LFxuICAgICAgY2FjaGU6IHtcbiAgICAgICAgY2FjaGVkQXQ6IGNhY2hlTWV0YWRhdGEuY2FjaGVkQXQsXG4gICAgICAgIGFnZTogY2FjaGVNZXRhZGF0YS5jYWNoZUFnZSxcbiAgICAgICAgZXhwaXJlc0luOiBjYWNoZU1ldGFkYXRhLmNhY2hlRXhwaXJlc0luLFxuICAgICAgICBleHBpcmVzQXQ6IGNhY2hlTWV0YWRhdGEuY2FjaGVFeHBpcmVzQXQsXG4gICAgICB9LFxuICAgICAgX21ldGE6IHtcbiAgICAgICAgY2FjaGVkOiBjYWNoZVJlc3VsdC5kYXRhICE9PSBudWxsLFxuICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgZGF0YVNvdXJjZTogJ3N1cGFiYXNlJywgLy8gTkVXOiBTaG93cyBkYXRhIGNvbWVzIGZyb20gU3VwYWJhc2VcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBBZGQgY2FjaGUgaGVhZGVycyAoMiBtaW51dGVzKVxuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdDYWNoZS1Db250cm9sJywgJ3B1YmxpYywgcy1tYXhhZ2U9MTIwLCBzdGFsZS13aGlsZS1yZXZhbGlkYXRlPTI0MCcpO1xuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdDRE4tQ2FjaGUtQ29udHJvbCcsICdwdWJsaWMsIHMtbWF4YWdlPTEyMCcpO1xuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdWZXJjZWwtQ0ROLUNhY2hlLUNvbnRyb2wnLCAncHVibGljLCBzLW1heGFnZT0xMjAnKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBtZXRyaWNzTG9nZ2VyLmVycm9yKCdFcnJvciBmZXRjaGluZyBtZXRyaWNzJywgZXJyb3IpO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBtZXRyaWNzJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXREYXRlU3RyaW5nKGRheXNBZ286IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBkYXlzQWdvKTtcbiAgcmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNhbGN1bGF0ZURhc2hib2FyZE1ldHJpY3MiLCJnZXRDb21wYXJpc29uUGVyaW9kIiwibWVtb3J5Q2FjaGUiLCJnZW5lcmF0ZUNhY2hlS2V5IiwibWV0cmljc0xvZ2dlciIsImNhY2hlTG9nZ2VyIiwiQ0FDSEVfVFRMIiwicmV2YWxpZGF0ZSIsIkdFVCIsInJlcXVlc3QiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwic3RhcnREYXRlIiwiZ2V0IiwiZW5kRGF0ZSIsInBlcmlvZCIsImZvcmNlUmVmcmVzaCIsImN1cnJlbnRTdGFydERhdGUiLCJjdXJyZW50RW5kRGF0ZSIsImRheXMiLCJwYXJzZUludCIsImdldERhdGVTdHJpbmciLCJjb21wYXJpc29uIiwibWV0cmljc0NhY2hlS2V5IiwiY3VycmVudFN0YXJ0IiwiY3VycmVudEVuZCIsInByZXZpb3VzU3RhcnQiLCJzdGFydCIsInByZXZpb3VzRW5kIiwiZW5kIiwiZGVidWciLCJkZWxldGUiLCJjYWNoZVJlc3VsdCIsImdldFdpdGhNZXRhZGF0YSIsInJlc3VsdCIsImRhdGEiLCJjYWNoZU1ldGFkYXRhIiwiY2FjaGVkQXQiLCJjYWNoZUFnZSIsImFnZSIsImNhY2hlRXhwaXJlc0luIiwidHRsIiwiY2FjaGVFeHBpcmVzQXQiLCJleHBpcmVzQXQiLCJjdXJyZW50UGVyaW9kIiwicHJldmlvdXNQZXJpb2QiLCJzZXQiLCJkdXJhdGlvbiIsInJlc3BvbnNlIiwianNvbiIsIm1ldHJpY3MiLCJhY3Rpdml0aWVzIiwibGFzdFVwZGF0ZWQiLCJ0b0lTT1N0cmluZyIsImRhdGVSYW5nZSIsImNhY2hlIiwiZXhwaXJlc0luIiwiX21ldGEiLCJjYWNoZWQiLCJkYXRhU291cmNlIiwiaGVhZGVycyIsImVycm9yIiwibWVzc2FnZSIsIkVycm9yIiwic3RhdHVzIiwiZGF5c0FnbyIsImRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInNwbGl0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/metrics/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/cache.ts":
/*!**********************!*\
  !*** ./lib/cache.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MemoryCache: () => (/* binding */ MemoryCache),\n/* harmony export */   cached: () => (/* binding */ cached),\n/* harmony export */   generateCacheKey: () => (/* binding */ generateCacheKey),\n/* harmony export */   memoryCache: () => (/* binding */ memoryCache)\n/* harmony export */ });\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logger */ \"(rsc)/./lib/logger.ts\");\n/**\n * Simple in-memory cache with TTL (Time To Live)\n * Perfect for caching API responses on the server\n */ \nclass MemoryCache {\n    constructor(){\n        this.cache = new Map();\n        this.cleanupInterval = null;\n        // Start cleanup interval (runs every minute)\n        if (true) {\n            // Only run on server\n            this.startCleanup();\n        }\n    }\n    /**\n   * Get value from cache\n   * Returns null if expired or not found\n   */ get(key) {\n        const entry = this.cache.get(key);\n        if (!entry) {\n            return null;\n        }\n        const now = Date.now();\n        const age = now - entry.timestamp;\n        // Check if expired\n        if (age > entry.ttl) {\n            this.cache.delete(key);\n            _logger__WEBPACK_IMPORTED_MODULE_0__.cacheLogger.debug(`Cache expired: ${key} (age: ${Math.round(age / 1000)}s)`);\n            return null;\n        }\n        _logger__WEBPACK_IMPORTED_MODULE_0__.cacheLogger.debug(`Cache hit: ${key} (age: ${Math.round(age / 1000)}s)`);\n        return entry.data;\n    }\n    /**\n   * Get value from cache with metadata (timestamp, age, ttl)\n   * Returns metadata even if expired or not found\n   */ getWithMetadata(key) {\n        const entry = this.cache.get(key);\n        if (!entry) {\n            return {\n                data: null,\n                cachedAt: null,\n                expiresAt: null,\n                age: null,\n                ttl: null\n            };\n        }\n        const now = Date.now();\n        const age = now - entry.timestamp;\n        const expiresAt = entry.timestamp + entry.ttl;\n        // Check if expired\n        if (age > entry.ttl) {\n            this.cache.delete(key);\n            _logger__WEBPACK_IMPORTED_MODULE_0__.cacheLogger.debug(`Cache expired: ${key} (age: ${Math.round(age / 1000)}s)`);\n            return {\n                data: null,\n                cachedAt: null,\n                expiresAt: null,\n                age: null,\n                ttl: null\n            };\n        }\n        _logger__WEBPACK_IMPORTED_MODULE_0__.cacheLogger.debug(`Cache hit with metadata: ${key} (age: ${Math.round(age / 1000)}s, expires in: ${Math.round((entry.ttl - age) / 1000)}s)`);\n        return {\n            data: entry.data,\n            cachedAt: entry.timestamp,\n            expiresAt,\n            age,\n            ttl: entry.ttl\n        };\n    }\n    /**\n   * Set value in cache with TTL in milliseconds\n   */ set(key, data, ttl = 5 * 60 * 1000) {\n        this.cache.set(key, {\n            data,\n            timestamp: Date.now(),\n            ttl\n        });\n        _logger__WEBPACK_IMPORTED_MODULE_0__.cacheLogger.debug(`Cache set: ${key} (TTL: ${ttl / 1000}s)`);\n    }\n    /**\n   * Check if key exists and is not expired\n   */ has(key) {\n        return this.get(key) !== null;\n    }\n    /**\n   * Delete specific key\n   */ delete(key) {\n        const deleted = this.cache.delete(key);\n        if (deleted) {\n            _logger__WEBPACK_IMPORTED_MODULE_0__.cacheLogger.debug(`Cache deleted: ${key}`);\n        }\n        return deleted;\n    }\n    /**\n   * Clear all cache\n   */ clear() {\n        this.cache.clear();\n        _logger__WEBPACK_IMPORTED_MODULE_0__.cacheLogger.debug('Cache cleared completely');\n    }\n    /**\n   * Get cache size\n   */ size() {\n        return this.cache.size;\n    }\n    /**\n   * Get all cache keys\n   */ keys() {\n        return Array.from(this.cache.keys());\n    }\n    /**\n   * Start automatic cleanup of expired entries\n   */ startCleanup() {\n        this.cleanupInterval = setInterval(()=>{\n            const now = Date.now();\n            let cleaned = 0;\n            for (const [key, entry] of this.cache.entries()){\n                const age = now - entry.timestamp;\n                if (age > entry.ttl) {\n                    this.cache.delete(key);\n                    cleaned++;\n                }\n            }\n            if (cleaned > 0) {\n                _logger__WEBPACK_IMPORTED_MODULE_0__.cacheLogger.debug(`Cache cleanup: removed ${cleaned} expired entries`);\n            }\n        }, 60 * 1000); // Run every minute\n    }\n    /**\n   * Stop cleanup interval\n   */ stopCleanup() {\n        if (this.cleanupInterval) {\n            clearInterval(this.cleanupInterval);\n            this.cleanupInterval = null;\n        }\n    }\n    /**\n   * Get cache statistics\n   */ stats() {\n        const now = Date.now();\n        const entries = Array.from(this.cache.entries()).map(([key, entry])=>({\n                key,\n                age: now - entry.timestamp,\n                ttl: entry.ttl\n            }));\n        return {\n            size: this.cache.size,\n            keys: this.keys(),\n            entries\n        };\n    }\n}\n// Export singleton instance\nconst memoryCache = new MemoryCache();\n// Export class for testing\n\n/**\n * Helper to generate cache keys\n */ function generateCacheKey(prefix, params) {\n    const sortedParams = Object.keys(params).sort().map((key)=>`${key}=${params[key]}`).join('&');\n    return `${prefix}:${sortedParams}`;\n}\n/**\n * Decorator for caching function results\n */ function cached(keyGenerator, ttl = 5 * 60 * 1000) {\n    return function(target, propertyKey, descriptor) {\n        const originalMethod = descriptor.value;\n        descriptor.value = async function(...args) {\n            const cacheKey = keyGenerator(...args);\n            // Try to get from cache\n            const cached = memoryCache.get(cacheKey);\n            if (cached !== null) {\n                return cached;\n            }\n            // Execute original method\n            const result = await originalMethod.apply(this, args);\n            // Store in cache\n            memoryCache.set(cacheKey, result, ttl);\n            return result;\n        };\n        return descriptor;\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxXQUFtQixFQUNuQkMsVUFBOEI7UUFFOUIsTUFBTUMsaUJBQWlCRCxXQUFXRSxLQUFLO1FBRXZDRixXQUFXRSxLQUFLLEdBQUcsZUFBZ0IsR0FBR0MsSUFBVztZQUMvQyxNQUFNQyxXQUFXUCxnQkFBZ0JNO1lBRWpDLHdCQUF3QjtZQUN4QixNQUFNUCxTQUFTUixZQUFZL0IsR0FBRyxDQUFJK0M7WUFDbEMsSUFBSVIsV0FBVyxNQUFNO2dCQUNuQixPQUFPQTtZQUNUO1lBRUEsMEJBQTBCO1lBQzFCLE1BQU1TLFNBQVMsTUFBTUosZUFBZUssS0FBSyxDQUFDLElBQUksRUFBRUg7WUFFaEQsaUJBQWlCO1lBQ2pCZixZQUFZZixHQUFHLENBQUMrQixVQUFVQyxRQUFRekM7WUFFbEMsT0FBT3lDO1FBQ1Q7UUFFQSxPQUFPTDtJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mZWxpcGV2ZGMxL0RvY3VtZW50cy9wcm9qZXRvcyBjbGF1ZGUgY29kZS9kYXNoYm9hcmQgZXNjYWxhIGluZGVwZW5kZW50ZS9kYXNoYm9hcmQvbGliL2NhY2hlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2ltcGxlIGluLW1lbW9yeSBjYWNoZSB3aXRoIFRUTCAoVGltZSBUbyBMaXZlKVxuICogUGVyZmVjdCBmb3IgY2FjaGluZyBBUEkgcmVzcG9uc2VzIG9uIHRoZSBzZXJ2ZXJcbiAqL1xuXG5pbXBvcnQgeyBjYWNoZUxvZ2dlciB9IGZyb20gJy4vbG9nZ2VyJztcblxuaW50ZXJmYWNlIENhY2hlRW50cnk8VD4ge1xuICBkYXRhOiBUO1xuICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgdHRsOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FjaGVNZXRhZGF0YTxUPiB7XG4gIGRhdGE6IFQgfCBudWxsO1xuICBjYWNoZWRBdDogbnVtYmVyIHwgbnVsbDsgIC8vIFRpbWVzdGFtcCB3aGVuIGNhY2hlZFxuICBleHBpcmVzQXQ6IG51bWJlciB8IG51bGw7IC8vIFRpbWVzdGFtcCB3aGVuIGV4cGlyZXNcbiAgYWdlOiBudW1iZXIgfCBudWxsOyAgICAgICAvLyBBZ2UgaW4gbWlsbGlzZWNvbmRzXG4gIHR0bDogbnVtYmVyIHwgbnVsbDsgICAgICAgLy8gVFRMIGluIG1pbGxpc2Vjb25kc1xufVxuXG5jbGFzcyBNZW1vcnlDYWNoZSB7XG4gIHByaXZhdGUgY2FjaGU6IE1hcDxzdHJpbmcsIENhY2hlRW50cnk8YW55Pj47XG4gIHByaXZhdGUgY2xlYW51cEludGVydmFsOiBOb2RlSlMuVGltZW91dCB8IG51bGw7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jYWNoZSA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmNsZWFudXBJbnRlcnZhbCA9IG51bGw7XG5cbiAgICAvLyBTdGFydCBjbGVhbnVwIGludGVydmFsIChydW5zIGV2ZXJ5IG1pbnV0ZSlcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIE9ubHkgcnVuIG9uIHNlcnZlclxuICAgICAgdGhpcy5zdGFydENsZWFudXAoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZhbHVlIGZyb20gY2FjaGVcbiAgICogUmV0dXJucyBudWxsIGlmIGV4cGlyZWQgb3Igbm90IGZvdW5kXG4gICAqL1xuICBnZXQ8VD4oa2V5OiBzdHJpbmcpOiBUIHwgbnVsbCB7XG4gICAgY29uc3QgZW50cnkgPSB0aGlzLmNhY2hlLmdldChrZXkpO1xuXG4gICAgaWYgKCFlbnRyeSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBhZ2UgPSBub3cgLSBlbnRyeS50aW1lc3RhbXA7XG5cbiAgICAvLyBDaGVjayBpZiBleHBpcmVkXG4gICAgaWYgKGFnZSA+IGVudHJ5LnR0bCkge1xuICAgICAgdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgIGNhY2hlTG9nZ2VyLmRlYnVnKGBDYWNoZSBleHBpcmVkOiAke2tleX0gKGFnZTogJHtNYXRoLnJvdW5kKGFnZSAvIDEwMDApfXMpYCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjYWNoZUxvZ2dlci5kZWJ1ZyhgQ2FjaGUgaGl0OiAke2tleX0gKGFnZTogJHtNYXRoLnJvdW5kKGFnZSAvIDEwMDApfXMpYCk7XG4gICAgcmV0dXJuIGVudHJ5LmRhdGE7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZhbHVlIGZyb20gY2FjaGUgd2l0aCBtZXRhZGF0YSAodGltZXN0YW1wLCBhZ2UsIHR0bClcbiAgICogUmV0dXJucyBtZXRhZGF0YSBldmVuIGlmIGV4cGlyZWQgb3Igbm90IGZvdW5kXG4gICAqL1xuICBnZXRXaXRoTWV0YWRhdGE8VD4oa2V5OiBzdHJpbmcpOiBDYWNoZU1ldGFkYXRhPFQ+IHtcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMuY2FjaGUuZ2V0KGtleSk7XG5cbiAgICBpZiAoIWVudHJ5KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBjYWNoZWRBdDogbnVsbCxcbiAgICAgICAgZXhwaXJlc0F0OiBudWxsLFxuICAgICAgICBhZ2U6IG51bGwsXG4gICAgICAgIHR0bDogbnVsbCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBhZ2UgPSBub3cgLSBlbnRyeS50aW1lc3RhbXA7XG4gICAgY29uc3QgZXhwaXJlc0F0ID0gZW50cnkudGltZXN0YW1wICsgZW50cnkudHRsO1xuXG4gICAgLy8gQ2hlY2sgaWYgZXhwaXJlZFxuICAgIGlmIChhZ2UgPiBlbnRyeS50dGwpIHtcbiAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICBjYWNoZUxvZ2dlci5kZWJ1ZyhgQ2FjaGUgZXhwaXJlZDogJHtrZXl9IChhZ2U6ICR7TWF0aC5yb3VuZChhZ2UgLyAxMDAwKX1zKWApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgY2FjaGVkQXQ6IG51bGwsXG4gICAgICAgIGV4cGlyZXNBdDogbnVsbCxcbiAgICAgICAgYWdlOiBudWxsLFxuICAgICAgICB0dGw6IG51bGwsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNhY2hlTG9nZ2VyLmRlYnVnKGBDYWNoZSBoaXQgd2l0aCBtZXRhZGF0YTogJHtrZXl9IChhZ2U6ICR7TWF0aC5yb3VuZChhZ2UgLyAxMDAwKX1zLCBleHBpcmVzIGluOiAke01hdGgucm91bmQoKGVudHJ5LnR0bCAtIGFnZSkgLyAxMDAwKX1zKWApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IGVudHJ5LmRhdGEsXG4gICAgICBjYWNoZWRBdDogZW50cnkudGltZXN0YW1wLFxuICAgICAgZXhwaXJlc0F0LFxuICAgICAgYWdlLFxuICAgICAgdHRsOiBlbnRyeS50dGwsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdmFsdWUgaW4gY2FjaGUgd2l0aCBUVEwgaW4gbWlsbGlzZWNvbmRzXG4gICAqL1xuICBzZXQ8VD4oa2V5OiBzdHJpbmcsIGRhdGE6IFQsIHR0bDogbnVtYmVyID0gNSAqIDYwICogMTAwMCk6IHZvaWQge1xuICAgIHRoaXMuY2FjaGUuc2V0KGtleSwge1xuICAgICAgZGF0YSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIHR0bCxcbiAgICB9KTtcbiAgICBjYWNoZUxvZ2dlci5kZWJ1ZyhgQ2FjaGUgc2V0OiAke2tleX0gKFRUTDogJHt0dGwgLyAxMDAwfXMpYCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYga2V5IGV4aXN0cyBhbmQgaXMgbm90IGV4cGlyZWRcbiAgICovXG4gIGhhcyhrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdldChrZXkpICE9PSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBzcGVjaWZpYyBrZXlcbiAgICovXG4gIGRlbGV0ZShrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGRlbGV0ZWQgPSB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xuICAgIGlmIChkZWxldGVkKSB7XG4gICAgICBjYWNoZUxvZ2dlci5kZWJ1ZyhgQ2FjaGUgZGVsZXRlZDogJHtrZXl9YCk7XG4gICAgfVxuICAgIHJldHVybiBkZWxldGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCBjYWNoZVxuICAgKi9cbiAgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5jYWNoZS5jbGVhcigpO1xuICAgIGNhY2hlTG9nZ2VyLmRlYnVnKCdDYWNoZSBjbGVhcmVkIGNvbXBsZXRlbHknKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2FjaGUgc2l6ZVxuICAgKi9cbiAgc2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNhY2hlLnNpemU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBjYWNoZSBrZXlzXG4gICAqL1xuICBrZXlzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNhY2hlLmtleXMoKSk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYXV0b21hdGljIGNsZWFudXAgb2YgZXhwaXJlZCBlbnRyaWVzXG4gICAqL1xuICBwcml2YXRlIHN0YXJ0Q2xlYW51cCgpOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFudXBJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICBsZXQgY2xlYW5lZCA9IDA7XG5cbiAgICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIHRoaXMuY2FjaGUuZW50cmllcygpKSB7XG4gICAgICAgIGNvbnN0IGFnZSA9IG5vdyAtIGVudHJ5LnRpbWVzdGFtcDtcbiAgICAgICAgaWYgKGFnZSA+IGVudHJ5LnR0bCkge1xuICAgICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgY2xlYW5lZCsrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjbGVhbmVkID4gMCkge1xuICAgICAgICBjYWNoZUxvZ2dlci5kZWJ1ZyhgQ2FjaGUgY2xlYW51cDogcmVtb3ZlZCAke2NsZWFuZWR9IGV4cGlyZWQgZW50cmllc2ApO1xuICAgICAgfVxuICAgIH0sIDYwICogMTAwMCk7IC8vIFJ1biBldmVyeSBtaW51dGVcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIGNsZWFudXAgaW50ZXJ2YWxcbiAgICovXG4gIHN0b3BDbGVhbnVwKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNsZWFudXBJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmNsZWFudXBJbnRlcnZhbCk7XG4gICAgICB0aGlzLmNsZWFudXBJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjYWNoZSBzdGF0aXN0aWNzXG4gICAqL1xuICBzdGF0cygpOiB7XG4gICAgc2l6ZTogbnVtYmVyO1xuICAgIGtleXM6IHN0cmluZ1tdO1xuICAgIGVudHJpZXM6IEFycmF5PHsga2V5OiBzdHJpbmc7IGFnZTogbnVtYmVyOyB0dGw6IG51bWJlciB9PjtcbiAgfSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuZnJvbSh0aGlzLmNhY2hlLmVudHJpZXMoKSkubWFwKChba2V5LCBlbnRyeV0pID0+ICh7XG4gICAgICBrZXksXG4gICAgICBhZ2U6IG5vdyAtIGVudHJ5LnRpbWVzdGFtcCxcbiAgICAgIHR0bDogZW50cnkudHRsLFxuICAgIH0pKTtcblxuICAgIHJldHVybiB7XG4gICAgICBzaXplOiB0aGlzLmNhY2hlLnNpemUsXG4gICAgICBrZXlzOiB0aGlzLmtleXMoKSxcbiAgICAgIGVudHJpZXMsXG4gICAgfTtcbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgbWVtb3J5Q2FjaGUgPSBuZXcgTWVtb3J5Q2FjaGUoKTtcblxuLy8gRXhwb3J0IGNsYXNzIGZvciB0ZXN0aW5nXG5leHBvcnQgeyBNZW1vcnlDYWNoZSB9O1xuXG4vKipcbiAqIEhlbHBlciB0byBnZW5lcmF0ZSBjYWNoZSBrZXlzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUNhY2hlS2V5KHByZWZpeDogc3RyaW5nLCBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBzdHJpbmcge1xuICBjb25zdCBzb3J0ZWRQYXJhbXMgPSBPYmplY3Qua2V5cyhwYXJhbXMpXG4gICAgLnNvcnQoKVxuICAgIC5tYXAoa2V5ID0+IGAke2tleX09JHtwYXJhbXNba2V5XX1gKVxuICAgIC5qb2luKCcmJyk7XG5cbiAgcmV0dXJuIGAke3ByZWZpeH06JHtzb3J0ZWRQYXJhbXN9YDtcbn1cblxuLyoqXG4gKiBEZWNvcmF0b3IgZm9yIGNhY2hpbmcgZnVuY3Rpb24gcmVzdWx0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2FjaGVkPFQ+KFxuICBrZXlHZW5lcmF0b3I6ICguLi5hcmdzOiBhbnlbXSkgPT4gc3RyaW5nLFxuICB0dGw6IG51bWJlciA9IDUgKiA2MCAqIDEwMDBcbikge1xuICByZXR1cm4gZnVuY3Rpb24gKFxuICAgIHRhcmdldDogYW55LFxuICAgIHByb3BlcnR5S2V5OiBzdHJpbmcsXG4gICAgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yXG4gICkge1xuICAgIGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcblxuICAgIGRlc2NyaXB0b3IudmFsdWUgPSBhc3luYyBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcbiAgICAgIGNvbnN0IGNhY2hlS2V5ID0ga2V5R2VuZXJhdG9yKC4uLmFyZ3MpO1xuXG4gICAgICAvLyBUcnkgdG8gZ2V0IGZyb20gY2FjaGVcbiAgICAgIGNvbnN0IGNhY2hlZCA9IG1lbW9yeUNhY2hlLmdldDxUPihjYWNoZUtleSk7XG4gICAgICBpZiAoY2FjaGVkICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIEV4ZWN1dGUgb3JpZ2luYWwgbWV0aG9kXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcmlnaW5hbE1ldGhvZC5hcHBseSh0aGlzLCBhcmdzKTtcblxuICAgICAgLy8gU3RvcmUgaW4gY2FjaGVcbiAgICAgIG1lbW9yeUNhY2hlLnNldChjYWNoZUtleSwgcmVzdWx0LCB0dGwpO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICByZXR1cm4gZGVzY3JpcHRvcjtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJjYWNoZUxvZ2dlciIsIk1lbW9yeUNhY2hlIiwiY2FjaGUiLCJNYXAiLCJjbGVhbnVwSW50ZXJ2YWwiLCJzdGFydENsZWFudXAiLCJnZXQiLCJrZXkiLCJlbnRyeSIsIm5vdyIsIkRhdGUiLCJhZ2UiLCJ0aW1lc3RhbXAiLCJ0dGwiLCJkZWxldGUiLCJkZWJ1ZyIsIk1hdGgiLCJyb3VuZCIsImRhdGEiLCJnZXRXaXRoTWV0YWRhdGEiLCJjYWNoZWRBdCIsImV4cGlyZXNBdCIsInNldCIsImhhcyIsImRlbGV0ZWQiLCJjbGVhciIsInNpemUiLCJrZXlzIiwiQXJyYXkiLCJmcm9tIiwic2V0SW50ZXJ2YWwiLCJjbGVhbmVkIiwiZW50cmllcyIsInN0b3BDbGVhbnVwIiwiY2xlYXJJbnRlcnZhbCIsInN0YXRzIiwibWFwIiwibWVtb3J5Q2FjaGUiLCJnZW5lcmF0ZUNhY2hlS2V5IiwicHJlZml4IiwicGFyYW1zIiwic29ydGVkUGFyYW1zIiwiT2JqZWN0Iiwic29ydCIsImpvaW4iLCJjYWNoZWQiLCJrZXlHZW5lcmF0b3IiLCJ0YXJnZXQiLCJwcm9wZXJ0eUtleSIsImRlc2NyaXB0b3IiLCJvcmlnaW5hbE1ldGhvZCIsInZhbHVlIiwiYXJncyIsImNhY2hlS2V5IiwicmVzdWx0IiwiYXBwbHkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/cache.ts\n");

/***/ }),

/***/ "(rsc)/./lib/dateUtils.ts":
/*!**************************!*\
  !*** ./lib/dateUtils.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatDateRangeDisplay: () => (/* binding */ formatDateRangeDisplay),\n/* harmony export */   formatDateString: () => (/* binding */ formatDateString),\n/* harmony export */   getComparisonPeriod: () => (/* binding */ getComparisonPeriod),\n/* harmony export */   getCurrentAndPreviousMonthRanges: () => (/* binding */ getCurrentAndPreviousMonthRanges),\n/* harmony export */   getDateRangeByPreset: () => (/* binding */ getDateRangeByPreset),\n/* harmony export */   getLastMonthRange: () => (/* binding */ getLastMonthRange),\n/* harmony export */   getLastWeekRange: () => (/* binding */ getLastWeekRange),\n/* harmony export */   getThisMonthRange: () => (/* binding */ getThisMonthRange),\n/* harmony export */   getThisWeekRange: () => (/* binding */ getThisWeekRange),\n/* harmony export */   getTodayRange: () => (/* binding */ getTodayRange),\n/* harmony export */   getYesterdayRange: () => (/* binding */ getYesterdayRange)\n/* harmony export */ });\n/**\n * Date utility functions for dashboard date ranges\n */ /**\n * Format date to YYYY-MM-DD\n */ function formatDateString(date) {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n}\n/**\n * Get start of day\n */ function getStartOfDay(date) {\n    const d = new Date(date);\n    d.setHours(0, 0, 0, 0);\n    return d;\n}\n/**\n * Get end of day\n */ function getEndOfDay(date) {\n    const d = new Date(date);\n    d.setHours(23, 59, 59, 999);\n    return d;\n}\n/**\n * Get start of week (Monday)\n */ function getStartOfWeek(date) {\n    const d = new Date(date);\n    const day = d.getDay();\n    const diff = day === 0 ? -6 : 1 - day; // Adjust when day is Sunday\n    d.setDate(d.getDate() + diff);\n    return getStartOfDay(d);\n}\n/**\n * Get end of week (Sunday)\n */ function getEndOfWeek(date) {\n    const d = getStartOfWeek(date);\n    d.setDate(d.getDate() + 6);\n    return getEndOfDay(d);\n}\n/**\n * Get start of month\n */ function getStartOfMonth(date) {\n    const d = new Date(date);\n    d.setDate(1);\n    return getStartOfDay(d);\n}\n/**\n * Get end of month\n */ function getEndOfMonth(date) {\n    const d = new Date(date);\n    d.setMonth(d.getMonth() + 1);\n    d.setDate(0);\n    return getEndOfDay(d);\n}\n/**\n * Get date range for today (using Brasilia timezone UTC-3)\n */ function getTodayRange() {\n    // Get current time in Brasilia timezone (UTC-3)\n    const now = new Date();\n    const utcOffset = now.getTimezoneOffset() * 60000; // offset in ms\n    const brasiliaOffset = -3 * 60 * 60000; // UTC-3 in ms\n    const brasiliaTime = new Date(now.getTime() + utcOffset + brasiliaOffset);\n    return {\n        startDate: formatDateString(getStartOfDay(brasiliaTime)),\n        endDate: formatDateString(getEndOfDay(brasiliaTime)),\n        preset: 'today'\n    };\n}\n/**\n * Get date range for yesterday\n */ function getYesterdayRange() {\n    const yesterday = new Date();\n    yesterday.setDate(yesterday.getDate() - 1);\n    return {\n        startDate: formatDateString(getStartOfDay(yesterday)),\n        endDate: formatDateString(getEndOfDay(yesterday)),\n        preset: 'yesterday'\n    };\n}\n/**\n * Get date range for this week\n */ function getThisWeekRange() {\n    const today = new Date();\n    return {\n        startDate: formatDateString(getStartOfWeek(today)),\n        endDate: formatDateString(getEndOfDay(today)),\n        preset: 'this_week'\n    };\n}\n/**\n * Get date range for last week\n */ function getLastWeekRange() {\n    const today = new Date();\n    const lastWeek = new Date(today);\n    lastWeek.setDate(lastWeek.getDate() - 7);\n    return {\n        startDate: formatDateString(getStartOfWeek(lastWeek)),\n        endDate: formatDateString(getEndOfWeek(lastWeek)),\n        preset: 'last_week'\n    };\n}\n/**\n * Get date range for this month\n */ function getThisMonthRange() {\n    const today = new Date();\n    return {\n        startDate: formatDateString(getStartOfMonth(today)),\n        endDate: formatDateString(getEndOfDay(today)),\n        preset: 'this_month'\n    };\n}\n/**\n * Get date range for last month\n */ function getLastMonthRange() {\n    const today = new Date();\n    const lastMonth = new Date(today);\n    lastMonth.setMonth(lastMonth.getMonth() - 1);\n    return {\n        startDate: formatDateString(getStartOfMonth(lastMonth)),\n        endDate: formatDateString(getEndOfMonth(lastMonth)),\n        preset: 'last_month'\n    };\n}\n/**\n * Get date range by preset\n */ function getDateRangeByPreset(preset) {\n    switch(preset){\n        case 'today':\n            return getTodayRange();\n        case 'yesterday':\n            return getYesterdayRange();\n        case 'this_week':\n            return getThisWeekRange();\n        case 'last_week':\n            return getLastWeekRange();\n        case 'this_month':\n            return getThisMonthRange();\n        case 'last_month':\n            return getLastMonthRange();\n        default:\n            return getTodayRange();\n    }\n}\n/**\n * Get comparison period for the same duration before the selected range\n */ function getComparisonPeriod(startDate, endDate) {\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    // Calculate duration in days\n    const duration = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24));\n    // Go back the same duration\n    const comparisonEnd = new Date(start);\n    comparisonEnd.setDate(comparisonEnd.getDate() - 1);\n    const comparisonStart = new Date(comparisonEnd);\n    comparisonStart.setDate(comparisonStart.getDate() - duration + 1);\n    return {\n        start: formatDateString(comparisonStart),\n        end: formatDateString(comparisonEnd)\n    };\n}\n/**\n * Format date range to display text\n */ function formatDateRangeDisplay(startDate, endDate, preset) {\n    const presetLabels = {\n        today: 'Hoje',\n        yesterday: 'Ontem',\n        this_week: 'Esta Semana',\n        last_week: 'Semana Passada',\n        this_month: 'Este Mês',\n        last_month: 'Mês Passado',\n        custom: 'Período Customizado'\n    };\n    if (preset !== 'custom') {\n        return presetLabels[preset];\n    }\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const formatter = new Intl.DateTimeFormat('pt-BR', {\n        day: '2-digit',\n        month: 'short'\n    });\n    return `${formatter.format(start)} - ${formatter.format(end)}`;\n}\n/**\n * Get current month and previous month ranges for chart comparison\n * Always returns these two months regardless of any filter\n */ function getCurrentAndPreviousMonthRanges() {\n    const today = new Date();\n    // Current month: full month (1st to last day) - for fair comparison with previous month\n    const currentMonth = {\n        startDate: formatDateString(getStartOfMonth(today)),\n        endDate: formatDateString(getEndOfMonth(today))\n    };\n    // Previous month: 1st day until last day of previous month\n    const lastMonthDate = new Date(today);\n    lastMonthDate.setMonth(lastMonthDate.getMonth() - 1);\n    const previousMonth = {\n        startDate: formatDateString(getStartOfMonth(lastMonthDate)),\n        endDate: formatDateString(getEndOfMonth(lastMonthDate))\n    };\n    return {\n        currentMonth,\n        previousMonth\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGF0ZVV0aWxzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0NBRUMsR0FpQkQ7O0NBRUMsR0FDTSxTQUFTQSxpQkFBaUJDLElBQVU7SUFDekMsTUFBTUMsT0FBT0QsS0FBS0UsV0FBVztJQUM3QixNQUFNQyxRQUFRQyxPQUFPSixLQUFLSyxRQUFRLEtBQUssR0FBR0MsUUFBUSxDQUFDLEdBQUc7SUFDdEQsTUFBTUMsTUFBTUgsT0FBT0osS0FBS1EsT0FBTyxJQUFJRixRQUFRLENBQUMsR0FBRztJQUMvQyxPQUFPLEdBQUdMLEtBQUssQ0FBQyxFQUFFRSxNQUFNLENBQUMsRUFBRUksS0FBSztBQUNsQztBQUVBOztDQUVDLEdBQ0QsU0FBU0UsY0FBY1QsSUFBVTtJQUMvQixNQUFNVSxJQUFJLElBQUlDLEtBQUtYO0lBQ25CVSxFQUFFRSxRQUFRLENBQUMsR0FBRyxHQUFHLEdBQUc7SUFDcEIsT0FBT0Y7QUFDVDtBQUVBOztDQUVDLEdBQ0QsU0FBU0csWUFBWWIsSUFBVTtJQUM3QixNQUFNVSxJQUFJLElBQUlDLEtBQUtYO0lBQ25CVSxFQUFFRSxRQUFRLENBQUMsSUFBSSxJQUFJLElBQUk7SUFDdkIsT0FBT0Y7QUFDVDtBQUVBOztDQUVDLEdBQ0QsU0FBU0ksZUFBZWQsSUFBVTtJQUNoQyxNQUFNVSxJQUFJLElBQUlDLEtBQUtYO0lBQ25CLE1BQU1PLE1BQU1HLEVBQUVLLE1BQU07SUFDcEIsTUFBTUMsT0FBT1QsUUFBUSxJQUFJLENBQUMsSUFBSSxJQUFJQSxLQUFLLDRCQUE0QjtJQUNuRUcsRUFBRU8sT0FBTyxDQUFDUCxFQUFFRixPQUFPLEtBQUtRO0lBQ3hCLE9BQU9QLGNBQWNDO0FBQ3ZCO0FBRUE7O0NBRUMsR0FDRCxTQUFTUSxhQUFhbEIsSUFBVTtJQUM5QixNQUFNVSxJQUFJSSxlQUFlZDtJQUN6QlUsRUFBRU8sT0FBTyxDQUFDUCxFQUFFRixPQUFPLEtBQUs7SUFDeEIsT0FBT0ssWUFBWUg7QUFDckI7QUFFQTs7Q0FFQyxHQUNELFNBQVNTLGdCQUFnQm5CLElBQVU7SUFDakMsTUFBTVUsSUFBSSxJQUFJQyxLQUFLWDtJQUNuQlUsRUFBRU8sT0FBTyxDQUFDO0lBQ1YsT0FBT1IsY0FBY0M7QUFDdkI7QUFFQTs7Q0FFQyxHQUNELFNBQVNVLGNBQWNwQixJQUFVO0lBQy9CLE1BQU1VLElBQUksSUFBSUMsS0FBS1g7SUFDbkJVLEVBQUVXLFFBQVEsQ0FBQ1gsRUFBRUwsUUFBUSxLQUFLO0lBQzFCSyxFQUFFTyxPQUFPLENBQUM7SUFDVixPQUFPSixZQUFZSDtBQUNyQjtBQUVBOztDQUVDLEdBQ00sU0FBU1k7SUFDZCxnREFBZ0Q7SUFDaEQsTUFBTUMsTUFBTSxJQUFJWjtJQUNoQixNQUFNYSxZQUFZRCxJQUFJRSxpQkFBaUIsS0FBSyxPQUFPLGVBQWU7SUFDbEUsTUFBTUMsaUJBQWlCLENBQUMsSUFBSSxLQUFLLE9BQU8sY0FBYztJQUN0RCxNQUFNQyxlQUFlLElBQUloQixLQUFLWSxJQUFJSyxPQUFPLEtBQUtKLFlBQVlFO0lBRTFELE9BQU87UUFDTEcsV0FBVzlCLGlCQUFpQlUsY0FBY2tCO1FBQzFDRyxTQUFTL0IsaUJBQWlCYyxZQUFZYztRQUN0Q0ksUUFBUTtJQUNWO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNDO0lBQ2QsTUFBTUMsWUFBWSxJQUFJdEI7SUFDdEJzQixVQUFVaEIsT0FBTyxDQUFDZ0IsVUFBVXpCLE9BQU8sS0FBSztJQUN4QyxPQUFPO1FBQ0xxQixXQUFXOUIsaUJBQWlCVSxjQUFjd0I7UUFDMUNILFNBQVMvQixpQkFBaUJjLFlBQVlvQjtRQUN0Q0YsUUFBUTtJQUNWO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNHO0lBQ2QsTUFBTUMsUUFBUSxJQUFJeEI7SUFDbEIsT0FBTztRQUNMa0IsV0FBVzlCLGlCQUFpQmUsZUFBZXFCO1FBQzNDTCxTQUFTL0IsaUJBQWlCYyxZQUFZc0I7UUFDdENKLFFBQVE7SUFDVjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxTQUFTSztJQUNkLE1BQU1ELFFBQVEsSUFBSXhCO0lBQ2xCLE1BQU0wQixXQUFXLElBQUkxQixLQUFLd0I7SUFDMUJFLFNBQVNwQixPQUFPLENBQUNvQixTQUFTN0IsT0FBTyxLQUFLO0lBQ3RDLE9BQU87UUFDTHFCLFdBQVc5QixpQkFBaUJlLGVBQWV1QjtRQUMzQ1AsU0FBUy9CLGlCQUFpQm1CLGFBQWFtQjtRQUN2Q04sUUFBUTtJQUNWO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNPO0lBQ2QsTUFBTUgsUUFBUSxJQUFJeEI7SUFDbEIsT0FBTztRQUNMa0IsV0FBVzlCLGlCQUFpQm9CLGdCQUFnQmdCO1FBQzVDTCxTQUFTL0IsaUJBQWlCYyxZQUFZc0I7UUFDdENKLFFBQVE7SUFDVjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxTQUFTUTtJQUNkLE1BQU1KLFFBQVEsSUFBSXhCO0lBQ2xCLE1BQU02QixZQUFZLElBQUk3QixLQUFLd0I7SUFDM0JLLFVBQVVuQixRQUFRLENBQUNtQixVQUFVbkMsUUFBUSxLQUFLO0lBQzFDLE9BQU87UUFDTHdCLFdBQVc5QixpQkFBaUJvQixnQkFBZ0JxQjtRQUM1Q1YsU0FBUy9CLGlCQUFpQnFCLGNBQWNvQjtRQUN4Q1QsUUFBUTtJQUNWO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNVLHFCQUFxQlYsTUFBa0I7SUFDckQsT0FBUUE7UUFDTixLQUFLO1lBQ0gsT0FBT1Q7UUFDVCxLQUFLO1lBQ0gsT0FBT1U7UUFDVCxLQUFLO1lBQ0gsT0FBT0U7UUFDVCxLQUFLO1lBQ0gsT0FBT0U7UUFDVCxLQUFLO1lBQ0gsT0FBT0U7UUFDVCxLQUFLO1lBQ0gsT0FBT0M7UUFDVDtZQUNFLE9BQU9qQjtJQUNYO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNvQixvQkFBb0JiLFNBQWlCLEVBQUVDLE9BQWU7SUFDcEUsTUFBTWEsUUFBUSxJQUFJaEMsS0FBS2tCO0lBQ3ZCLE1BQU1lLE1BQU0sSUFBSWpDLEtBQUttQjtJQUVyQiw2QkFBNkI7SUFDN0IsTUFBTWUsV0FBV0MsS0FBS0MsSUFBSSxDQUFDLENBQUNILElBQUloQixPQUFPLEtBQUtlLE1BQU1mLE9BQU8sRUFBQyxJQUFNLFFBQU8sS0FBSyxLQUFLLEVBQUM7SUFFbEYsNEJBQTRCO0lBQzVCLE1BQU1vQixnQkFBZ0IsSUFBSXJDLEtBQUtnQztJQUMvQkssY0FBYy9CLE9BQU8sQ0FBQytCLGNBQWN4QyxPQUFPLEtBQUs7SUFFaEQsTUFBTXlDLGtCQUFrQixJQUFJdEMsS0FBS3FDO0lBQ2pDQyxnQkFBZ0JoQyxPQUFPLENBQUNnQyxnQkFBZ0J6QyxPQUFPLEtBQUtxQyxXQUFXO0lBRS9ELE9BQU87UUFDTEYsT0FBTzVDLGlCQUFpQmtEO1FBQ3hCTCxLQUFLN0MsaUJBQWlCaUQ7SUFDeEI7QUFDRjtBQUVBOztDQUVDLEdBQ00sU0FBU0UsdUJBQXVCckIsU0FBaUIsRUFBRUMsT0FBZSxFQUFFQyxNQUFrQjtJQUMzRixNQUFNb0IsZUFBMkM7UUFDL0NoQixPQUFPO1FBQ1BGLFdBQVc7UUFDWG1CLFdBQVc7UUFDWEMsV0FBVztRQUNYQyxZQUFZO1FBQ1pDLFlBQVk7UUFDWkMsUUFBUTtJQUNWO0lBRUEsSUFBSXpCLFdBQVcsVUFBVTtRQUN2QixPQUFPb0IsWUFBWSxDQUFDcEIsT0FBTztJQUM3QjtJQUVBLE1BQU1ZLFFBQVEsSUFBSWhDLEtBQUtrQjtJQUN2QixNQUFNZSxNQUFNLElBQUlqQyxLQUFLbUI7SUFFckIsTUFBTTJCLFlBQVksSUFBSUMsS0FBS0MsY0FBYyxDQUFDLFNBQVM7UUFDakRwRCxLQUFLO1FBQ0xKLE9BQU87SUFDVDtJQUVBLE9BQU8sR0FBR3NELFVBQVVHLE1BQU0sQ0FBQ2pCLE9BQU8sR0FBRyxFQUFFYyxVQUFVRyxNQUFNLENBQUNoQixNQUFNO0FBQ2hFO0FBRUE7OztDQUdDLEdBQ00sU0FBU2lCO0lBSWQsTUFBTTFCLFFBQVEsSUFBSXhCO0lBRWxCLHdGQUF3RjtJQUN4RixNQUFNbUQsZUFBZTtRQUNuQmpDLFdBQVc5QixpQkFBaUJvQixnQkFBZ0JnQjtRQUM1Q0wsU0FBUy9CLGlCQUFpQnFCLGNBQWNlO0lBQzFDO0lBRUEsMkRBQTJEO0lBQzNELE1BQU00QixnQkFBZ0IsSUFBSXBELEtBQUt3QjtJQUMvQjRCLGNBQWMxQyxRQUFRLENBQUMwQyxjQUFjMUQsUUFBUSxLQUFLO0lBRWxELE1BQU0yRCxnQkFBZ0I7UUFDcEJuQyxXQUFXOUIsaUJBQWlCb0IsZ0JBQWdCNEM7UUFDNUNqQyxTQUFTL0IsaUJBQWlCcUIsY0FBYzJDO0lBQzFDO0lBRUEsT0FBTztRQUFFRDtRQUFjRTtJQUFjO0FBQ3ZDIiwic291cmNlcyI6WyIvVXNlcnMvZmVsaXBldmRjMS9Eb2N1bWVudHMvcHJvamV0b3MgY2xhdWRlIGNvZGUvZGFzaGJvYXJkIGVzY2FsYSBpbmRlcGVuZGVudGUvZGFzaGJvYXJkL2xpYi9kYXRlVXRpbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEYXRlIHV0aWxpdHkgZnVuY3Rpb25zIGZvciBkYXNoYm9hcmQgZGF0ZSByYW5nZXNcbiAqL1xuXG5leHBvcnQgdHlwZSBEYXRlUHJlc2V0ID1cbiAgfCAndG9kYXknXG4gIHwgJ3llc3RlcmRheSdcbiAgfCAndGhpc193ZWVrJ1xuICB8ICdsYXN0X3dlZWsnXG4gIHwgJ3RoaXNfbW9udGgnXG4gIHwgJ2xhc3RfbW9udGgnXG4gIHwgJ2N1c3RvbSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGF0ZVJhbmdlIHtcbiAgc3RhcnREYXRlOiBzdHJpbmc7IC8vIFlZWVktTU0tRERcbiAgZW5kRGF0ZTogc3RyaW5nOyAgIC8vIFlZWVktTU0tRERcbiAgcHJlc2V0OiBEYXRlUHJlc2V0O1xufVxuXG4vKipcbiAqIEZvcm1hdCBkYXRlIHRvIFlZWVktTU0tRERcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGVTdHJpbmcoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWA7XG59XG5cbi8qKlxuICogR2V0IHN0YXJ0IG9mIGRheVxuICovXG5mdW5jdGlvbiBnZXRTdGFydE9mRGF5KGRhdGU6IERhdGUpOiBEYXRlIHtcbiAgY29uc3QgZCA9IG5ldyBEYXRlKGRhdGUpO1xuICBkLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZDtcbn1cblxuLyoqXG4gKiBHZXQgZW5kIG9mIGRheVxuICovXG5mdW5jdGlvbiBnZXRFbmRPZkRheShkYXRlOiBEYXRlKTogRGF0ZSB7XG4gIGNvbnN0IGQgPSBuZXcgRGF0ZShkYXRlKTtcbiAgZC5zZXRIb3VycygyMywgNTksIDU5LCA5OTkpO1xuICByZXR1cm4gZDtcbn1cblxuLyoqXG4gKiBHZXQgc3RhcnQgb2Ygd2VlayAoTW9uZGF5KVxuICovXG5mdW5jdGlvbiBnZXRTdGFydE9mV2VlayhkYXRlOiBEYXRlKTogRGF0ZSB7XG4gIGNvbnN0IGQgPSBuZXcgRGF0ZShkYXRlKTtcbiAgY29uc3QgZGF5ID0gZC5nZXREYXkoKTtcbiAgY29uc3QgZGlmZiA9IGRheSA9PT0gMCA/IC02IDogMSAtIGRheTsgLy8gQWRqdXN0IHdoZW4gZGF5IGlzIFN1bmRheVxuICBkLnNldERhdGUoZC5nZXREYXRlKCkgKyBkaWZmKTtcbiAgcmV0dXJuIGdldFN0YXJ0T2ZEYXkoZCk7XG59XG5cbi8qKlxuICogR2V0IGVuZCBvZiB3ZWVrIChTdW5kYXkpXG4gKi9cbmZ1bmN0aW9uIGdldEVuZE9mV2VlayhkYXRlOiBEYXRlKTogRGF0ZSB7XG4gIGNvbnN0IGQgPSBnZXRTdGFydE9mV2VlayhkYXRlKTtcbiAgZC5zZXREYXRlKGQuZ2V0RGF0ZSgpICsgNik7XG4gIHJldHVybiBnZXRFbmRPZkRheShkKTtcbn1cblxuLyoqXG4gKiBHZXQgc3RhcnQgb2YgbW9udGhcbiAqL1xuZnVuY3Rpb24gZ2V0U3RhcnRPZk1vbnRoKGRhdGU6IERhdGUpOiBEYXRlIHtcbiAgY29uc3QgZCA9IG5ldyBEYXRlKGRhdGUpO1xuICBkLnNldERhdGUoMSk7XG4gIHJldHVybiBnZXRTdGFydE9mRGF5KGQpO1xufVxuXG4vKipcbiAqIEdldCBlbmQgb2YgbW9udGhcbiAqL1xuZnVuY3Rpb24gZ2V0RW5kT2ZNb250aChkYXRlOiBEYXRlKTogRGF0ZSB7XG4gIGNvbnN0IGQgPSBuZXcgRGF0ZShkYXRlKTtcbiAgZC5zZXRNb250aChkLmdldE1vbnRoKCkgKyAxKTtcbiAgZC5zZXREYXRlKDApO1xuICByZXR1cm4gZ2V0RW5kT2ZEYXkoZCk7XG59XG5cbi8qKlxuICogR2V0IGRhdGUgcmFuZ2UgZm9yIHRvZGF5ICh1c2luZyBCcmFzaWxpYSB0aW1lem9uZSBVVEMtMylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvZGF5UmFuZ2UoKTogRGF0ZVJhbmdlIHtcbiAgLy8gR2V0IGN1cnJlbnQgdGltZSBpbiBCcmFzaWxpYSB0aW1lem9uZSAoVVRDLTMpXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gIGNvbnN0IHV0Y09mZnNldCA9IG5vdy5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDA7IC8vIG9mZnNldCBpbiBtc1xuICBjb25zdCBicmFzaWxpYU9mZnNldCA9IC0zICogNjAgKiA2MDAwMDsgLy8gVVRDLTMgaW4gbXNcbiAgY29uc3QgYnJhc2lsaWFUaW1lID0gbmV3IERhdGUobm93LmdldFRpbWUoKSArIHV0Y09mZnNldCArIGJyYXNpbGlhT2Zmc2V0KTtcblxuICByZXR1cm4ge1xuICAgIHN0YXJ0RGF0ZTogZm9ybWF0RGF0ZVN0cmluZyhnZXRTdGFydE9mRGF5KGJyYXNpbGlhVGltZSkpLFxuICAgIGVuZERhdGU6IGZvcm1hdERhdGVTdHJpbmcoZ2V0RW5kT2ZEYXkoYnJhc2lsaWFUaW1lKSksXG4gICAgcHJlc2V0OiAndG9kYXknLFxuICB9O1xufVxuXG4vKipcbiAqIEdldCBkYXRlIHJhbmdlIGZvciB5ZXN0ZXJkYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFllc3RlcmRheVJhbmdlKCk6IERhdGVSYW5nZSB7XG4gIGNvbnN0IHllc3RlcmRheSA9IG5ldyBEYXRlKCk7XG4gIHllc3RlcmRheS5zZXREYXRlKHllc3RlcmRheS5nZXREYXRlKCkgLSAxKTtcbiAgcmV0dXJuIHtcbiAgICBzdGFydERhdGU6IGZvcm1hdERhdGVTdHJpbmcoZ2V0U3RhcnRPZkRheSh5ZXN0ZXJkYXkpKSxcbiAgICBlbmREYXRlOiBmb3JtYXREYXRlU3RyaW5nKGdldEVuZE9mRGF5KHllc3RlcmRheSkpLFxuICAgIHByZXNldDogJ3llc3RlcmRheScsXG4gIH07XG59XG5cbi8qKlxuICogR2V0IGRhdGUgcmFuZ2UgZm9yIHRoaXMgd2Vla1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGhpc1dlZWtSYW5nZSgpOiBEYXRlUmFuZ2Uge1xuICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gIHJldHVybiB7XG4gICAgc3RhcnREYXRlOiBmb3JtYXREYXRlU3RyaW5nKGdldFN0YXJ0T2ZXZWVrKHRvZGF5KSksXG4gICAgZW5kRGF0ZTogZm9ybWF0RGF0ZVN0cmluZyhnZXRFbmRPZkRheSh0b2RheSkpLFxuICAgIHByZXNldDogJ3RoaXNfd2VlaycsXG4gIH07XG59XG5cbi8qKlxuICogR2V0IGRhdGUgcmFuZ2UgZm9yIGxhc3Qgd2Vla1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFzdFdlZWtSYW5nZSgpOiBEYXRlUmFuZ2Uge1xuICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gIGNvbnN0IGxhc3RXZWVrID0gbmV3IERhdGUodG9kYXkpO1xuICBsYXN0V2Vlay5zZXREYXRlKGxhc3RXZWVrLmdldERhdGUoKSAtIDcpO1xuICByZXR1cm4ge1xuICAgIHN0YXJ0RGF0ZTogZm9ybWF0RGF0ZVN0cmluZyhnZXRTdGFydE9mV2VlayhsYXN0V2VlaykpLFxuICAgIGVuZERhdGU6IGZvcm1hdERhdGVTdHJpbmcoZ2V0RW5kT2ZXZWVrKGxhc3RXZWVrKSksXG4gICAgcHJlc2V0OiAnbGFzdF93ZWVrJyxcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXQgZGF0ZSByYW5nZSBmb3IgdGhpcyBtb250aFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGhpc01vbnRoUmFuZ2UoKTogRGF0ZVJhbmdlIHtcbiAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICByZXR1cm4ge1xuICAgIHN0YXJ0RGF0ZTogZm9ybWF0RGF0ZVN0cmluZyhnZXRTdGFydE9mTW9udGgodG9kYXkpKSxcbiAgICBlbmREYXRlOiBmb3JtYXREYXRlU3RyaW5nKGdldEVuZE9mRGF5KHRvZGF5KSksXG4gICAgcHJlc2V0OiAndGhpc19tb250aCcsXG4gIH07XG59XG5cbi8qKlxuICogR2V0IGRhdGUgcmFuZ2UgZm9yIGxhc3QgbW9udGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhc3RNb250aFJhbmdlKCk6IERhdGVSYW5nZSB7XG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgY29uc3QgbGFzdE1vbnRoID0gbmV3IERhdGUodG9kYXkpO1xuICBsYXN0TW9udGguc2V0TW9udGgobGFzdE1vbnRoLmdldE1vbnRoKCkgLSAxKTtcbiAgcmV0dXJuIHtcbiAgICBzdGFydERhdGU6IGZvcm1hdERhdGVTdHJpbmcoZ2V0U3RhcnRPZk1vbnRoKGxhc3RNb250aCkpLFxuICAgIGVuZERhdGU6IGZvcm1hdERhdGVTdHJpbmcoZ2V0RW5kT2ZNb250aChsYXN0TW9udGgpKSxcbiAgICBwcmVzZXQ6ICdsYXN0X21vbnRoJyxcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXQgZGF0ZSByYW5nZSBieSBwcmVzZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGVSYW5nZUJ5UHJlc2V0KHByZXNldDogRGF0ZVByZXNldCk6IERhdGVSYW5nZSB7XG4gIHN3aXRjaCAocHJlc2V0KSB7XG4gICAgY2FzZSAndG9kYXknOlxuICAgICAgcmV0dXJuIGdldFRvZGF5UmFuZ2UoKTtcbiAgICBjYXNlICd5ZXN0ZXJkYXknOlxuICAgICAgcmV0dXJuIGdldFllc3RlcmRheVJhbmdlKCk7XG4gICAgY2FzZSAndGhpc193ZWVrJzpcbiAgICAgIHJldHVybiBnZXRUaGlzV2Vla1JhbmdlKCk7XG4gICAgY2FzZSAnbGFzdF93ZWVrJzpcbiAgICAgIHJldHVybiBnZXRMYXN0V2Vla1JhbmdlKCk7XG4gICAgY2FzZSAndGhpc19tb250aCc6XG4gICAgICByZXR1cm4gZ2V0VGhpc01vbnRoUmFuZ2UoKTtcbiAgICBjYXNlICdsYXN0X21vbnRoJzpcbiAgICAgIHJldHVybiBnZXRMYXN0TW9udGhSYW5nZSgpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZ2V0VG9kYXlSYW5nZSgpO1xuICB9XG59XG5cbi8qKlxuICogR2V0IGNvbXBhcmlzb24gcGVyaW9kIGZvciB0aGUgc2FtZSBkdXJhdGlvbiBiZWZvcmUgdGhlIHNlbGVjdGVkIHJhbmdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wYXJpc29uUGVyaW9kKHN0YXJ0RGF0ZTogc3RyaW5nLCBlbmREYXRlOiBzdHJpbmcpOiB7IHN0YXJ0OiBzdHJpbmc7IGVuZDogc3RyaW5nIH0ge1xuICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSk7XG4gIGNvbnN0IGVuZCA9IG5ldyBEYXRlKGVuZERhdGUpO1xuXG4gIC8vIENhbGN1bGF0ZSBkdXJhdGlvbiBpbiBkYXlzXG4gIGNvbnN0IGR1cmF0aW9uID0gTWF0aC5jZWlsKChlbmQuZ2V0VGltZSgpIC0gc3RhcnQuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG5cbiAgLy8gR28gYmFjayB0aGUgc2FtZSBkdXJhdGlvblxuICBjb25zdCBjb21wYXJpc29uRW5kID0gbmV3IERhdGUoc3RhcnQpO1xuICBjb21wYXJpc29uRW5kLnNldERhdGUoY29tcGFyaXNvbkVuZC5nZXREYXRlKCkgLSAxKTtcblxuICBjb25zdCBjb21wYXJpc29uU3RhcnQgPSBuZXcgRGF0ZShjb21wYXJpc29uRW5kKTtcbiAgY29tcGFyaXNvblN0YXJ0LnNldERhdGUoY29tcGFyaXNvblN0YXJ0LmdldERhdGUoKSAtIGR1cmF0aW9uICsgMSk7XG5cbiAgcmV0dXJuIHtcbiAgICBzdGFydDogZm9ybWF0RGF0ZVN0cmluZyhjb21wYXJpc29uU3RhcnQpLFxuICAgIGVuZDogZm9ybWF0RGF0ZVN0cmluZyhjb21wYXJpc29uRW5kKSxcbiAgfTtcbn1cblxuLyoqXG4gKiBGb3JtYXQgZGF0ZSByYW5nZSB0byBkaXNwbGF5IHRleHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGVSYW5nZURpc3BsYXkoc3RhcnREYXRlOiBzdHJpbmcsIGVuZERhdGU6IHN0cmluZywgcHJlc2V0OiBEYXRlUHJlc2V0KTogc3RyaW5nIHtcbiAgY29uc3QgcHJlc2V0TGFiZWxzOiBSZWNvcmQ8RGF0ZVByZXNldCwgc3RyaW5nPiA9IHtcbiAgICB0b2RheTogJ0hvamUnLFxuICAgIHllc3RlcmRheTogJ09udGVtJyxcbiAgICB0aGlzX3dlZWs6ICdFc3RhIFNlbWFuYScsXG4gICAgbGFzdF93ZWVrOiAnU2VtYW5hIFBhc3NhZGEnLFxuICAgIHRoaXNfbW9udGg6ICdFc3RlIE3DqnMnLFxuICAgIGxhc3RfbW9udGg6ICdNw6pzIFBhc3NhZG8nLFxuICAgIGN1c3RvbTogJ1BlcsOtb2RvIEN1c3RvbWl6YWRvJyxcbiAgfTtcblxuICBpZiAocHJlc2V0ICE9PSAnY3VzdG9tJykge1xuICAgIHJldHVybiBwcmVzZXRMYWJlbHNbcHJlc2V0XTtcbiAgfVxuXG4gIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoc3RhcnREYXRlKTtcbiAgY29uc3QgZW5kID0gbmV3IERhdGUoZW5kRGF0ZSk7XG5cbiAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ3B0LUJSJywge1xuICAgIGRheTogJzItZGlnaXQnLFxuICAgIG1vbnRoOiAnc2hvcnQnLFxuICB9KTtcblxuICByZXR1cm4gYCR7Zm9ybWF0dGVyLmZvcm1hdChzdGFydCl9IC0gJHtmb3JtYXR0ZXIuZm9ybWF0KGVuZCl9YDtcbn1cblxuLyoqXG4gKiBHZXQgY3VycmVudCBtb250aCBhbmQgcHJldmlvdXMgbW9udGggcmFuZ2VzIGZvciBjaGFydCBjb21wYXJpc29uXG4gKiBBbHdheXMgcmV0dXJucyB0aGVzZSB0d28gbW9udGhzIHJlZ2FyZGxlc3Mgb2YgYW55IGZpbHRlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudEFuZFByZXZpb3VzTW9udGhSYW5nZXMoKToge1xuICBjdXJyZW50TW9udGg6IHsgc3RhcnREYXRlOiBzdHJpbmc7IGVuZERhdGU6IHN0cmluZyB9O1xuICBwcmV2aW91c01vbnRoOiB7IHN0YXJ0RGF0ZTogc3RyaW5nOyBlbmREYXRlOiBzdHJpbmcgfTtcbn0ge1xuICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG5cbiAgLy8gQ3VycmVudCBtb250aDogZnVsbCBtb250aCAoMXN0IHRvIGxhc3QgZGF5KSAtIGZvciBmYWlyIGNvbXBhcmlzb24gd2l0aCBwcmV2aW91cyBtb250aFxuICBjb25zdCBjdXJyZW50TW9udGggPSB7XG4gICAgc3RhcnREYXRlOiBmb3JtYXREYXRlU3RyaW5nKGdldFN0YXJ0T2ZNb250aCh0b2RheSkpLFxuICAgIGVuZERhdGU6IGZvcm1hdERhdGVTdHJpbmcoZ2V0RW5kT2ZNb250aCh0b2RheSkpLFxuICB9O1xuXG4gIC8vIFByZXZpb3VzIG1vbnRoOiAxc3QgZGF5IHVudGlsIGxhc3QgZGF5IG9mIHByZXZpb3VzIG1vbnRoXG4gIGNvbnN0IGxhc3RNb250aERhdGUgPSBuZXcgRGF0ZSh0b2RheSk7XG4gIGxhc3RNb250aERhdGUuc2V0TW9udGgobGFzdE1vbnRoRGF0ZS5nZXRNb250aCgpIC0gMSk7XG5cbiAgY29uc3QgcHJldmlvdXNNb250aCA9IHtcbiAgICBzdGFydERhdGU6IGZvcm1hdERhdGVTdHJpbmcoZ2V0U3RhcnRPZk1vbnRoKGxhc3RNb250aERhdGUpKSxcbiAgICBlbmREYXRlOiBmb3JtYXREYXRlU3RyaW5nKGdldEVuZE9mTW9udGgobGFzdE1vbnRoRGF0ZSkpLFxuICB9O1xuXG4gIHJldHVybiB7IGN1cnJlbnRNb250aCwgcHJldmlvdXNNb250aCB9O1xufVxuIl0sIm5hbWVzIjpbImZvcm1hdERhdGVTdHJpbmciLCJkYXRlIiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJTdHJpbmciLCJnZXRNb250aCIsInBhZFN0YXJ0IiwiZGF5IiwiZ2V0RGF0ZSIsImdldFN0YXJ0T2ZEYXkiLCJkIiwiRGF0ZSIsInNldEhvdXJzIiwiZ2V0RW5kT2ZEYXkiLCJnZXRTdGFydE9mV2VlayIsImdldERheSIsImRpZmYiLCJzZXREYXRlIiwiZ2V0RW5kT2ZXZWVrIiwiZ2V0U3RhcnRPZk1vbnRoIiwiZ2V0RW5kT2ZNb250aCIsInNldE1vbnRoIiwiZ2V0VG9kYXlSYW5nZSIsIm5vdyIsInV0Y09mZnNldCIsImdldFRpbWV6b25lT2Zmc2V0IiwiYnJhc2lsaWFPZmZzZXQiLCJicmFzaWxpYVRpbWUiLCJnZXRUaW1lIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInByZXNldCIsImdldFllc3RlcmRheVJhbmdlIiwieWVzdGVyZGF5IiwiZ2V0VGhpc1dlZWtSYW5nZSIsInRvZGF5IiwiZ2V0TGFzdFdlZWtSYW5nZSIsImxhc3RXZWVrIiwiZ2V0VGhpc01vbnRoUmFuZ2UiLCJnZXRMYXN0TW9udGhSYW5nZSIsImxhc3RNb250aCIsImdldERhdGVSYW5nZUJ5UHJlc2V0IiwiZ2V0Q29tcGFyaXNvblBlcmlvZCIsInN0YXJ0IiwiZW5kIiwiZHVyYXRpb24iLCJNYXRoIiwiY2VpbCIsImNvbXBhcmlzb25FbmQiLCJjb21wYXJpc29uU3RhcnQiLCJmb3JtYXREYXRlUmFuZ2VEaXNwbGF5IiwicHJlc2V0TGFiZWxzIiwidGhpc193ZWVrIiwibGFzdF93ZWVrIiwidGhpc19tb250aCIsImxhc3RfbW9udGgiLCJjdXN0b20iLCJmb3JtYXR0ZXIiLCJJbnRsIiwiRGF0ZVRpbWVGb3JtYXQiLCJmb3JtYXQiLCJnZXRDdXJyZW50QW5kUHJldmlvdXNNb250aFJhbmdlcyIsImN1cnJlbnRNb250aCIsImxhc3RNb250aERhdGUiLCJwcmV2aW91c01vbnRoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/dateUtils.ts\n");

/***/ }),

/***/ "(rsc)/./lib/logger.ts":
/*!***********************!*\
  !*** ./lib/logger.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Logger: () => (/* binding */ Logger),\n/* harmony export */   _internal: () => (/* binding */ _internal),\n/* harmony export */   affiliateLogger: () => (/* binding */ affiliateLogger),\n/* harmony export */   apiLogger: () => (/* binding */ apiLogger),\n/* harmony export */   cacheLogger: () => (/* binding */ cacheLogger),\n/* harmony export */   logger: () => (/* binding */ logger),\n/* harmony export */   metricsLogger: () => (/* binding */ metricsLogger),\n/* harmony export */   syncLogger: () => (/* binding */ syncLogger)\n/* harmony export */ });\n/**\n * Centralized Logging System\n *\n * Replaces direct console.log usage throughout the app.\n * Debug logs only show in development, while info/warn/error always show.\n */ const isDevelopment = \"development\" === 'development';\nconst isTest = \"development\" === 'test';\nclass Logger {\n    constructor(prefix = ''){\n        this.prefix = prefix;\n    }\n    /**\n   * Debug logs - only in development\n   * Use for detailed debugging information\n   */ debug(message, ...args) {\n        if (isDevelopment && !isTest) {\n            const formatted = this.formatMessage('debug', message);\n            console.log(formatted, ...args);\n        }\n    }\n    /**\n   * Info logs - always shown\n   * Use for important application events\n   */ info(message, ...args) {\n        if (!isTest) {\n            const formatted = this.formatMessage('info', message);\n            console.info(formatted, ...args);\n        }\n    }\n    /**\n   * Warning logs - always shown\n   * Use for recoverable errors or warnings\n   */ warn(message, ...args) {\n        if (!isTest) {\n            const formatted = this.formatMessage('warn', message);\n            console.warn(formatted, ...args);\n        }\n    }\n    /**\n   * Error logs - always shown\n   * Use for errors and exceptions\n   */ error(message, error, metadata) {\n        if (!isTest) {\n            const formatted = this.formatMessage('error', message);\n            if (error instanceof Error) {\n                console.error(formatted, {\n                    message: error.message,\n                    stack: error.stack,\n                    ...metadata\n                });\n            } else if (error) {\n                console.error(formatted, error, metadata);\n            } else {\n                console.error(formatted, metadata);\n            }\n        }\n    }\n    /**\n   * Create a child logger with a specific prefix\n   */ child(childPrefix) {\n        const newPrefix = this.prefix ? `${this.prefix}:${childPrefix}` : childPrefix;\n        return new Logger(newPrefix);\n    }\n    formatMessage(level, message) {\n        const timestamp = new Date().toISOString();\n        const prefix = this.prefix ? `[${this.prefix}]` : '';\n        // Add emoji for better visual scanning\n        const emoji = {\n            debug: '🔍',\n            info: 'ℹ️',\n            warn: '⚠️',\n            error: '❌'\n        }[level];\n        return `${emoji} ${timestamp} ${prefix} ${message}`;\n    }\n}\n// Export singleton instances for common use cases\nconst logger = new Logger();\n// Specialized loggers for different modules\nconst apiLogger = logger.child('API');\nconst cacheLogger = logger.child('CACHE');\nconst syncLogger = logger.child('SYNC');\nconst metricsLogger = logger.child('METRICS');\nconst affiliateLogger = logger.child('AFFILIATE');\n// Export Logger class for custom instances\n\n// Export for testing purposes\nconst _internal = {\n    isDevelopment,\n    isTest\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUEyQztBQUN6QjtBQUVsQiw4QkFBOEI7QUFDdkIsTUFBTWMsWUFBWTtJQUN2QmhDO0lBQ0FFO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2ZlbGlwZXZkYzEvRG9jdW1lbnRzL3Byb2pldG9zIGNsYXVkZSBjb2RlL2Rhc2hib2FyZCBlc2NhbGEgaW5kZXBlbmRlbnRlL2Rhc2hib2FyZC9saWIvbG9nZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ2VudHJhbGl6ZWQgTG9nZ2luZyBTeXN0ZW1cbiAqXG4gKiBSZXBsYWNlcyBkaXJlY3QgY29uc29sZS5sb2cgdXNhZ2UgdGhyb3VnaG91dCB0aGUgYXBwLlxuICogRGVidWcgbG9ncyBvbmx5IHNob3cgaW4gZGV2ZWxvcG1lbnQsIHdoaWxlIGluZm8vd2Fybi9lcnJvciBhbHdheXMgc2hvdy5cbiAqL1xuXG5jb25zdCBpc0RldmVsb3BtZW50ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCc7XG5jb25zdCBpc1Rlc3QgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnO1xuXG50eXBlIExvZ0xldmVsID0gJ2RlYnVnJyB8ICdpbmZvJyB8ICd3YXJuJyB8ICdlcnJvcic7XG5cbmludGVyZmFjZSBMb2dNZXRhZGF0YSB7XG4gIFtrZXk6IHN0cmluZ106IGFueTtcbn1cblxuY2xhc3MgTG9nZ2VyIHtcbiAgcHJpdmF0ZSBwcmVmaXg6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihwcmVmaXg6IHN0cmluZyA9ICcnKSB7XG4gICAgdGhpcy5wcmVmaXggPSBwcmVmaXg7XG4gIH1cblxuICAvKipcbiAgICogRGVidWcgbG9ncyAtIG9ubHkgaW4gZGV2ZWxvcG1lbnRcbiAgICogVXNlIGZvciBkZXRhaWxlZCBkZWJ1Z2dpbmcgaW5mb3JtYXRpb25cbiAgICovXG4gIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAoaXNEZXZlbG9wbWVudCAmJiAhaXNUZXN0KSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2RlYnVnJywgbWVzc2FnZSk7XG4gICAgICBjb25zb2xlLmxvZyhmb3JtYXR0ZWQsIC4uLmFyZ3MpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbmZvIGxvZ3MgLSBhbHdheXMgc2hvd25cbiAgICogVXNlIGZvciBpbXBvcnRhbnQgYXBwbGljYXRpb24gZXZlbnRzXG4gICAqL1xuICBpbmZvKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAoIWlzVGVzdCkge1xuICAgICAgY29uc3QgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdpbmZvJywgbWVzc2FnZSk7XG4gICAgICBjb25zb2xlLmluZm8oZm9ybWF0dGVkLCAuLi5hcmdzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2FybmluZyBsb2dzIC0gYWx3YXlzIHNob3duXG4gICAqIFVzZSBmb3IgcmVjb3ZlcmFibGUgZXJyb3JzIG9yIHdhcm5pbmdzXG4gICAqL1xuICB3YXJuKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAoIWlzVGVzdCkge1xuICAgICAgY29uc3QgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRNZXNzYWdlKCd3YXJuJywgbWVzc2FnZSk7XG4gICAgICBjb25zb2xlLndhcm4oZm9ybWF0dGVkLCAuLi5hcmdzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXJyb3IgbG9ncyAtIGFsd2F5cyBzaG93blxuICAgKiBVc2UgZm9yIGVycm9ycyBhbmQgZXhjZXB0aW9uc1xuICAgKi9cbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IEVycm9yIHwgYW55LCBtZXRhZGF0YT86IExvZ01ldGFkYXRhKTogdm9pZCB7XG4gICAgaWYgKCFpc1Rlc3QpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnZXJyb3InLCBtZXNzYWdlKTtcblxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihmb3JtYXR0ZWQsIHtcbiAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgIHN0YWNrOiBlcnJvci5zdGFjayxcbiAgICAgICAgICAuLi5tZXRhZGF0YSxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZm9ybWF0dGVkLCBlcnJvciwgbWV0YWRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihmb3JtYXR0ZWQsIG1ldGFkYXRhKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgY2hpbGQgbG9nZ2VyIHdpdGggYSBzcGVjaWZpYyBwcmVmaXhcbiAgICovXG4gIGNoaWxkKGNoaWxkUHJlZml4OiBzdHJpbmcpOiBMb2dnZXIge1xuICAgIGNvbnN0IG5ld1ByZWZpeCA9IHRoaXMucHJlZml4ID8gYCR7dGhpcy5wcmVmaXh9OiR7Y2hpbGRQcmVmaXh9YCA6IGNoaWxkUHJlZml4O1xuICAgIHJldHVybiBuZXcgTG9nZ2VyKG5ld1ByZWZpeCk7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdE1lc3NhZ2UobGV2ZWw6IExvZ0xldmVsLCBtZXNzYWdlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICBjb25zdCBwcmVmaXggPSB0aGlzLnByZWZpeCA/IGBbJHt0aGlzLnByZWZpeH1dYCA6ICcnO1xuXG4gICAgLy8gQWRkIGVtb2ppIGZvciBiZXR0ZXIgdmlzdWFsIHNjYW5uaW5nXG4gICAgY29uc3QgZW1vamkgPSB7XG4gICAgICBkZWJ1ZzogJ/CflI0nLFxuICAgICAgaW5mbzogJ+KEue+4jycsXG4gICAgICB3YXJuOiAn4pqg77iPJyxcbiAgICAgIGVycm9yOiAn4p2MJyxcbiAgICB9W2xldmVsXTtcblxuICAgIHJldHVybiBgJHtlbW9qaX0gJHt0aW1lc3RhbXB9ICR7cHJlZml4fSAke21lc3NhZ2V9YDtcbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlcyBmb3IgY29tbW9uIHVzZSBjYXNlc1xuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoKTtcblxuLy8gU3BlY2lhbGl6ZWQgbG9nZ2VycyBmb3IgZGlmZmVyZW50IG1vZHVsZXNcbmV4cG9ydCBjb25zdCBhcGlMb2dnZXIgPSBsb2dnZXIuY2hpbGQoJ0FQSScpO1xuZXhwb3J0IGNvbnN0IGNhY2hlTG9nZ2VyID0gbG9nZ2VyLmNoaWxkKCdDQUNIRScpO1xuZXhwb3J0IGNvbnN0IHN5bmNMb2dnZXIgPSBsb2dnZXIuY2hpbGQoJ1NZTkMnKTtcbmV4cG9ydCBjb25zdCBtZXRyaWNzTG9nZ2VyID0gbG9nZ2VyLmNoaWxkKCdNRVRSSUNTJyk7XG5leHBvcnQgY29uc3QgYWZmaWxpYXRlTG9nZ2VyID0gbG9nZ2VyLmNoaWxkKCdBRkZJTElBVEUnKTtcblxuLy8gRXhwb3J0IExvZ2dlciBjbGFzcyBmb3IgY3VzdG9tIGluc3RhbmNlc1xuZXhwb3J0IHsgTG9nZ2VyIH07XG5cbi8vIEV4cG9ydCBmb3IgdGVzdGluZyBwdXJwb3Nlc1xuZXhwb3J0IGNvbnN0IF9pbnRlcm5hbCA9IHtcbiAgaXNEZXZlbG9wbWVudCxcbiAgaXNUZXN0LFxufTtcbiJdLCJuYW1lcyI6WyJpc0RldmVsb3BtZW50IiwicHJvY2VzcyIsImlzVGVzdCIsIkxvZ2dlciIsInByZWZpeCIsImRlYnVnIiwibWVzc2FnZSIsImFyZ3MiLCJmb3JtYXR0ZWQiLCJmb3JtYXRNZXNzYWdlIiwiY29uc29sZSIsImxvZyIsImluZm8iLCJ3YXJuIiwiZXJyb3IiLCJtZXRhZGF0YSIsIkVycm9yIiwic3RhY2siLCJjaGlsZCIsImNoaWxkUHJlZml4IiwibmV3UHJlZml4IiwibGV2ZWwiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlbW9qaSIsImxvZ2dlciIsImFwaUxvZ2dlciIsImNhY2hlTG9nZ2VyIiwic3luY0xvZ2dlciIsIm1ldHJpY3NMb2dnZXIiLCJhZmZpbGlhdGVMb2dnZXIiLCJfaW50ZXJuYWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/logger.ts\n");

/***/ }),

/***/ "(rsc)/./lib/shared/utils.ts":
/*!*****************************!*\
  !*** ./lib/shared/utils.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateDailyTrend: () => (/* binding */ calculateDailyTrend),\n/* harmony export */   calculateMonthlyComparison: () => (/* binding */ calculateMonthlyComparison),\n/* harmony export */   calculatePercentageChange: () => (/* binding */ calculatePercentageChange),\n/* harmony export */   calculateRevenue: () => (/* binding */ calculateRevenue),\n/* harmony export */   extractLocalDate: () => (/* binding */ extractLocalDate),\n/* harmony export */   formatCurrency: () => (/* binding */ formatCurrency),\n/* harmony export */   formatCurrencyBRL: () => (/* binding */ formatCurrencyBRL),\n/* harmony export */   formatNumber: () => (/* binding */ formatNumber),\n/* harmony export */   getRecentActivities: () => (/* binding */ getRecentActivities),\n/* harmony export */   getRefundsAndChargebacks: () => (/* binding */ getRefundsAndChargebacks),\n/* harmony export */   getRelativeTime: () => (/* binding */ getRelativeTime),\n/* harmony export */   getTopAffiliates: () => (/* binding */ getTopAffiliates),\n/* harmony export */   getTopProducts: () => (/* binding */ getTopProducts),\n/* harmony export */   isOrderPaid: () => (/* binding */ isOrderPaid),\n/* harmony export */   parsePrice: () => (/* binding */ parsePrice)\n/* harmony export */ });\n/**\n * Shared utility functions used across CartPanda and Supabase modules\n * Extracted to eliminate code duplication\n */ /**\n * Parse CartPanda price string to number\n * Converts \"1,707.31\" to 1707.31\n */ function parsePrice(price) {\n    if (typeof price === 'number') return price;\n    return parseFloat(price.replace(/,/g, ''));\n}\n/**\n * Extract local date from ISO datetime string with timezone\n * Extracts \"2025-11-09\" from \"2025-11-09T23:28:16-03:00\"\n * This preserves the local date without converting to UTC\n */ function extractLocalDate(dateString) {\n    return dateString.split('T')[0];\n}\n/**\n * Calculate percentage change between two values\n */ function calculatePercentageChange(oldValue, newValue) {\n    if (oldValue === 0) return newValue > 0 ? 100 : 0;\n    return (newValue - oldValue) / oldValue * 100;\n}\n/**\n * Check if order is paid\n * Accepts either an order object or individual status parameters\n */ function isOrderPaid(orderOrFinancialStatus, payment_status) {\n    // If called with two parameters (financial_status, payment_status)\n    if (typeof orderOrFinancialStatus === 'number' && payment_status !== undefined) {\n        return orderOrFinancialStatus === 3 || payment_status === 3;\n    }\n    // If called with order object\n    const order = orderOrFinancialStatus;\n    return order.financial_status === 3 || order.payment_status === 3;\n}\n/**\n * Calculate net revenue from orders in BRL (after refunds and chargebacks)\n * Accepts either CartPandaOrder[] or any[] for flexibility\n */ function calculateRevenue(orders) {\n    return orders.reduce((sum, order)=>{\n        // Skip refunded orders (check refunds array)\n        if (order.refunds && order.refunds.length > 0) {\n            return sum;\n        }\n        // Skip chargeback orders (check chargeback_received flag)\n        if (order.chargeback_received === 1) {\n            return sum;\n        }\n        // Only count paid orders - handle both calling patterns\n        const isPaid = order.financial_status !== undefined ? isOrderPaid(order) : isOrderPaid(order.financial_status, order.payment_status);\n        if (isPaid) {\n            return sum + parsePrice(order.total_price);\n        }\n        return sum;\n    }, 0);\n}\n/**\n * Calculate daily trend for sparklines\n */ function calculateDailyTrend(orders, type) {\n    const last7Days = Array.from({\n        length: 7\n    }, (_, i)=>{\n        const date = new Date();\n        date.setDate(date.getDate() - (6 - i));\n        date.setHours(0, 0, 0, 0);\n        return date;\n    });\n    const dailyData = last7Days.map((date)=>{\n        const nextDay = new Date(date);\n        nextDay.setDate(nextDay.getDate() + 1);\n        const dayOrders = orders.filter((order)=>{\n            const orderDate = new Date(order.created_at);\n            return orderDate >= date && orderDate < nextDay;\n        });\n        if (type === 'revenue') {\n            return calculateRevenue(dayOrders);\n        } else if (type === 'count') {\n            return dayOrders.length;\n        } else {\n            // average\n            const revenue = calculateRevenue(dayOrders);\n            return revenue / (dayOrders.length || 1);\n        }\n    });\n    return dailyData;\n}\n/**\n * Get top performing products\n */ function getTopProducts(orders) {\n    const productMap = new Map();\n    orders.forEach((order)=>{\n        if (isOrderPaid(order)) {\n            order.line_items?.forEach((item)=>{\n                const productId = item.product_id.toString();\n                const existing = productMap.get(productId) || {\n                    name: item.title || item.name,\n                    sales: 0,\n                    revenue: 0\n                };\n                productMap.set(productId, {\n                    name: item.title || item.name,\n                    sales: existing.sales + item.quantity,\n                    revenue: existing.revenue + parsePrice(item.total_price)\n                });\n            });\n        }\n    });\n    return Array.from(productMap.entries()).map(([id, data])=>({\n            id,\n            name: data.name,\n            sales: data.sales,\n            revenue: data.revenue,\n            change: 0\n        })).sort((a, b)=>b.revenue - a.revenue).slice(0, 5);\n}\n/**\n * Get top performing affiliates\n */ function getTopAffiliates(orders) {\n    const affiliateMap = new Map();\n    orders.forEach((order)=>{\n        if (isOrderPaid(order) && order.affiliate_name && order.affiliate_email) {\n            const affiliateId = order.affiliate_slug || order.affiliate_email;\n            const existing = affiliateMap.get(affiliateId) || {\n                name: order.affiliate_name,\n                email: order.affiliate_email,\n                sales: 0,\n                revenue: 0,\n                commission: 0\n            };\n            const orderRevenue = parsePrice(order.total_price);\n            const orderCommission = parsePrice(order.affiliate_amount || '0');\n            affiliateMap.set(affiliateId, {\n                ...existing,\n                sales: existing.sales + 1,\n                revenue: existing.revenue + orderRevenue,\n                commission: existing.commission + orderCommission\n            });\n        }\n    });\n    return Array.from(affiliateMap.entries()).map(([id, data])=>({\n            id,\n            name: data.name,\n            email: data.email,\n            sales: data.sales,\n            revenue: data.revenue,\n            commission: data.commission\n        })).sort((a, b)=>b.revenue - a.revenue).slice(0, 5);\n}\n/**\n * Get refunds and chargebacks statistics\n */ function getRefundsAndChargebacks(orders) {\n    const totalRevenue = calculateRevenue(orders);\n    const refunds = orders.reduce((acc, order)=>{\n        // Check if order has refunds array with items\n        if (order.refunds && order.refunds.length > 0) {\n            const refundAmount = parsePrice(order.total_price);\n            return {\n                count: acc.count + 1,\n                total: acc.total + refundAmount\n            };\n        }\n        return acc;\n    }, {\n        count: 0,\n        total: 0\n    });\n    const chargebacks = orders.reduce((acc, order)=>{\n        // Check if order has chargeback (chargeback_received = 1)\n        if (order.chargeback_received === 1) {\n            const chargebackAmount = parsePrice(order.total_price);\n            return {\n                count: acc.count + 1,\n                total: acc.total + chargebackAmount\n            };\n        }\n        return acc;\n    }, {\n        count: 0,\n        total: 0\n    });\n    return {\n        refunds: {\n            ...refunds,\n            percentage: totalRevenue > 0 ? refunds.total / totalRevenue * 100 : 0\n        },\n        chargebacks: {\n            ...chargebacks,\n            percentage: totalRevenue > 0 ? chargebacks.total / totalRevenue * 100 : 0\n        }\n    };\n}\n/**\n * Calculate monthly comparison data for chart\n * Returns day-by-day comparison between current and previous month\n */ function calculateMonthlyComparison(allOrders, currentMonthRange, previousMonthRange) {\n    // Filter orders for current month\n    const currentMonthOrders = allOrders.filter((order)=>{\n        const orderDate = extractLocalDate(order.created_at);\n        return orderDate >= currentMonthRange.startDate && orderDate <= currentMonthRange.endDate;\n    });\n    // Filter orders for previous month\n    const previousMonthOrders = allOrders.filter((order)=>{\n        const orderDate = extractLocalDate(order.created_at);\n        return orderDate >= previousMonthRange.startDate && orderDate <= previousMonthRange.endDate;\n    });\n    // Calculate days in current month (e.g., November = 30 days)\n    // Always show full month (1-30 or 1-31) regardless of current day\n    const currentMonthDate = new Date(currentMonthRange.startDate);\n    const year = currentMonthDate.getFullYear();\n    const month = currentMonthDate.getMonth();\n    const daysInMonth = new Date(year, month + 1, 0).getDate();\n    // Generate labels for all days in the month\n    const labels = [];\n    for(let day = 1; day <= daysInMonth; day++){\n        labels.push(day.toString());\n    }\n    // Initialize data arrays\n    const currentMonthRevenue = [];\n    const currentMonthOrdersCount = [];\n    const previousMonthRevenue = [];\n    const previousMonthOrdersCount = [];\n    // Calculate data for each day of the month\n    for(let day = 1; day <= daysInMonth; day++){\n        // Filter current month orders for this day\n        const currentDayOrders = currentMonthOrders.filter((order)=>{\n            const orderDate = new Date(extractLocalDate(order.created_at));\n            return orderDate.getDate() === day;\n        });\n        // Filter previous month orders for this day\n        const previousDayOrders = previousMonthOrders.filter((order)=>{\n            const orderDate = new Date(extractLocalDate(order.created_at));\n            return orderDate.getDate() === day;\n        });\n        // Calculate metrics for current month\n        const currentRevenue = calculateRevenue(currentDayOrders);\n        const currentCount = currentDayOrders.filter(isOrderPaid).length;\n        // Calculate metrics for previous month\n        const previousRevenue = calculateRevenue(previousDayOrders);\n        const previousCount = previousDayOrders.filter(isOrderPaid).length;\n        // Add to arrays\n        currentMonthRevenue.push(currentRevenue);\n        currentMonthOrdersCount.push(currentCount);\n        previousMonthRevenue.push(previousRevenue);\n        previousMonthOrdersCount.push(previousCount);\n    }\n    return {\n        labels,\n        currentMonth: {\n            revenue: currentMonthRevenue,\n            orders: currentMonthOrdersCount\n        },\n        previousMonth: {\n            revenue: previousMonthRevenue,\n            orders: previousMonthOrdersCount\n        }\n    };\n}\n/**\n * Get recent activities for activity feed\n */ function getRecentActivities(orders) {\n    const activities = [];\n    // Sort orders by most recent\n    const sortedOrders = [\n        ...orders\n    ].sort((a, b)=>new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n    sortedOrders.slice(0, 10).forEach((order)=>{\n        const orderAmount = parsePrice(order.total_price);\n        const customerName = `${order.customer.first_name} ${order.customer.last_name}`;\n        // New order\n        if (isOrderPaid(order)) {\n            // Build description with customer name and optional affiliate indicator\n            const hasAffiliate = order.affiliate_name || order.affiliate_slug || order.afid;\n            const description = hasAffiliate ? `${customerName} • via ${order.affiliate_name || order.affiliate_slug || order.afid} (afiliado)` : `${customerName}`;\n            activities.push({\n                id: `order-${order.id}`,\n                type: 'order',\n                title: `Novo pedido #${order.order_number} aprovado`,\n                description,\n                amount: orderAmount,\n                timestamp: order.created_at\n            });\n        }\n        // Refund\n        if (order.refunds && order.refunds.length > 0) {\n            activities.push({\n                id: `refund-${order.id}`,\n                type: 'refund',\n                title: `Reembolso solicitado #${order.order_number}`,\n                description: `Cliente: ${customerName} - R$ ${orderAmount.toFixed(2)}`,\n                amount: orderAmount,\n                timestamp: order.updated_at\n            });\n        }\n        // Chargeback\n        if (order.chargeback_received === 1) {\n            activities.push({\n                id: `chargeback-${order.id}`,\n                type: 'chargeback',\n                title: `Chargeback recebido #${order.order_number}`,\n                description: `Valor: R$ ${orderAmount.toFixed(2)} - em análise`,\n                amount: orderAmount,\n                timestamp: order.chargeback_at || order.updated_at\n            });\n        }\n    });\n    return activities.sort((a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()).slice(0, 4);\n}\n/**\n * Format currency to BRL\n */ function formatCurrency(value) {\n    return new Intl.NumberFormat('pt-BR', {\n        style: 'currency',\n        currency: 'BRL'\n    }).format(value);\n}\n/**\n * @deprecated Use formatCurrency instead (now formats as BRL)\n * Format currency to BRL\n */ function formatCurrencyBRL(value) {\n    return new Intl.NumberFormat('pt-BR', {\n        style: 'currency',\n        currency: 'BRL'\n    }).format(value);\n}\n/**\n * Format number with K/M suffix\n */ function formatNumber(value) {\n    if (value >= 1000000) {\n        return `${(value / 1000000).toFixed(1)}M`;\n    }\n    if (value >= 1000) {\n        return `${(value / 1000).toFixed(1)}k`;\n    }\n    return value.toFixed(0);\n}\n/**\n * Get relative time string\n */ function getRelativeTime(date) {\n    const now = new Date();\n    const past = new Date(date);\n    const diffInMinutes = Math.floor((now.getTime() - past.getTime()) / (1000 * 60));\n    if (diffInMinutes < 1) return 'agora mesmo';\n    if (diffInMinutes < 60) return `${diffInMinutes} min atrás`;\n    const diffInHours = Math.floor(diffInMinutes / 60);\n    if (diffInHours < 24) return `${diffInHours} hora${diffInHours > 1 ? 's' : ''} atrás`;\n    const diffInDays = Math.floor(diffInHours / 24);\n    return `${diffInDays} dia${diffInDays > 1 ? 's' : ''} atrás`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTyxLQUFLMEIsS0FBSzFCLE9BQU8sRUFBQyxJQUFNLFFBQU8sRUFBQztJQUU3RSxJQUFJMkIsZ0JBQWdCLEdBQUcsT0FBTztJQUM5QixJQUFJQSxnQkFBZ0IsSUFBSSxPQUFPLEdBQUdBLGNBQWMsVUFBVSxDQUFDO0lBRTNELE1BQU1HLGNBQWNGLEtBQUtDLEtBQUssQ0FBQ0YsZ0JBQWdCO0lBQy9DLElBQUlHLGNBQWMsSUFBSSxPQUFPLEdBQUdBLFlBQVksS0FBSyxFQUFFQSxjQUFjLElBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQztJQUVyRixNQUFNQyxhQUFhSCxLQUFLQyxLQUFLLENBQUNDLGNBQWM7SUFDNUMsT0FBTyxHQUFHQyxXQUFXLElBQUksRUFBRUEsYUFBYSxJQUFJLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDOUQiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mZWxpcGV2ZGMxL0RvY3VtZW50cy9wcm9qZXRvcyBjbGF1ZGUgY29kZS9kYXNoYm9hcmQgZXNjYWxhIGluZGVwZW5kZW50ZS9kYXNoYm9hcmQvbGliL3NoYXJlZC91dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNoYXJlZCB1dGlsaXR5IGZ1bmN0aW9ucyB1c2VkIGFjcm9zcyBDYXJ0UGFuZGEgYW5kIFN1cGFiYXNlIG1vZHVsZXNcbiAqIEV4dHJhY3RlZCB0byBlbGltaW5hdGUgY29kZSBkdXBsaWNhdGlvblxuICovXG5cbmltcG9ydCB0eXBlIHtcbiAgUHJvZHVjdFBlcmZvcm1hbmNlLFxuICBBZmZpbGlhdGVQZXJmb3JtYW5jZSxcbiAgUmVjZW50QWN0aXZpdHksXG4gIE1vbnRobHlDb21wYXJpc29uRGF0YSxcbn0gZnJvbSAnLi4vY2FydHBhbmRhL3R5cGVzJztcblxuLyoqXG4gKiBQYXJzZSBDYXJ0UGFuZGEgcHJpY2Ugc3RyaW5nIHRvIG51bWJlclxuICogQ29udmVydHMgXCIxLDcwNy4zMVwiIHRvIDE3MDcuMzFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJpY2UocHJpY2U6IHN0cmluZyB8IG51bWJlcik6IG51bWJlciB7XG4gIGlmICh0eXBlb2YgcHJpY2UgPT09ICdudW1iZXInKSByZXR1cm4gcHJpY2U7XG4gIHJldHVybiBwYXJzZUZsb2F0KHByaWNlLnJlcGxhY2UoLywvZywgJycpKTtcbn1cblxuLyoqXG4gKiBFeHRyYWN0IGxvY2FsIGRhdGUgZnJvbSBJU08gZGF0ZXRpbWUgc3RyaW5nIHdpdGggdGltZXpvbmVcbiAqIEV4dHJhY3RzIFwiMjAyNS0xMS0wOVwiIGZyb20gXCIyMDI1LTExLTA5VDIzOjI4OjE2LTAzOjAwXCJcbiAqIFRoaXMgcHJlc2VydmVzIHRoZSBsb2NhbCBkYXRlIHdpdGhvdXQgY29udmVydGluZyB0byBVVENcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RMb2NhbERhdGUoZGF0ZVN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGRhdGVTdHJpbmcuc3BsaXQoJ1QnKVswXTtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgcGVyY2VudGFnZSBjaGFuZ2UgYmV0d2VlbiB0d28gdmFsdWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVQZXJjZW50YWdlQ2hhbmdlKG9sZFZhbHVlOiBudW1iZXIsIG5ld1ZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xuICBpZiAob2xkVmFsdWUgPT09IDApIHJldHVybiBuZXdWYWx1ZSA+IDAgPyAxMDAgOiAwO1xuICByZXR1cm4gKChuZXdWYWx1ZSAtIG9sZFZhbHVlKSAvIG9sZFZhbHVlKSAqIDEwMDtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBvcmRlciBpcyBwYWlkXG4gKiBBY2NlcHRzIGVpdGhlciBhbiBvcmRlciBvYmplY3Qgb3IgaW5kaXZpZHVhbCBzdGF0dXMgcGFyYW1ldGVyc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNPcmRlclBhaWQoXG4gIG9yZGVyT3JGaW5hbmNpYWxTdGF0dXM6IGFueSB8IG51bWJlcixcbiAgcGF5bWVudF9zdGF0dXM/OiBudW1iZXJcbik6IGJvb2xlYW4ge1xuICAvLyBJZiBjYWxsZWQgd2l0aCB0d28gcGFyYW1ldGVycyAoZmluYW5jaWFsX3N0YXR1cywgcGF5bWVudF9zdGF0dXMpXG4gIGlmICh0eXBlb2Ygb3JkZXJPckZpbmFuY2lhbFN0YXR1cyA9PT0gJ251bWJlcicgJiYgcGF5bWVudF9zdGF0dXMgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBvcmRlck9yRmluYW5jaWFsU3RhdHVzID09PSAzIHx8IHBheW1lbnRfc3RhdHVzID09PSAzO1xuICB9XG4gIC8vIElmIGNhbGxlZCB3aXRoIG9yZGVyIG9iamVjdFxuICBjb25zdCBvcmRlciA9IG9yZGVyT3JGaW5hbmNpYWxTdGF0dXM7XG4gIHJldHVybiBvcmRlci5maW5hbmNpYWxfc3RhdHVzID09PSAzIHx8IG9yZGVyLnBheW1lbnRfc3RhdHVzID09PSAzO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSBuZXQgcmV2ZW51ZSBmcm9tIG9yZGVycyBpbiBCUkwgKGFmdGVyIHJlZnVuZHMgYW5kIGNoYXJnZWJhY2tzKVxuICogQWNjZXB0cyBlaXRoZXIgQ2FydFBhbmRhT3JkZXJbXSBvciBhbnlbXSBmb3IgZmxleGliaWxpdHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVJldmVudWUob3JkZXJzOiBhbnlbXSk6IG51bWJlciB7XG4gIHJldHVybiBvcmRlcnMucmVkdWNlKChzdW0sIG9yZGVyKSA9PiB7XG4gICAgLy8gU2tpcCByZWZ1bmRlZCBvcmRlcnMgKGNoZWNrIHJlZnVuZHMgYXJyYXkpXG4gICAgaWYgKG9yZGVyLnJlZnVuZHMgJiYgb3JkZXIucmVmdW5kcy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gc3VtO1xuICAgIH1cblxuICAgIC8vIFNraXAgY2hhcmdlYmFjayBvcmRlcnMgKGNoZWNrIGNoYXJnZWJhY2tfcmVjZWl2ZWQgZmxhZylcbiAgICBpZiAob3JkZXIuY2hhcmdlYmFja19yZWNlaXZlZCA9PT0gMSkge1xuICAgICAgcmV0dXJuIHN1bTtcbiAgICB9XG5cbiAgICAvLyBPbmx5IGNvdW50IHBhaWQgb3JkZXJzIC0gaGFuZGxlIGJvdGggY2FsbGluZyBwYXR0ZXJuc1xuICAgIGNvbnN0IGlzUGFpZCA9IG9yZGVyLmZpbmFuY2lhbF9zdGF0dXMgIT09IHVuZGVmaW5lZFxuICAgICAgPyBpc09yZGVyUGFpZChvcmRlcilcbiAgICAgIDogaXNPcmRlclBhaWQob3JkZXIuZmluYW5jaWFsX3N0YXR1cywgb3JkZXIucGF5bWVudF9zdGF0dXMpO1xuXG4gICAgaWYgKGlzUGFpZCkge1xuICAgICAgcmV0dXJuIHN1bSArIHBhcnNlUHJpY2Uob3JkZXIudG90YWxfcHJpY2UpO1xuICAgIH1cblxuICAgIHJldHVybiBzdW07XG4gIH0sIDApO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSBkYWlseSB0cmVuZCBmb3Igc3BhcmtsaW5lc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlRGFpbHlUcmVuZChcbiAgb3JkZXJzOiBhbnlbXSxcbiAgdHlwZTogJ3JldmVudWUnIHwgJ2NvdW50JyB8ICdhdmVyYWdlJ1xuKTogbnVtYmVyW10ge1xuICBjb25zdCBsYXN0N0RheXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiA3IH0sIChfLCBpKSA9PiB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gKDYgLSBpKSk7XG4gICAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICByZXR1cm4gZGF0ZTtcbiAgfSk7XG5cbiAgY29uc3QgZGFpbHlEYXRhID0gbGFzdDdEYXlzLm1hcCgoZGF0ZSkgPT4ge1xuICAgIGNvbnN0IG5leHREYXkgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICBuZXh0RGF5LnNldERhdGUobmV4dERheS5nZXREYXRlKCkgKyAxKTtcblxuICAgIGNvbnN0IGRheU9yZGVycyA9IG9yZGVycy5maWx0ZXIoKG9yZGVyKSA9PiB7XG4gICAgICBjb25zdCBvcmRlckRhdGUgPSBuZXcgRGF0ZShvcmRlci5jcmVhdGVkX2F0KTtcbiAgICAgIHJldHVybiBvcmRlckRhdGUgPj0gZGF0ZSAmJiBvcmRlckRhdGUgPCBuZXh0RGF5O1xuICAgIH0pO1xuXG4gICAgaWYgKHR5cGUgPT09ICdyZXZlbnVlJykge1xuICAgICAgcmV0dXJuIGNhbGN1bGF0ZVJldmVudWUoZGF5T3JkZXJzKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdjb3VudCcpIHtcbiAgICAgIHJldHVybiBkYXlPcmRlcnMubGVuZ3RoO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBhdmVyYWdlXG4gICAgICBjb25zdCByZXZlbnVlID0gY2FsY3VsYXRlUmV2ZW51ZShkYXlPcmRlcnMpO1xuICAgICAgcmV0dXJuIHJldmVudWUgLyAoZGF5T3JkZXJzLmxlbmd0aCB8fCAxKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBkYWlseURhdGE7XG59XG5cbi8qKlxuICogR2V0IHRvcCBwZXJmb3JtaW5nIHByb2R1Y3RzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3BQcm9kdWN0cyhvcmRlcnM6IGFueVtdKTogUHJvZHVjdFBlcmZvcm1hbmNlW10ge1xuICBjb25zdCBwcm9kdWN0TWFwID0gbmV3IE1hcDxzdHJpbmcsIHsgbmFtZTogc3RyaW5nOyBzYWxlczogbnVtYmVyOyByZXZlbnVlOiBudW1iZXIgfT4oKTtcblxuICBvcmRlcnMuZm9yRWFjaCgob3JkZXIpID0+IHtcbiAgICBpZiAoaXNPcmRlclBhaWQob3JkZXIpKSB7XG4gICAgICBvcmRlci5saW5lX2l0ZW1zPy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgcHJvZHVjdElkID0gaXRlbS5wcm9kdWN0X2lkLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcHJvZHVjdE1hcC5nZXQocHJvZHVjdElkKSB8fCB7XG4gICAgICAgICAgbmFtZTogaXRlbS50aXRsZSB8fCBpdGVtLm5hbWUsXG4gICAgICAgICAgc2FsZXM6IDAsXG4gICAgICAgICAgcmV2ZW51ZTogMCxcbiAgICAgICAgfTtcblxuICAgICAgICBwcm9kdWN0TWFwLnNldChwcm9kdWN0SWQsIHtcbiAgICAgICAgICBuYW1lOiBpdGVtLnRpdGxlIHx8IGl0ZW0ubmFtZSxcbiAgICAgICAgICBzYWxlczogZXhpc3Rpbmcuc2FsZXMgKyBpdGVtLnF1YW50aXR5LFxuICAgICAgICAgIHJldmVudWU6IGV4aXN0aW5nLnJldmVudWUgKyBwYXJzZVByaWNlKGl0ZW0udG90YWxfcHJpY2UpLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIEFycmF5LmZyb20ocHJvZHVjdE1hcC5lbnRyaWVzKCkpXG4gICAgLm1hcCgoW2lkLCBkYXRhXSkgPT4gKHtcbiAgICAgIGlkLFxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgc2FsZXM6IGRhdGEuc2FsZXMsXG4gICAgICByZXZlbnVlOiBkYXRhLnJldmVudWUsXG4gICAgICBjaGFuZ2U6IDAsIC8vIFdvdWxkIG5lZWQgaGlzdG9yaWNhbCBkYXRhXG4gICAgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGIucmV2ZW51ZSAtIGEucmV2ZW51ZSlcbiAgICAuc2xpY2UoMCwgNSk7XG59XG5cbi8qKlxuICogR2V0IHRvcCBwZXJmb3JtaW5nIGFmZmlsaWF0ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcEFmZmlsaWF0ZXMob3JkZXJzOiBhbnlbXSk6IEFmZmlsaWF0ZVBlcmZvcm1hbmNlW10ge1xuICBjb25zdCBhZmZpbGlhdGVNYXAgPSBuZXcgTWFwPFxuICAgIHN0cmluZyxcbiAgICB7IG5hbWU6IHN0cmluZzsgZW1haWw6IHN0cmluZzsgc2FsZXM6IG51bWJlcjsgcmV2ZW51ZTogbnVtYmVyOyBjb21taXNzaW9uOiBudW1iZXIgfVxuICA+KCk7XG5cbiAgb3JkZXJzLmZvckVhY2goKG9yZGVyKSA9PiB7XG4gICAgaWYgKGlzT3JkZXJQYWlkKG9yZGVyKSAmJiBvcmRlci5hZmZpbGlhdGVfbmFtZSAmJiBvcmRlci5hZmZpbGlhdGVfZW1haWwpIHtcbiAgICAgIGNvbnN0IGFmZmlsaWF0ZUlkID0gb3JkZXIuYWZmaWxpYXRlX3NsdWcgfHwgb3JkZXIuYWZmaWxpYXRlX2VtYWlsO1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhZmZpbGlhdGVNYXAuZ2V0KGFmZmlsaWF0ZUlkKSB8fCB7XG4gICAgICAgIG5hbWU6IG9yZGVyLmFmZmlsaWF0ZV9uYW1lLFxuICAgICAgICBlbWFpbDogb3JkZXIuYWZmaWxpYXRlX2VtYWlsLFxuICAgICAgICBzYWxlczogMCxcbiAgICAgICAgcmV2ZW51ZTogMCxcbiAgICAgICAgY29tbWlzc2lvbjogMCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG9yZGVyUmV2ZW51ZSA9IHBhcnNlUHJpY2Uob3JkZXIudG90YWxfcHJpY2UpO1xuICAgICAgY29uc3Qgb3JkZXJDb21taXNzaW9uID0gcGFyc2VQcmljZShvcmRlci5hZmZpbGlhdGVfYW1vdW50IHx8ICcwJyk7XG5cbiAgICAgIGFmZmlsaWF0ZU1hcC5zZXQoYWZmaWxpYXRlSWQsIHtcbiAgICAgICAgLi4uZXhpc3RpbmcsXG4gICAgICAgIHNhbGVzOiBleGlzdGluZy5zYWxlcyArIDEsXG4gICAgICAgIHJldmVudWU6IGV4aXN0aW5nLnJldmVudWUgKyBvcmRlclJldmVudWUsXG4gICAgICAgIGNvbW1pc3Npb246IGV4aXN0aW5nLmNvbW1pc3Npb24gKyBvcmRlckNvbW1pc3Npb24sXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBBcnJheS5mcm9tKGFmZmlsaWF0ZU1hcC5lbnRyaWVzKCkpXG4gICAgLm1hcCgoW2lkLCBkYXRhXSkgPT4gKHtcbiAgICAgIGlkLFxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgZW1haWw6IGRhdGEuZW1haWwsXG4gICAgICBzYWxlczogZGF0YS5zYWxlcyxcbiAgICAgIHJldmVudWU6IGRhdGEucmV2ZW51ZSxcbiAgICAgIGNvbW1pc3Npb246IGRhdGEuY29tbWlzc2lvbixcbiAgICB9KSlcbiAgICAuc29ydCgoYSwgYikgPT4gYi5yZXZlbnVlIC0gYS5yZXZlbnVlKVxuICAgIC5zbGljZSgwLCA1KTtcbn1cblxuLyoqXG4gKiBHZXQgcmVmdW5kcyBhbmQgY2hhcmdlYmFja3Mgc3RhdGlzdGljc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVmdW5kc0FuZENoYXJnZWJhY2tzKG9yZGVyczogYW55W10pIHtcbiAgY29uc3QgdG90YWxSZXZlbnVlID0gY2FsY3VsYXRlUmV2ZW51ZShvcmRlcnMpO1xuXG4gIGNvbnN0IHJlZnVuZHMgPSBvcmRlcnMucmVkdWNlKFxuICAgIChhY2MsIG9yZGVyKSA9PiB7XG4gICAgICAvLyBDaGVjayBpZiBvcmRlciBoYXMgcmVmdW5kcyBhcnJheSB3aXRoIGl0ZW1zXG4gICAgICBpZiAob3JkZXIucmVmdW5kcyAmJiBvcmRlci5yZWZ1bmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgcmVmdW5kQW1vdW50ID0gcGFyc2VQcmljZShvcmRlci50b3RhbF9wcmljZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY291bnQ6IGFjYy5jb3VudCArIDEsXG4gICAgICAgICAgdG90YWw6IGFjYy50b3RhbCArIHJlZnVuZEFtb3VudCxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSxcbiAgICB7IGNvdW50OiAwLCB0b3RhbDogMCB9XG4gICk7XG5cbiAgY29uc3QgY2hhcmdlYmFja3MgPSBvcmRlcnMucmVkdWNlKFxuICAgIChhY2MsIG9yZGVyKSA9PiB7XG4gICAgICAvLyBDaGVjayBpZiBvcmRlciBoYXMgY2hhcmdlYmFjayAoY2hhcmdlYmFja19yZWNlaXZlZCA9IDEpXG4gICAgICBpZiAob3JkZXIuY2hhcmdlYmFja19yZWNlaXZlZCA9PT0gMSkge1xuICAgICAgICBjb25zdCBjaGFyZ2ViYWNrQW1vdW50ID0gcGFyc2VQcmljZShvcmRlci50b3RhbF9wcmljZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY291bnQ6IGFjYy5jb3VudCArIDEsXG4gICAgICAgICAgdG90YWw6IGFjYy50b3RhbCArIGNoYXJnZWJhY2tBbW91bnQsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sXG4gICAgeyBjb3VudDogMCwgdG90YWw6IDAgfVxuICApO1xuXG4gIHJldHVybiB7XG4gICAgcmVmdW5kczoge1xuICAgICAgLi4ucmVmdW5kcyxcbiAgICAgIHBlcmNlbnRhZ2U6IHRvdGFsUmV2ZW51ZSA+IDAgPyAocmVmdW5kcy50b3RhbCAvIHRvdGFsUmV2ZW51ZSkgKiAxMDAgOiAwLFxuICAgIH0sXG4gICAgY2hhcmdlYmFja3M6IHtcbiAgICAgIC4uLmNoYXJnZWJhY2tzLFxuICAgICAgcGVyY2VudGFnZTogdG90YWxSZXZlbnVlID4gMCA/IChjaGFyZ2ViYWNrcy50b3RhbCAvIHRvdGFsUmV2ZW51ZSkgKiAxMDAgOiAwLFxuICAgIH0sXG4gIH07XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIG1vbnRobHkgY29tcGFyaXNvbiBkYXRhIGZvciBjaGFydFxuICogUmV0dXJucyBkYXktYnktZGF5IGNvbXBhcmlzb24gYmV0d2VlbiBjdXJyZW50IGFuZCBwcmV2aW91cyBtb250aFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlTW9udGhseUNvbXBhcmlzb24oXG4gIGFsbE9yZGVyczogYW55W10sXG4gIGN1cnJlbnRNb250aFJhbmdlOiB7IHN0YXJ0RGF0ZTogc3RyaW5nOyBlbmREYXRlOiBzdHJpbmcgfSxcbiAgcHJldmlvdXNNb250aFJhbmdlOiB7IHN0YXJ0RGF0ZTogc3RyaW5nOyBlbmREYXRlOiBzdHJpbmcgfVxuKTogTW9udGhseUNvbXBhcmlzb25EYXRhIHtcbiAgLy8gRmlsdGVyIG9yZGVycyBmb3IgY3VycmVudCBtb250aFxuICBjb25zdCBjdXJyZW50TW9udGhPcmRlcnMgPSBhbGxPcmRlcnMuZmlsdGVyKG9yZGVyID0+IHtcbiAgICBjb25zdCBvcmRlckRhdGUgPSBleHRyYWN0TG9jYWxEYXRlKG9yZGVyLmNyZWF0ZWRfYXQpO1xuICAgIHJldHVybiBvcmRlckRhdGUgPj0gY3VycmVudE1vbnRoUmFuZ2Uuc3RhcnREYXRlICYmIG9yZGVyRGF0ZSA8PSBjdXJyZW50TW9udGhSYW5nZS5lbmREYXRlO1xuICB9KTtcblxuICAvLyBGaWx0ZXIgb3JkZXJzIGZvciBwcmV2aW91cyBtb250aFxuICBjb25zdCBwcmV2aW91c01vbnRoT3JkZXJzID0gYWxsT3JkZXJzLmZpbHRlcihvcmRlciA9PiB7XG4gICAgY29uc3Qgb3JkZXJEYXRlID0gZXh0cmFjdExvY2FsRGF0ZShvcmRlci5jcmVhdGVkX2F0KTtcbiAgICByZXR1cm4gb3JkZXJEYXRlID49IHByZXZpb3VzTW9udGhSYW5nZS5zdGFydERhdGUgJiYgb3JkZXJEYXRlIDw9IHByZXZpb3VzTW9udGhSYW5nZS5lbmREYXRlO1xuICB9KTtcblxuICAvLyBDYWxjdWxhdGUgZGF5cyBpbiBjdXJyZW50IG1vbnRoIChlLmcuLCBOb3ZlbWJlciA9IDMwIGRheXMpXG4gIC8vIEFsd2F5cyBzaG93IGZ1bGwgbW9udGggKDEtMzAgb3IgMS0zMSkgcmVnYXJkbGVzcyBvZiBjdXJyZW50IGRheVxuICBjb25zdCBjdXJyZW50TW9udGhEYXRlID0gbmV3IERhdGUoY3VycmVudE1vbnRoUmFuZ2Uuc3RhcnREYXRlKTtcbiAgY29uc3QgeWVhciA9IGN1cnJlbnRNb250aERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgY29uc3QgbW9udGggPSBjdXJyZW50TW9udGhEYXRlLmdldE1vbnRoKCk7XG4gIGNvbnN0IGRheXNJbk1vbnRoID0gbmV3IERhdGUoeWVhciwgbW9udGggKyAxLCAwKS5nZXREYXRlKCk7XG5cbiAgLy8gR2VuZXJhdGUgbGFiZWxzIGZvciBhbGwgZGF5cyBpbiB0aGUgbW9udGhcbiAgY29uc3QgbGFiZWxzOiBzdHJpbmdbXSA9IFtdO1xuICBmb3IgKGxldCBkYXkgPSAxOyBkYXkgPD0gZGF5c0luTW9udGg7IGRheSsrKSB7XG4gICAgbGFiZWxzLnB1c2goZGF5LnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgLy8gSW5pdGlhbGl6ZSBkYXRhIGFycmF5c1xuICBjb25zdCBjdXJyZW50TW9udGhSZXZlbnVlOiBudW1iZXJbXSA9IFtdO1xuICBjb25zdCBjdXJyZW50TW9udGhPcmRlcnNDb3VudDogbnVtYmVyW10gPSBbXTtcbiAgY29uc3QgcHJldmlvdXNNb250aFJldmVudWU6IG51bWJlcltdID0gW107XG4gIGNvbnN0IHByZXZpb3VzTW9udGhPcmRlcnNDb3VudDogbnVtYmVyW10gPSBbXTtcblxuICAvLyBDYWxjdWxhdGUgZGF0YSBmb3IgZWFjaCBkYXkgb2YgdGhlIG1vbnRoXG4gIGZvciAobGV0IGRheSA9IDE7IGRheSA8PSBkYXlzSW5Nb250aDsgZGF5KyspIHtcbiAgICAvLyBGaWx0ZXIgY3VycmVudCBtb250aCBvcmRlcnMgZm9yIHRoaXMgZGF5XG4gICAgY29uc3QgY3VycmVudERheU9yZGVycyA9IGN1cnJlbnRNb250aE9yZGVycy5maWx0ZXIob3JkZXIgPT4ge1xuICAgICAgY29uc3Qgb3JkZXJEYXRlID0gbmV3IERhdGUoZXh0cmFjdExvY2FsRGF0ZShvcmRlci5jcmVhdGVkX2F0KSk7XG4gICAgICByZXR1cm4gb3JkZXJEYXRlLmdldERhdGUoKSA9PT0gZGF5O1xuICAgIH0pO1xuXG4gICAgLy8gRmlsdGVyIHByZXZpb3VzIG1vbnRoIG9yZGVycyBmb3IgdGhpcyBkYXlcbiAgICBjb25zdCBwcmV2aW91c0RheU9yZGVycyA9IHByZXZpb3VzTW9udGhPcmRlcnMuZmlsdGVyKG9yZGVyID0+IHtcbiAgICAgIGNvbnN0IG9yZGVyRGF0ZSA9IG5ldyBEYXRlKGV4dHJhY3RMb2NhbERhdGUob3JkZXIuY3JlYXRlZF9hdCkpO1xuICAgICAgcmV0dXJuIG9yZGVyRGF0ZS5nZXREYXRlKCkgPT09IGRheTtcbiAgICB9KTtcblxuICAgIC8vIENhbGN1bGF0ZSBtZXRyaWNzIGZvciBjdXJyZW50IG1vbnRoXG4gICAgY29uc3QgY3VycmVudFJldmVudWUgPSBjYWxjdWxhdGVSZXZlbnVlKGN1cnJlbnREYXlPcmRlcnMpO1xuICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IGN1cnJlbnREYXlPcmRlcnMuZmlsdGVyKGlzT3JkZXJQYWlkKS5sZW5ndGg7XG5cbiAgICAvLyBDYWxjdWxhdGUgbWV0cmljcyBmb3IgcHJldmlvdXMgbW9udGhcbiAgICBjb25zdCBwcmV2aW91c1JldmVudWUgPSBjYWxjdWxhdGVSZXZlbnVlKHByZXZpb3VzRGF5T3JkZXJzKTtcbiAgICBjb25zdCBwcmV2aW91c0NvdW50ID0gcHJldmlvdXNEYXlPcmRlcnMuZmlsdGVyKGlzT3JkZXJQYWlkKS5sZW5ndGg7XG5cbiAgICAvLyBBZGQgdG8gYXJyYXlzXG4gICAgY3VycmVudE1vbnRoUmV2ZW51ZS5wdXNoKGN1cnJlbnRSZXZlbnVlKTtcbiAgICBjdXJyZW50TW9udGhPcmRlcnNDb3VudC5wdXNoKGN1cnJlbnRDb3VudCk7XG4gICAgcHJldmlvdXNNb250aFJldmVudWUucHVzaChwcmV2aW91c1JldmVudWUpO1xuICAgIHByZXZpb3VzTW9udGhPcmRlcnNDb3VudC5wdXNoKHByZXZpb3VzQ291bnQpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBsYWJlbHMsXG4gICAgY3VycmVudE1vbnRoOiB7XG4gICAgICByZXZlbnVlOiBjdXJyZW50TW9udGhSZXZlbnVlLFxuICAgICAgb3JkZXJzOiBjdXJyZW50TW9udGhPcmRlcnNDb3VudCxcbiAgICB9LFxuICAgIHByZXZpb3VzTW9udGg6IHtcbiAgICAgIHJldmVudWU6IHByZXZpb3VzTW9udGhSZXZlbnVlLFxuICAgICAgb3JkZXJzOiBwcmV2aW91c01vbnRoT3JkZXJzQ291bnQsXG4gICAgfSxcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXQgcmVjZW50IGFjdGl2aXRpZXMgZm9yIGFjdGl2aXR5IGZlZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlY2VudEFjdGl2aXRpZXMob3JkZXJzOiBhbnlbXSk6IFJlY2VudEFjdGl2aXR5W10ge1xuICBjb25zdCBhY3Rpdml0aWVzOiBSZWNlbnRBY3Rpdml0eVtdID0gW107XG5cbiAgLy8gU29ydCBvcmRlcnMgYnkgbW9zdCByZWNlbnRcbiAgY29uc3Qgc29ydGVkT3JkZXJzID0gWy4uLm9yZGVyc10uc29ydChcbiAgICAoYSwgYikgPT4gbmV3IERhdGUoYi5jcmVhdGVkX2F0KS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmNyZWF0ZWRfYXQpLmdldFRpbWUoKVxuICApO1xuXG4gIHNvcnRlZE9yZGVycy5zbGljZSgwLCAxMCkuZm9yRWFjaCgob3JkZXIpID0+IHtcbiAgICBjb25zdCBvcmRlckFtb3VudCA9IHBhcnNlUHJpY2Uob3JkZXIudG90YWxfcHJpY2UpO1xuICAgIGNvbnN0IGN1c3RvbWVyTmFtZSA9IGAke29yZGVyLmN1c3RvbWVyLmZpcnN0X25hbWV9ICR7b3JkZXIuY3VzdG9tZXIubGFzdF9uYW1lfWA7XG5cbiAgICAvLyBOZXcgb3JkZXJcbiAgICBpZiAoaXNPcmRlclBhaWQob3JkZXIpKSB7XG4gICAgICAvLyBCdWlsZCBkZXNjcmlwdGlvbiB3aXRoIGN1c3RvbWVyIG5hbWUgYW5kIG9wdGlvbmFsIGFmZmlsaWF0ZSBpbmRpY2F0b3JcbiAgICAgIGNvbnN0IGhhc0FmZmlsaWF0ZSA9IG9yZGVyLmFmZmlsaWF0ZV9uYW1lIHx8IG9yZGVyLmFmZmlsaWF0ZV9zbHVnIHx8IG9yZGVyLmFmaWQ7XG4gICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGhhc0FmZmlsaWF0ZVxuICAgICAgICA/IGAke2N1c3RvbWVyTmFtZX0g4oCiIHZpYSAke29yZGVyLmFmZmlsaWF0ZV9uYW1lIHx8IG9yZGVyLmFmZmlsaWF0ZV9zbHVnIHx8IG9yZGVyLmFmaWR9IChhZmlsaWFkbylgXG4gICAgICAgIDogYCR7Y3VzdG9tZXJOYW1lfWA7XG5cbiAgICAgIGFjdGl2aXRpZXMucHVzaCh7XG4gICAgICAgIGlkOiBgb3JkZXItJHtvcmRlci5pZH1gLFxuICAgICAgICB0eXBlOiAnb3JkZXInLFxuICAgICAgICB0aXRsZTogYE5vdm8gcGVkaWRvICMke29yZGVyLm9yZGVyX251bWJlcn0gYXByb3ZhZG9gLFxuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgYW1vdW50OiBvcmRlckFtb3VudCxcbiAgICAgICAgdGltZXN0YW1wOiBvcmRlci5jcmVhdGVkX2F0LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmVmdW5kXG4gICAgaWYgKG9yZGVyLnJlZnVuZHMgJiYgb3JkZXIucmVmdW5kcy5sZW5ndGggPiAwKSB7XG4gICAgICBhY3Rpdml0aWVzLnB1c2goe1xuICAgICAgICBpZDogYHJlZnVuZC0ke29yZGVyLmlkfWAsXG4gICAgICAgIHR5cGU6ICdyZWZ1bmQnLFxuICAgICAgICB0aXRsZTogYFJlZW1ib2xzbyBzb2xpY2l0YWRvICMke29yZGVyLm9yZGVyX251bWJlcn1gLFxuICAgICAgICBkZXNjcmlwdGlvbjogYENsaWVudGU6ICR7Y3VzdG9tZXJOYW1lfSAtIFIkICR7b3JkZXJBbW91bnQudG9GaXhlZCgyKX1gLFxuICAgICAgICBhbW91bnQ6IG9yZGVyQW1vdW50LFxuICAgICAgICB0aW1lc3RhbXA6IG9yZGVyLnVwZGF0ZWRfYXQsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBDaGFyZ2ViYWNrXG4gICAgaWYgKG9yZGVyLmNoYXJnZWJhY2tfcmVjZWl2ZWQgPT09IDEpIHtcbiAgICAgIGFjdGl2aXRpZXMucHVzaCh7XG4gICAgICAgIGlkOiBgY2hhcmdlYmFjay0ke29yZGVyLmlkfWAsXG4gICAgICAgIHR5cGU6ICdjaGFyZ2ViYWNrJyxcbiAgICAgICAgdGl0bGU6IGBDaGFyZ2ViYWNrIHJlY2ViaWRvICMke29yZGVyLm9yZGVyX251bWJlcn1gLFxuICAgICAgICBkZXNjcmlwdGlvbjogYFZhbG9yOiBSJCAke29yZGVyQW1vdW50LnRvRml4ZWQoMil9IC0gZW0gYW7DoWxpc2VgLFxuICAgICAgICBhbW91bnQ6IG9yZGVyQW1vdW50LFxuICAgICAgICB0aW1lc3RhbXA6IG9yZGVyLmNoYXJnZWJhY2tfYXQgfHwgb3JkZXIudXBkYXRlZF9hdCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGFjdGl2aXRpZXMuc29ydChcbiAgICAoYSwgYikgPT4gbmV3IERhdGUoYi50aW1lc3RhbXApLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEudGltZXN0YW1wKS5nZXRUaW1lKClcbiAgKS5zbGljZSgwLCA0KTtcbn1cblxuLyoqXG4gKiBGb3JtYXQgY3VycmVuY3kgdG8gQlJMXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRDdXJyZW5jeSh2YWx1ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdCgncHQtQlInLCB7XG4gICAgc3R5bGU6ICdjdXJyZW5jeScsXG4gICAgY3VycmVuY3k6ICdCUkwnLFxuICB9KS5mb3JtYXQodmFsdWUpO1xufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBmb3JtYXRDdXJyZW5jeSBpbnN0ZWFkIChub3cgZm9ybWF0cyBhcyBCUkwpXG4gKiBGb3JtYXQgY3VycmVuY3kgdG8gQlJMXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRDdXJyZW5jeUJSTCh2YWx1ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdCgncHQtQlInLCB7XG4gICAgc3R5bGU6ICdjdXJyZW5jeScsXG4gICAgY3VycmVuY3k6ICdCUkwnLFxuICB9KS5mb3JtYXQodmFsdWUpO1xufVxuXG4vKipcbiAqIEZvcm1hdCBudW1iZXIgd2l0aCBLL00gc3VmZml4XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXROdW1iZXIodmFsdWU6IG51bWJlcik6IHN0cmluZyB7XG4gIGlmICh2YWx1ZSA+PSAxMDAwMDAwKSB7XG4gICAgcmV0dXJuIGAkeyh2YWx1ZSAvIDEwMDAwMDApLnRvRml4ZWQoMSl9TWA7XG4gIH1cbiAgaWYgKHZhbHVlID49IDEwMDApIHtcbiAgICByZXR1cm4gYCR7KHZhbHVlIC8gMTAwMCkudG9GaXhlZCgxKX1rYDtcbiAgfVxuICByZXR1cm4gdmFsdWUudG9GaXhlZCgwKTtcbn1cblxuLyoqXG4gKiBHZXQgcmVsYXRpdmUgdGltZSBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlbGF0aXZlVGltZShkYXRlOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCBwYXN0ID0gbmV3IERhdGUoZGF0ZSk7XG4gIGNvbnN0IGRpZmZJbk1pbnV0ZXMgPSBNYXRoLmZsb29yKChub3cuZ2V0VGltZSgpIC0gcGFzdC5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCkpO1xuXG4gIGlmIChkaWZmSW5NaW51dGVzIDwgMSkgcmV0dXJuICdhZ29yYSBtZXNtbyc7XG4gIGlmIChkaWZmSW5NaW51dGVzIDwgNjApIHJldHVybiBgJHtkaWZmSW5NaW51dGVzfSBtaW4gYXRyw6FzYDtcblxuICBjb25zdCBkaWZmSW5Ib3VycyA9IE1hdGguZmxvb3IoZGlmZkluTWludXRlcyAvIDYwKTtcbiAgaWYgKGRpZmZJbkhvdXJzIDwgMjQpIHJldHVybiBgJHtkaWZmSW5Ib3Vyc30gaG9yYSR7ZGlmZkluSG91cnMgPiAxID8gJ3MnIDogJyd9IGF0csOhc2A7XG5cbiAgY29uc3QgZGlmZkluRGF5cyA9IE1hdGguZmxvb3IoZGlmZkluSG91cnMgLyAyNCk7XG4gIHJldHVybiBgJHtkaWZmSW5EYXlzfSBkaWEke2RpZmZJbkRheXMgPiAxID8gJ3MnIDogJyd9IGF0csOhc2A7XG59XG4iXSwibmFtZXMiOlsicGFyc2VQcmljZSIsInByaWNlIiwicGFyc2VGbG9hdCIsInJlcGxhY2UiLCJleHRyYWN0TG9jYWxEYXRlIiwiZGF0ZVN0cmluZyIsInNwbGl0IiwiY2FsY3VsYXRlUGVyY2VudGFnZUNoYW5nZSIsIm9sZFZhbHVlIiwibmV3VmFsdWUiLCJpc09yZGVyUGFpZCIsIm9yZGVyT3JGaW5hbmNpYWxTdGF0dXMiLCJwYXltZW50X3N0YXR1cyIsInVuZGVmaW5lZCIsIm9yZGVyIiwiZmluYW5jaWFsX3N0YXR1cyIsImNhbGN1bGF0ZVJldmVudWUiLCJvcmRlcnMiLCJyZWR1Y2UiLCJzdW0iLCJyZWZ1bmRzIiwibGVuZ3RoIiwiY2hhcmdlYmFja19yZWNlaXZlZCIsImlzUGFpZCIsInRvdGFsX3ByaWNlIiwiY2FsY3VsYXRlRGFpbHlUcmVuZCIsInR5cGUiLCJsYXN0N0RheXMiLCJBcnJheSIsImZyb20iLCJfIiwiaSIsImRhdGUiLCJEYXRlIiwic2V0RGF0ZSIsImdldERhdGUiLCJzZXRIb3VycyIsImRhaWx5RGF0YSIsIm1hcCIsIm5leHREYXkiLCJkYXlPcmRlcnMiLCJmaWx0ZXIiLCJvcmRlckRhdGUiLCJjcmVhdGVkX2F0IiwicmV2ZW51ZSIsImdldFRvcFByb2R1Y3RzIiwicHJvZHVjdE1hcCIsIk1hcCIsImZvckVhY2giLCJsaW5lX2l0ZW1zIiwiaXRlbSIsInByb2R1Y3RJZCIsInByb2R1Y3RfaWQiLCJ0b1N0cmluZyIsImV4aXN0aW5nIiwiZ2V0IiwibmFtZSIsInRpdGxlIiwic2FsZXMiLCJzZXQiLCJxdWFudGl0eSIsImVudHJpZXMiLCJpZCIsImRhdGEiLCJjaGFuZ2UiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsImdldFRvcEFmZmlsaWF0ZXMiLCJhZmZpbGlhdGVNYXAiLCJhZmZpbGlhdGVfbmFtZSIsImFmZmlsaWF0ZV9lbWFpbCIsImFmZmlsaWF0ZUlkIiwiYWZmaWxpYXRlX3NsdWciLCJlbWFpbCIsImNvbW1pc3Npb24iLCJvcmRlclJldmVudWUiLCJvcmRlckNvbW1pc3Npb24iLCJhZmZpbGlhdGVfYW1vdW50IiwiZ2V0UmVmdW5kc0FuZENoYXJnZWJhY2tzIiwidG90YWxSZXZlbnVlIiwiYWNjIiwicmVmdW5kQW1vdW50IiwiY291bnQiLCJ0b3RhbCIsImNoYXJnZWJhY2tzIiwiY2hhcmdlYmFja0Ftb3VudCIsInBlcmNlbnRhZ2UiLCJjYWxjdWxhdGVNb250aGx5Q29tcGFyaXNvbiIsImFsbE9yZGVycyIsImN1cnJlbnRNb250aFJhbmdlIiwicHJldmlvdXNNb250aFJhbmdlIiwiY3VycmVudE1vbnRoT3JkZXJzIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInByZXZpb3VzTW9udGhPcmRlcnMiLCJjdXJyZW50TW9udGhEYXRlIiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJnZXRNb250aCIsImRheXNJbk1vbnRoIiwibGFiZWxzIiwiZGF5IiwicHVzaCIsImN1cnJlbnRNb250aFJldmVudWUiLCJjdXJyZW50TW9udGhPcmRlcnNDb3VudCIsInByZXZpb3VzTW9udGhSZXZlbnVlIiwicHJldmlvdXNNb250aE9yZGVyc0NvdW50IiwiY3VycmVudERheU9yZGVycyIsInByZXZpb3VzRGF5T3JkZXJzIiwiY3VycmVudFJldmVudWUiLCJjdXJyZW50Q291bnQiLCJwcmV2aW91c1JldmVudWUiLCJwcmV2aW91c0NvdW50IiwiY3VycmVudE1vbnRoIiwicHJldmlvdXNNb250aCIsImdldFJlY2VudEFjdGl2aXRpZXMiLCJhY3Rpdml0aWVzIiwic29ydGVkT3JkZXJzIiwiZ2V0VGltZSIsIm9yZGVyQW1vdW50IiwiY3VzdG9tZXJOYW1lIiwiY3VzdG9tZXIiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiaGFzQWZmaWxpYXRlIiwiYWZpZCIsImRlc2NyaXB0aW9uIiwib3JkZXJfbnVtYmVyIiwiYW1vdW50IiwidGltZXN0YW1wIiwidG9GaXhlZCIsInVwZGF0ZWRfYXQiLCJjaGFyZ2ViYWNrX2F0IiwiZm9ybWF0Q3VycmVuY3kiLCJ2YWx1ZSIsIkludGwiLCJOdW1iZXJGb3JtYXQiLCJzdHlsZSIsImN1cnJlbmN5IiwiZm9ybWF0IiwiZm9ybWF0Q3VycmVuY3lCUkwiLCJmb3JtYXROdW1iZXIiLCJnZXRSZWxhdGl2ZVRpbWUiLCJub3ciLCJwYXN0IiwiZGlmZkluTWludXRlcyIsIk1hdGgiLCJmbG9vciIsImRpZmZJbkhvdXJzIiwiZGlmZkluRGF5cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/shared/utils.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://swogockrnapyymcuorgs.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN3b2dvY2tybmFweXltY3VvcmdzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwNDc1NjAsImV4cCI6MjA2MjYyMzU2MH0._Fo8MF9WTLiCPu112YZLJzszH1rGE3mimX_AaLFHeHQ\";\nif (!supabaseUrl) {\n    throw new Error('NEXT_PUBLIC_SUPABASE_URL is not defined in environment variables');\n}\nif (!supabaseAnonKey) {\n    throw new Error('NEXT_PUBLIC_SUPABASE_ANON_KEY is not defined in environment variables');\n}\n// Create a single supabase client for interacting with your database\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUQ7QUFHckQsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO0FBRWpFLElBQUksQ0FBQ0QsYUFBYTtJQUNoQixNQUFNLElBQUlNLE1BQU07QUFDbEI7QUFFQSxJQUFJLENBQUNGLGlCQUFpQjtJQUNwQixNQUFNLElBQUlFLE1BQU07QUFDbEI7QUFFQSxxRUFBcUU7QUFDOUQsTUFBTUMsV0FBV1IsbUVBQVlBLENBQVdDLGFBQWFJLGlCQUFpQiIsInNvdXJjZXMiOlsiL1VzZXJzL2ZlbGlwZXZkYzEvRG9jdW1lbnRzL3Byb2pldG9zIGNsYXVkZSBjb2RlL2Rhc2hib2FyZCBlc2NhbGEgaW5kZXBlbmRlbnRlL2Rhc2hib2FyZC9saWIvc3VwYWJhc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcbmltcG9ydCB0eXBlIHsgRGF0YWJhc2UgfSBmcm9tICcuL3N1cGFiYXNlLnR5cGVzJztcblxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcblxuaWYgKCFzdXBhYmFzZVVybCkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ05FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCBpcyBub3QgZGVmaW5lZCBpbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKTtcbn1cblxuaWYgKCFzdXBhYmFzZUFub25LZXkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSBpcyBub3QgZGVmaW5lZCBpbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKTtcbn1cblxuLy8gQ3JlYXRlIGEgc2luZ2xlIHN1cGFiYXNlIGNsaWVudCBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB5b3VyIGRhdGFiYXNlXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQ8RGF0YWJhc2U+KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXkpO1xuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiRXJyb3IiLCJzdXBhYmFzZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase/queries.ts":
/*!*********************************!*\
  !*** ./lib/supabase/queries.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateDashboardMetrics: () => (/* binding */ calculateDashboardMetrics)\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../supabase */ \"(rsc)/./lib/supabase.ts\");\n/* harmony import */ var _dateUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dateUtils */ \"(rsc)/./lib/dateUtils.ts\");\n/* harmony import */ var _shared_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shared/utils */ \"(rsc)/./lib/shared/utils.ts\");\n/**\n * Supabase SQL queries for metrics calculation\n * These queries replace the CartPanda API pagination with direct SQL\n */ \n\n\n/**\n * Fetch orders from Supabase for a date range\n * Only returns PAID orders (financial_status = 3) to match CartPanda dashboard\n * Uses Brasilia timezone (UTC-3) for date filtering\n */ async function fetchOrdersByDateRange(startDate, endDate) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('orders').select('*').gte('created_at', `${startDate}T00:00:00-03:00`) // Brasilia timezone\n    .lte('created_at', `${endDate}T23:59:59-03:00`) // Brasilia timezone\n    .eq('financial_status', 3) // Only PAID orders\n    .order('created_at', {\n        ascending: false\n    });\n    if (error) {\n        console.error('Supabase query error:', error);\n        throw new Error(`Failed to fetch orders: ${error.message}`);\n    }\n    return data || [];\n}\n/**\n * Fetch all orders (for monthly comparison chart)\n */ async function fetchAllOrders() {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('orders').select('*').order('created_at', {\n        ascending: false\n    });\n    if (error) {\n        console.error('Supabase query error:', error);\n        throw new Error(`Failed to fetch all orders: ${error.message}`);\n    }\n    return data || [];\n}\n/**\n * Calculate all dashboard metrics from Supabase\n * This is the main function that replaces CartPanda API calls\n */ async function calculateDashboardMetrics(currentStartDate, currentEndDate, previousStartDate, previousEndDate) {\n    console.log('🔍 Fetching orders from Supabase...');\n    const startTime = Date.now();\n    // Fetch current period orders\n    const currentOrders = await fetchOrdersByDateRange(currentStartDate, currentEndDate);\n    console.log(`✅ Current period orders: ${currentOrders.length}`);\n    // Fetch previous period orders\n    const previousOrders = await fetchOrdersByDateRange(previousStartDate, previousEndDate);\n    console.log(`✅ Previous period orders: ${previousOrders.length}`);\n    // Fetch all orders for monthly comparison\n    const allOrders = await fetchAllOrders();\n    console.log(`✅ All orders: ${allOrders.length}`);\n    const queryDuration = Date.now() - startTime;\n    console.log(`⚡ Supabase queries completed in ${queryDuration}ms`);\n    // Calculate metrics\n    const currentRevenue = (0,_shared_utils__WEBPACK_IMPORTED_MODULE_2__.calculateRevenue)(currentOrders);\n    const previousRevenue = (0,_shared_utils__WEBPACK_IMPORTED_MODULE_2__.calculateRevenue)(previousOrders);\n    const revenueChange = (0,_shared_utils__WEBPACK_IMPORTED_MODULE_2__.calculatePercentageChange)(previousRevenue, currentRevenue);\n    const currentOrderCount = currentOrders.length;\n    const previousOrderCount = previousOrders.length;\n    const ordersChange = (0,_shared_utils__WEBPACK_IMPORTED_MODULE_2__.calculatePercentageChange)(previousOrderCount, currentOrderCount);\n    const currentAvgTicket = currentRevenue / (currentOrderCount || 1);\n    const previousAvgTicket = previousRevenue / (previousOrderCount || 1);\n    const avgTicketChange = (0,_shared_utils__WEBPACK_IMPORTED_MODULE_2__.calculatePercentageChange)(previousAvgTicket, currentAvgTicket);\n    const conversionRate = 3.8;\n    const conversionChange = -1.2;\n    const topProducts = (0,_shared_utils__WEBPACK_IMPORTED_MODULE_2__.getTopProducts)(currentOrders);\n    const topAffiliates = (0,_shared_utils__WEBPACK_IMPORTED_MODULE_2__.getTopAffiliates)(currentOrders);\n    const { refunds, chargebacks } = (0,_shared_utils__WEBPACK_IMPORTED_MODULE_2__.getRefundsAndChargebacks)(currentOrders);\n    const revenueTrend = (0,_shared_utils__WEBPACK_IMPORTED_MODULE_2__.calculateDailyTrend)(currentOrders, 'revenue');\n    const ordersTrend = (0,_shared_utils__WEBPACK_IMPORTED_MODULE_2__.calculateDailyTrend)(currentOrders, 'count');\n    const ticketTrend = (0,_shared_utils__WEBPACK_IMPORTED_MODULE_2__.calculateDailyTrend)(currentOrders, 'average');\n    // Monthly comparison\n    const monthRanges = (0,_dateUtils__WEBPACK_IMPORTED_MODULE_1__.getCurrentAndPreviousMonthRanges)();\n    const monthlyComparison = (0,_shared_utils__WEBPACK_IMPORTED_MODULE_2__.calculateMonthlyComparison)(allOrders, monthRanges.currentMonth, monthRanges.previousMonth);\n    // Recent activities\n    const activities = (0,_shared_utils__WEBPACK_IMPORTED_MODULE_2__.getRecentActivities)(currentOrders);\n    const metrics = {\n        revenue: {\n            total: currentRevenue,\n            change: revenueChange,\n            trend: revenueTrend\n        },\n        orders: {\n            total: currentOrderCount,\n            change: ordersChange,\n            trend: ordersTrend\n        },\n        averageTicket: {\n            value: currentAvgTicket,\n            change: avgTicketChange,\n            trend: ticketTrend\n        },\n        conversionRate: {\n            value: conversionRate,\n            change: conversionChange,\n            trend: [\n                4.2,\n                4.0,\n                3.9,\n                4.1,\n                3.8,\n                3.7,\n                3.8\n            ]\n        },\n        topProducts,\n        topAffiliates,\n        refunds,\n        chargebacks,\n        monthlyComparison\n    };\n    return {\n        metrics,\n        activities\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YzlDLDZEQUFjQSxDQUFDOEI7SUFDbkMsTUFBTWlCLGdCQUFnQjlDLCtEQUFnQkEsQ0FBQzZCO0lBQ3ZDLE1BQU0sRUFBRWtCLE9BQU8sRUFBRUMsV0FBVyxFQUFFLEdBQUcvQyx1RUFBd0JBLENBQUM0QjtJQUUxRCxNQUFNb0IsZUFBZW5ELGtFQUFtQkEsQ0FBQytCLGVBQWU7SUFDeEQsTUFBTXFCLGNBQWNwRCxrRUFBbUJBLENBQUMrQixlQUFlO0lBQ3ZELE1BQU1zQixjQUFjckQsa0VBQW1CQSxDQUFDK0IsZUFBZTtJQUV2RCxxQkFBcUI7SUFDckIsTUFBTXVCLGNBQWN6RCw0RUFBZ0NBO0lBQ3BELE1BQU0wRCxvQkFBb0JuRCx5RUFBMEJBLENBQ2xEOEIsV0FDQW9CLFlBQVlFLFlBQVksRUFDeEJGLFlBQVlHLGFBQWE7SUFHM0Isb0JBQW9CO0lBQ3BCLE1BQU1DLGFBQWFyRCxrRUFBbUJBLENBQUMwQjtJQUV2QyxNQUFNNEIsVUFBNEI7UUFDaENDLFNBQVM7WUFDUEMsT0FBT3pCO1lBQ1AwQixRQUFReEI7WUFDUnlCLE9BQU9aO1FBQ1Q7UUFDQWEsUUFBUTtZQUNOSCxPQUFPdEI7WUFDUHVCLFFBQVFyQjtZQUNSc0IsT0FBT1g7UUFDVDtRQUNBYSxlQUFlO1lBQ2JDLE9BQU94QjtZQUNQb0IsUUFBUWxCO1lBQ1JtQixPQUFPVjtRQUNUO1FBQ0FSLGdCQUFnQjtZQUNkcUIsT0FBT3JCO1lBQ1BpQixRQUFRaEI7WUFDUmlCLE9BQU87Z0JBQUM7Z0JBQUs7Z0JBQUs7Z0JBQUs7Z0JBQUs7Z0JBQUs7Z0JBQUs7YUFBSTtRQUM1QztRQUNBaEI7UUFDQUM7UUFDQUM7UUFDQUM7UUFDQUs7SUFDRjtJQUVBLE9BQU87UUFBRUk7UUFBU0Q7SUFBVztBQUMvQiIsInNvdXJjZXMiOlsiL1VzZXJzL2ZlbGlwZXZkYzEvRG9jdW1lbnRzL3Byb2pldG9zIGNsYXVkZSBjb2RlL2Rhc2hib2FyZCBlc2NhbGEgaW5kZXBlbmRlbnRlL2Rhc2hib2FyZC9saWIvc3VwYWJhc2UvcXVlcmllcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFN1cGFiYXNlIFNRTCBxdWVyaWVzIGZvciBtZXRyaWNzIGNhbGN1bGF0aW9uXG4gKiBUaGVzZSBxdWVyaWVzIHJlcGxhY2UgdGhlIENhcnRQYW5kYSBBUEkgcGFnaW5hdGlvbiB3aXRoIGRpcmVjdCBTUUxcbiAqL1xuXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJy4uL3N1cGFiYXNlJztcbmltcG9ydCB0eXBlIHtcbiAgRGFzaGJvYXJkTWV0cmljcyxcbiAgUmVjZW50QWN0aXZpdHksXG59IGZyb20gJy4uL2NhcnRwYW5kYS90eXBlcyc7XG5pbXBvcnQgeyBnZXRDdXJyZW50QW5kUHJldmlvdXNNb250aFJhbmdlcyB9IGZyb20gJy4uL2RhdGVVdGlscyc7XG5pbXBvcnQge1xuICBjYWxjdWxhdGVSZXZlbnVlLFxuICBjYWxjdWxhdGVQZXJjZW50YWdlQ2hhbmdlLFxuICBjYWxjdWxhdGVEYWlseVRyZW5kLFxuICBnZXRUb3BQcm9kdWN0cyxcbiAgZ2V0VG9wQWZmaWxpYXRlcyxcbiAgZ2V0UmVmdW5kc0FuZENoYXJnZWJhY2tzLFxuICBjYWxjdWxhdGVNb250aGx5Q29tcGFyaXNvbixcbiAgZ2V0UmVjZW50QWN0aXZpdGllcyxcbn0gZnJvbSAnLi4vc2hhcmVkL3V0aWxzJztcblxuLyoqXG4gKiBGZXRjaCBvcmRlcnMgZnJvbSBTdXBhYmFzZSBmb3IgYSBkYXRlIHJhbmdlXG4gKiBPbmx5IHJldHVybnMgUEFJRCBvcmRlcnMgKGZpbmFuY2lhbF9zdGF0dXMgPSAzKSB0byBtYXRjaCBDYXJ0UGFuZGEgZGFzaGJvYXJkXG4gKiBVc2VzIEJyYXNpbGlhIHRpbWV6b25lIChVVEMtMykgZm9yIGRhdGUgZmlsdGVyaW5nXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZldGNoT3JkZXJzQnlEYXRlUmFuZ2Uoc3RhcnREYXRlOiBzdHJpbmcsIGVuZERhdGU6IHN0cmluZykge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdvcmRlcnMnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5ndGUoJ2NyZWF0ZWRfYXQnLCBgJHtzdGFydERhdGV9VDAwOjAwOjAwLTAzOjAwYCkgLy8gQnJhc2lsaWEgdGltZXpvbmVcbiAgICAubHRlKCdjcmVhdGVkX2F0JywgYCR7ZW5kRGF0ZX1UMjM6NTk6NTktMDM6MDBgKSAgIC8vIEJyYXNpbGlhIHRpbWV6b25lXG4gICAgLmVxKCdmaW5hbmNpYWxfc3RhdHVzJywgMykgLy8gT25seSBQQUlEIG9yZGVyc1xuICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBxdWVyeSBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggb3JkZXJzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cblxuICByZXR1cm4gZGF0YSB8fCBbXTtcbn1cblxuLyoqXG4gKiBGZXRjaCBhbGwgb3JkZXJzIChmb3IgbW9udGhseSBjb21wYXJpc29uIGNoYXJ0KVxuICovXG5hc3luYyBmdW5jdGlvbiBmZXRjaEFsbE9yZGVycygpIHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnb3JkZXJzJylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgcXVlcnkgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIGFsbCBvcmRlcnM6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxuXG4gIHJldHVybiBkYXRhIHx8IFtdO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSBhbGwgZGFzaGJvYXJkIG1ldHJpY3MgZnJvbSBTdXBhYmFzZVxuICogVGhpcyBpcyB0aGUgbWFpbiBmdW5jdGlvbiB0aGF0IHJlcGxhY2VzIENhcnRQYW5kYSBBUEkgY2FsbHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGN1bGF0ZURhc2hib2FyZE1ldHJpY3MoXG4gIGN1cnJlbnRTdGFydERhdGU6IHN0cmluZyxcbiAgY3VycmVudEVuZERhdGU6IHN0cmluZyxcbiAgcHJldmlvdXNTdGFydERhdGU6IHN0cmluZyxcbiAgcHJldmlvdXNFbmREYXRlOiBzdHJpbmdcbik6IFByb21pc2U8e1xuICBtZXRyaWNzOiBEYXNoYm9hcmRNZXRyaWNzO1xuICBhY3Rpdml0aWVzOiBSZWNlbnRBY3Rpdml0eVtdO1xufT4ge1xuICBjb25zb2xlLmxvZygn8J+UjSBGZXRjaGluZyBvcmRlcnMgZnJvbSBTdXBhYmFzZS4uLicpO1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gIC8vIEZldGNoIGN1cnJlbnQgcGVyaW9kIG9yZGVyc1xuICBjb25zdCBjdXJyZW50T3JkZXJzID0gYXdhaXQgZmV0Y2hPcmRlcnNCeURhdGVSYW5nZShjdXJyZW50U3RhcnREYXRlLCBjdXJyZW50RW5kRGF0ZSk7XG4gIGNvbnNvbGUubG9nKGDinIUgQ3VycmVudCBwZXJpb2Qgb3JkZXJzOiAke2N1cnJlbnRPcmRlcnMubGVuZ3RofWApO1xuXG4gIC8vIEZldGNoIHByZXZpb3VzIHBlcmlvZCBvcmRlcnNcbiAgY29uc3QgcHJldmlvdXNPcmRlcnMgPSBhd2FpdCBmZXRjaE9yZGVyc0J5RGF0ZVJhbmdlKHByZXZpb3VzU3RhcnREYXRlLCBwcmV2aW91c0VuZERhdGUpO1xuICBjb25zb2xlLmxvZyhg4pyFIFByZXZpb3VzIHBlcmlvZCBvcmRlcnM6ICR7cHJldmlvdXNPcmRlcnMubGVuZ3RofWApO1xuXG4gIC8vIEZldGNoIGFsbCBvcmRlcnMgZm9yIG1vbnRobHkgY29tcGFyaXNvblxuICBjb25zdCBhbGxPcmRlcnMgPSBhd2FpdCBmZXRjaEFsbE9yZGVycygpO1xuICBjb25zb2xlLmxvZyhg4pyFIEFsbCBvcmRlcnM6ICR7YWxsT3JkZXJzLmxlbmd0aH1gKTtcblxuICBjb25zdCBxdWVyeUR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgY29uc29sZS5sb2coYOKaoSBTdXBhYmFzZSBxdWVyaWVzIGNvbXBsZXRlZCBpbiAke3F1ZXJ5RHVyYXRpb259bXNgKTtcblxuICAvLyBDYWxjdWxhdGUgbWV0cmljc1xuICBjb25zdCBjdXJyZW50UmV2ZW51ZSA9IGNhbGN1bGF0ZVJldmVudWUoY3VycmVudE9yZGVycyk7XG4gIGNvbnN0IHByZXZpb3VzUmV2ZW51ZSA9IGNhbGN1bGF0ZVJldmVudWUocHJldmlvdXNPcmRlcnMpO1xuICBjb25zdCByZXZlbnVlQ2hhbmdlID0gY2FsY3VsYXRlUGVyY2VudGFnZUNoYW5nZShwcmV2aW91c1JldmVudWUsIGN1cnJlbnRSZXZlbnVlKTtcblxuICBjb25zdCBjdXJyZW50T3JkZXJDb3VudCA9IGN1cnJlbnRPcmRlcnMubGVuZ3RoO1xuICBjb25zdCBwcmV2aW91c09yZGVyQ291bnQgPSBwcmV2aW91c09yZGVycy5sZW5ndGg7XG4gIGNvbnN0IG9yZGVyc0NoYW5nZSA9IGNhbGN1bGF0ZVBlcmNlbnRhZ2VDaGFuZ2UocHJldmlvdXNPcmRlckNvdW50LCBjdXJyZW50T3JkZXJDb3VudCk7XG5cbiAgY29uc3QgY3VycmVudEF2Z1RpY2tldCA9IGN1cnJlbnRSZXZlbnVlIC8gKGN1cnJlbnRPcmRlckNvdW50IHx8IDEpO1xuICBjb25zdCBwcmV2aW91c0F2Z1RpY2tldCA9IHByZXZpb3VzUmV2ZW51ZSAvIChwcmV2aW91c09yZGVyQ291bnQgfHwgMSk7XG4gIGNvbnN0IGF2Z1RpY2tldENoYW5nZSA9IGNhbGN1bGF0ZVBlcmNlbnRhZ2VDaGFuZ2UocHJldmlvdXNBdmdUaWNrZXQsIGN1cnJlbnRBdmdUaWNrZXQpO1xuXG4gIGNvbnN0IGNvbnZlcnNpb25SYXRlID0gMy44O1xuICBjb25zdCBjb252ZXJzaW9uQ2hhbmdlID0gLTEuMjtcblxuICBjb25zdCB0b3BQcm9kdWN0cyA9IGdldFRvcFByb2R1Y3RzKGN1cnJlbnRPcmRlcnMpO1xuICBjb25zdCB0b3BBZmZpbGlhdGVzID0gZ2V0VG9wQWZmaWxpYXRlcyhjdXJyZW50T3JkZXJzKTtcbiAgY29uc3QgeyByZWZ1bmRzLCBjaGFyZ2ViYWNrcyB9ID0gZ2V0UmVmdW5kc0FuZENoYXJnZWJhY2tzKGN1cnJlbnRPcmRlcnMpO1xuXG4gIGNvbnN0IHJldmVudWVUcmVuZCA9IGNhbGN1bGF0ZURhaWx5VHJlbmQoY3VycmVudE9yZGVycywgJ3JldmVudWUnKTtcbiAgY29uc3Qgb3JkZXJzVHJlbmQgPSBjYWxjdWxhdGVEYWlseVRyZW5kKGN1cnJlbnRPcmRlcnMsICdjb3VudCcpO1xuICBjb25zdCB0aWNrZXRUcmVuZCA9IGNhbGN1bGF0ZURhaWx5VHJlbmQoY3VycmVudE9yZGVycywgJ2F2ZXJhZ2UnKTtcblxuICAvLyBNb250aGx5IGNvbXBhcmlzb25cbiAgY29uc3QgbW9udGhSYW5nZXMgPSBnZXRDdXJyZW50QW5kUHJldmlvdXNNb250aFJhbmdlcygpO1xuICBjb25zdCBtb250aGx5Q29tcGFyaXNvbiA9IGNhbGN1bGF0ZU1vbnRobHlDb21wYXJpc29uKFxuICAgIGFsbE9yZGVycyxcbiAgICBtb250aFJhbmdlcy5jdXJyZW50TW9udGgsXG4gICAgbW9udGhSYW5nZXMucHJldmlvdXNNb250aFxuICApO1xuXG4gIC8vIFJlY2VudCBhY3Rpdml0aWVzXG4gIGNvbnN0IGFjdGl2aXRpZXMgPSBnZXRSZWNlbnRBY3Rpdml0aWVzKGN1cnJlbnRPcmRlcnMpO1xuXG4gIGNvbnN0IG1ldHJpY3M6IERhc2hib2FyZE1ldHJpY3MgPSB7XG4gICAgcmV2ZW51ZToge1xuICAgICAgdG90YWw6IGN1cnJlbnRSZXZlbnVlLFxuICAgICAgY2hhbmdlOiByZXZlbnVlQ2hhbmdlLFxuICAgICAgdHJlbmQ6IHJldmVudWVUcmVuZCxcbiAgICB9LFxuICAgIG9yZGVyczoge1xuICAgICAgdG90YWw6IGN1cnJlbnRPcmRlckNvdW50LFxuICAgICAgY2hhbmdlOiBvcmRlcnNDaGFuZ2UsXG4gICAgICB0cmVuZDogb3JkZXJzVHJlbmQsXG4gICAgfSxcbiAgICBhdmVyYWdlVGlja2V0OiB7XG4gICAgICB2YWx1ZTogY3VycmVudEF2Z1RpY2tldCxcbiAgICAgIGNoYW5nZTogYXZnVGlja2V0Q2hhbmdlLFxuICAgICAgdHJlbmQ6IHRpY2tldFRyZW5kLFxuICAgIH0sXG4gICAgY29udmVyc2lvblJhdGU6IHtcbiAgICAgIHZhbHVlOiBjb252ZXJzaW9uUmF0ZSxcbiAgICAgIGNoYW5nZTogY29udmVyc2lvbkNoYW5nZSxcbiAgICAgIHRyZW5kOiBbNC4yLCA0LjAsIDMuOSwgNC4xLCAzLjgsIDMuNywgMy44XSxcbiAgICB9LFxuICAgIHRvcFByb2R1Y3RzLFxuICAgIHRvcEFmZmlsaWF0ZXMsXG4gICAgcmVmdW5kcyxcbiAgICBjaGFyZ2ViYWNrcyxcbiAgICBtb250aGx5Q29tcGFyaXNvbixcbiAgfTtcblxuICByZXR1cm4geyBtZXRyaWNzLCBhY3Rpdml0aWVzIH07XG59XG4iXSwibmFtZXMiOlsic3VwYWJhc2UiLCJnZXRDdXJyZW50QW5kUHJldmlvdXNNb250aFJhbmdlcyIsImNhbGN1bGF0ZVJldmVudWUiLCJjYWxjdWxhdGVQZXJjZW50YWdlQ2hhbmdlIiwiY2FsY3VsYXRlRGFpbHlUcmVuZCIsImdldFRvcFByb2R1Y3RzIiwiZ2V0VG9wQWZmaWxpYXRlcyIsImdldFJlZnVuZHNBbmRDaGFyZ2ViYWNrcyIsImNhbGN1bGF0ZU1vbnRobHlDb21wYXJpc29uIiwiZ2V0UmVjZW50QWN0aXZpdGllcyIsImZldGNoT3JkZXJzQnlEYXRlUmFuZ2UiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImd0ZSIsImx0ZSIsImVxIiwib3JkZXIiLCJhc2NlbmRpbmciLCJjb25zb2xlIiwiRXJyb3IiLCJtZXNzYWdlIiwiZmV0Y2hBbGxPcmRlcnMiLCJjYWxjdWxhdGVEYXNoYm9hcmRNZXRyaWNzIiwiY3VycmVudFN0YXJ0RGF0ZSIsImN1cnJlbnRFbmREYXRlIiwicHJldmlvdXNTdGFydERhdGUiLCJwcmV2aW91c0VuZERhdGUiLCJsb2ciLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwiY3VycmVudE9yZGVycyIsImxlbmd0aCIsInByZXZpb3VzT3JkZXJzIiwiYWxsT3JkZXJzIiwicXVlcnlEdXJhdGlvbiIsImN1cnJlbnRSZXZlbnVlIiwicHJldmlvdXNSZXZlbnVlIiwicmV2ZW51ZUNoYW5nZSIsImN1cnJlbnRPcmRlckNvdW50IiwicHJldmlvdXNPcmRlckNvdW50Iiwib3JkZXJzQ2hhbmdlIiwiY3VycmVudEF2Z1RpY2tldCIsInByZXZpb3VzQXZnVGlja2V0IiwiYXZnVGlja2V0Q2hhbmdlIiwiY29udmVyc2lvblJhdGUiLCJjb252ZXJzaW9uQ2hhbmdlIiwidG9wUHJvZHVjdHMiLCJ0b3BBZmZpbGlhdGVzIiwicmVmdW5kcyIsImNoYXJnZWJhY2tzIiwicmV2ZW51ZVRyZW5kIiwib3JkZXJzVHJlbmQiLCJ0aWNrZXRUcmVuZCIsIm1vbnRoUmFuZ2VzIiwibW9udGhseUNvbXBhcmlzb24iLCJjdXJyZW50TW9udGgiLCJwcmV2aW91c01vbnRoIiwiYWN0aXZpdGllcyIsIm1ldHJpY3MiLCJyZXZlbnVlIiwidG90YWwiLCJjaGFuZ2UiLCJ0cmVuZCIsIm9yZGVycyIsImF2ZXJhZ2VUaWNrZXQiLCJ2YWx1ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase/queries.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmetrics%2Froute&page=%2Fapi%2Fmetrics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmetrics%2Froute.ts&appDir=%2FUsers%2Ffelipevdc1%2FDocuments%2Fprojetos%20claude%20code%2Fdashboard%20escala%20independente%2Fdashboard%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ffelipevdc1%2FDocuments%2Fprojetos%20claude%20code%2Fdashboard%20escala%20independente%2Fdashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmetrics%2Froute&page=%2Fapi%2Fmetrics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmetrics%2Froute.ts&appDir=%2FUsers%2Ffelipevdc1%2FDocuments%2Fprojetos%20claude%20code%2Fdashboard%20escala%20independente%2Fdashboard%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ffelipevdc1%2FDocuments%2Fprojetos%20claude%20code%2Fdashboard%20escala%20independente%2Fdashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _Users_felipevdc1_Documents_projetos_claude_code_dashboard_escala_independente_dashboard_app_api_metrics_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/metrics/route.ts */ \"(rsc)/./app/api/metrics/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/metrics/route\",\n        pathname: \"/api/metrics\",\n        filename: \"route\",\n        bundlePath: \"app/api/metrics/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"/Users/felipevdc1/Documents/projetos claude code/dashboard escala independente/dashboard/app/api/metrics/route.ts\",\n    nextConfigOutput,\n    userland: _Users_felipevdc1_Documents_projetos_claude_code_dashboard_escala_independente_dashboard_app_api_metrics_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/metrics/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZtZXRyaWNzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZtZXRyaWNzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbWV0cmljcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmZlbGlwZXZkYzElMkZEb2N1bWVudHMlMkZwcm9qZXRvcyUyMGNsYXVkZSUyMGNvZGUlMkZkYXNoYm9hcmQlMjBlc2NhbGElMjBpbmRlcGVuZGVudGUlMkZkYXNoYm9hcmQlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGZmVsaXBldmRjMSUyRkRvY3VtZW50cyUyRnByb2pldG9zJTIwY2xhdWRlJTIwY29kZSUyRmRhc2hib2FyZCUyMGVzY2FsYSUyMGluZGVwZW5kZW50ZSUyRmRhc2hib2FyZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCZpc0dsb2JhbE5vdEZvdW5kRW5hYmxlZD0hIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2Q7QUFDUztBQUNPO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUM0RTtBQUM5STtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCx3QkFBd0IsTUFBdUM7QUFDL0Q7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7QUFDbkY7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxLQUFxQixFQUFFLEVBRTFCLENBQUM7QUFDTjtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsS0FBd0M7QUFDdkU7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0pBQW9KO0FBQ2hLLDhCQUE4Qiw2RkFBZ0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDZGQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDRFQUFTO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSw4QkFBOEIsNkVBQWM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDRFQUFlO0FBQzNDLDRCQUE0Qiw2RUFBZ0I7QUFDNUMsb0JBQW9CLHlHQUFrQixrQ0FBa0MsaUhBQXNCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsZ0ZBQWM7QUFDL0UsK0RBQStELHlDQUF5QztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxRQUFRLEVBQUUsTUFBTTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGtCQUFrQjtBQUNsQix1Q0FBdUMsUUFBUSxFQUFFLFFBQVE7QUFDekQ7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLG9CQUFvQjtBQUNuRTtBQUNBLHlCQUF5Qiw2RUFBYztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHNGQUF5QjtBQUNqRTtBQUNBLG9DQUFvQyw0RUFBc0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzSkFBc0osb0VBQWM7QUFDcEssMElBQTBJLG9FQUFjO0FBQ3hKO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyw2RUFBZTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0EsOEJBQThCLDZFQUFZO0FBQzFDO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsMkZBQW1CO0FBQ2pFO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0VBQVM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxSUFBcUksNkVBQWU7QUFDcEo7QUFDQSwyR0FBMkcsaUhBQWlIO0FBQzVOO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGlCQUFpQiw2RUFBYztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsd0ZBQTJCO0FBQ3ZELGtCQUFrQiw2RUFBYztBQUNoQywrQkFBK0IsNEVBQXNCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDBGQUFxQjtBQUNsRTtBQUNBLGtCQUFrQiw2RUFBWTtBQUM5QjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTiw2QkFBNkIsNkZBQWU7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMkZBQW1CO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZFQUFZO0FBQzFCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCB7IGdldFJlcXVlc3RNZXRhIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVxdWVzdC1tZXRhXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgbm9ybWFsaXplQXBwUGF0aCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvYXBwLXBhdGhzXCI7XG5pbXBvcnQgeyBOb2RlTmV4dFJlcXVlc3QsIE5vZGVOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9iYXNlLWh0dHAvbm9kZVwiO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3RBZGFwdGVyLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3NwZWMtZXh0ZW5zaW9uL2FkYXB0ZXJzL25leHQtcmVxdWVzdFwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBnZXRSZXZhbGlkYXRlUmVhc29uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvaW5zdHJ1bWVudGF0aW9uL3V0aWxzXCI7XG5pbXBvcnQgeyBzZW5kUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9zZW5kLXJlc3BvbnNlXCI7XG5pbXBvcnQgeyBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMsIHRvTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvdXRpbHNcIjtcbmltcG9ydCB7IGdldENhY2hlQ29udHJvbEhlYWRlciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9jYWNoZS1jb250cm9sXCI7XG5pbXBvcnQgeyBJTkZJTklURV9DQUNIRSwgTkVYVF9DQUNIRV9UQUdTX0hFQURFUiB9IGZyb20gXCJuZXh0L2Rpc3QvbGliL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgTm9GYWxsYmFja0Vycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL25vLWZhbGxiYWNrLWVycm9yLmV4dGVybmFsXCI7XG5pbXBvcnQgeyBDYWNoZWRSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXNwb25zZS1jYWNoZVwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9mZWxpcGV2ZGMxL0RvY3VtZW50cy9wcm9qZXRvcyBjbGF1ZGUgY29kZS9kYXNoYm9hcmQgZXNjYWxhIGluZGVwZW5kZW50ZS9kYXNoYm9hcmQvYXBwL2FwaS9tZXRyaWNzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9tZXRyaWNzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbWV0cmljc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvbWV0cmljcy9yb3V0ZVwiXG4gICAgfSxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcmVsYXRpdmVQcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJycsXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvZmVsaXBldmRjMS9Eb2N1bWVudHMvcHJvamV0b3MgY2xhdWRlIGNvZGUvZGFzaGJvYXJkIGVzY2FsYSBpbmRlcGVuZGVudGUvZGFzaGJvYXJkL2FwcC9hcGkvbWV0cmljcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICB2YXIgX25leHRDb25maWdfZXhwZXJpbWVudGFsO1xuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL21ldHJpY3Mvcm91dGVcIjtcbiAgICAvLyB0dXJib3BhY2sgZG9lc24ndCBub3JtYWxpemUgYC9pbmRleGAgaW4gdGhlIHBhZ2UgbmFtZVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gdG8gcHJvY2VzcyBkeW5hbWljIHJvdXRlcyBwcm9wZXJseVxuICAgIC8vIFRPRE86IGZpeCB0dXJib3BhY2sgcHJvdmlkaW5nIGRpZmZlcmluZyB2YWx1ZSBmcm9tIHdlYnBhY2tcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFVSQk9QQUNLKSB7XG4gICAgICAgIHNyY1BhZ2UgPSBzcmNQYWdlLnJlcGxhY2UoL1xcL2luZGV4JC8sICcnKSB8fCAnLyc7XG4gICAgfSBlbHNlIGlmIChzcmNQYWdlID09PSAnL2luZGV4Jykge1xuICAgICAgICAvLyB3ZSBhbHdheXMgbm9ybWFsaXplIC9pbmRleCBzcGVjaWZpY2FsbHlcbiAgICAgICAgc3JjUGFnZSA9ICcvJztcbiAgICB9XG4gICAgY29uc3QgbXVsdGlab25lRHJhZnRNb2RlID0gcHJvY2Vzcy5lbnYuX19ORVhUX01VTFRJX1pPTkVfRFJBRlRfTU9ERTtcbiAgICBjb25zdCBwcmVwYXJlUmVzdWx0ID0gYXdhaXQgcm91dGVNb2R1bGUucHJlcGFyZShyZXEsIHJlcywge1xuICAgICAgICBzcmNQYWdlLFxuICAgICAgICBtdWx0aVpvbmVEcmFmdE1vZGVcbiAgICB9KTtcbiAgICBpZiAoIXByZXBhcmVSZXN1bHQpIHtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICAgIHJlcy5lbmQoJ0JhZCBSZXF1ZXN0Jyk7XG4gICAgICAgIGN0eC53YWl0VW50aWwgPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC53YWl0VW50aWwuY2FsbChjdHgsIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHsgYnVpbGRJZCwgcGFyYW1zLCBuZXh0Q29uZmlnLCBpc0RyYWZ0TW9kZSwgcHJlcmVuZGVyTWFuaWZlc3QsIHJvdXRlclNlcnZlckNvbnRleHQsIGlzT25EZW1hbmRSZXZhbGlkYXRlLCByZXZhbGlkYXRlT25seUdlbmVyYXRlZCwgcmVzb2x2ZWRQYXRobmFtZSB9ID0gcHJlcGFyZVJlc3VsdDtcbiAgICBjb25zdCBub3JtYWxpemVkU3JjUGFnZSA9IG5vcm1hbGl6ZUFwcFBhdGgoc3JjUGFnZSk7XG4gICAgbGV0IGlzSXNyID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXSB8fCBwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgIGlmIChpc0lzciAmJiAhaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgY29uc3QgaXNQcmVyZW5kZXJlZCA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICAgICAgY29uc3QgcHJlcmVuZGVySW5mbyA9IHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdO1xuICAgICAgICBpZiAocHJlcmVuZGVySW5mbykge1xuICAgICAgICAgICAgaWYgKHByZXJlbmRlckluZm8uZmFsbGJhY2sgPT09IGZhbHNlICYmICFpc1ByZXJlbmRlcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vRmFsbGJhY2tFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBjYWNoZUtleSA9IG51bGw7XG4gICAgaWYgKGlzSXNyICYmICFyb3V0ZU1vZHVsZS5pc0RldiAmJiAhaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgY2FjaGVLZXkgPSByZXNvbHZlZFBhdGhuYW1lO1xuICAgICAgICAvLyBlbnN1cmUgL2luZGV4IGFuZCAvIGlzIG5vcm1hbGl6ZWQgdG8gb25lIGtleVxuICAgICAgICBjYWNoZUtleSA9IGNhY2hlS2V5ID09PSAnL2luZGV4JyA/ICcvJyA6IGNhY2hlS2V5O1xuICAgIH1cbiAgICBjb25zdCBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSA9IC8vIElmIHdlJ3JlIGluIGRldmVsb3BtZW50LCB3ZSBhbHdheXMgc3VwcG9ydCBkeW5hbWljIEhUTUxcbiAgICByb3V0ZU1vZHVsZS5pc0RldiA9PT0gdHJ1ZSB8fCAvLyBJZiB0aGlzIGlzIG5vdCBTU0cgb3IgZG9lcyBub3QgaGF2ZSBzdGF0aWMgcGF0aHMsIHRoZW4gaXQgc3VwcG9ydHNcbiAgICAvLyBkeW5hbWljIEhUTUwuXG4gICAgIWlzSXNyO1xuICAgIC8vIFRoaXMgaXMgYSByZXZhbGlkYXRpb24gcmVxdWVzdCBpZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWNcbiAgICAvLyBwYWdlIGFuZCBpdCBpcyBub3QgYmVpbmcgcmVzdW1lZCBmcm9tIGEgcG9zdHBvbmVkIHJlbmRlciBhbmRcbiAgICAvLyBpdCBpcyBub3QgYSBkeW5hbWljIFJTQyByZXF1ZXN0IHRoZW4gaXQgaXMgYSByZXZhbGlkYXRpb25cbiAgICAvLyByZXF1ZXN0LlxuICAgIGNvbnN0IGlzUmV2YWxpZGF0ZSA9IGlzSXNyICYmICFzdXBwb3J0c0R5bmFtaWNSZXNwb25zZTtcbiAgICBjb25zdCBtZXRob2QgPSByZXEubWV0aG9kIHx8ICdHRVQnO1xuICAgIGNvbnN0IHRyYWNlciA9IGdldFRyYWNlcigpO1xuICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSB0cmFjZXIuZ2V0QWN0aXZlU2NvcGVTcGFuKCk7XG4gICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgcmVuZGVyT3B0czoge1xuICAgICAgICAgICAgZXhwZXJpbWVudGFsOiB7XG4gICAgICAgICAgICAgICAgY2FjaGVDb21wb25lbnRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmNhY2hlQ29tcG9uZW50cyksXG4gICAgICAgICAgICAgICAgYXV0aEludGVycnVwdHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuYXV0aEludGVycnVwdHMpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UsXG4gICAgICAgICAgICBpbmNyZW1lbnRhbENhY2hlOiBnZXRSZXF1ZXN0TWV0YShyZXEsICdpbmNyZW1lbnRhbENhY2hlJyksXG4gICAgICAgICAgICBjYWNoZUxpZmVQcm9maWxlczogKF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbCA9IG5leHRDb25maWcuZXhwZXJpbWVudGFsKSA9PSBudWxsID8gdm9pZCAwIDogX25leHRDb25maWdfZXhwZXJpbWVudGFsLmNhY2hlTGlmZSxcbiAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbCxcbiAgICAgICAgICAgIG9uQ2xvc2U6IChjYik9PntcbiAgICAgICAgICAgICAgICByZXMub24oJ2Nsb3NlJywgY2IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQWZ0ZXJUYXNrRXJyb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG9uSW5zdHJ1bWVudGF0aW9uUmVxdWVzdEVycm9yOiAoZXJyb3IsIF9yZXF1ZXN0LCBlcnJvckNvbnRleHQpPT5yb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVycm9yLCBlcnJvckNvbnRleHQsIHJvdXRlclNlcnZlckNvbnRleHQpXG4gICAgICAgIH0sXG4gICAgICAgIHNoYXJlZENvbnRleHQ6IHtcbiAgICAgICAgICAgIGJ1aWxkSWRcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgbm9kZU5leHRSZXEgPSBuZXcgTm9kZU5leHRSZXF1ZXN0KHJlcSk7XG4gICAgY29uc3Qgbm9kZU5leHRSZXMgPSBuZXcgTm9kZU5leHRSZXNwb25zZShyZXMpO1xuICAgIGNvbnN0IG5leHRSZXEgPSBOZXh0UmVxdWVzdEFkYXB0ZXIuZnJvbU5vZGVOZXh0UmVxdWVzdChub2RlTmV4dFJlcSwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZShyZXMpKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpbnZva2VSb3V0ZU1vZHVsZSA9IGFzeW5jIChzcGFuKT0+e1xuICAgICAgICAgICAgcmV0dXJuIHJvdXRlTW9kdWxlLmhhbmRsZShuZXh0UmVxLCBjb250ZXh0KS5maW5hbGx5KCgpPT57XG4gICAgICAgICAgICAgICAgaWYgKCFzcGFuKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHAuc3RhdHVzX2NvZGUnOiByZXMuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgJ25leHQucnNjJzogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByb290U3BhbkF0dHJpYnV0ZXMgPSB0cmFjZXIuZ2V0Um9vdFNwYW5BdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICAgICAgLy8gV2Ugd2VyZSB1bmFibGUgdG8gZ2V0IGF0dHJpYnV0ZXMsIHByb2JhYmx5IE9URUwgaXMgbm90IGVuYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoIXJvb3RTcGFuQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpICE9PSBCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5leHBlY3RlZCByb290IHNwYW4gdHlwZSAnJHtyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpfScuIFBsZWFzZSByZXBvcnQgdGhpcyBOZXh0LmpzIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS92ZXJjZWwvbmV4dC5qc2ApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5yb3V0ZScpO1xuICAgICAgICAgICAgICAgIGlmIChyb3V0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7bWV0aG9kfSAke3JvdXRlfWA7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnNwYW5fbmFtZSc6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUoYCR7bWV0aG9kfSAke3JlcS51cmx9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGhhbmRsZVJlc3BvbnNlID0gYXN5bmMgKGN1cnJlbnRTcGFuKT0+e1xuICAgICAgICAgICAgdmFyIF9jYWNoZUVudHJ5X3ZhbHVlO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VHZW5lcmF0b3IgPSBhc3luYyAoeyBwcmV2aW91c0NhY2hlRW50cnkgfSk9PntcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNPbkRlbWFuZFJldmFsaWRhdGUgJiYgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQgJiYgIXByZXZpb3VzQ2FjaGVFbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbi1kZW1hbmQgcmV2YWxpZGF0ZSBhbHdheXMgc2V0cyB0aGlzIGhlYWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcigneC1uZXh0anMtY2FjaGUnLCAnUkVWQUxJREFURUQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5lbmQoJ1RoaXMgcGFnZSBjb3VsZCBub3QgYmUgZm91bmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaW52b2tlUm91dGVNb2R1bGUoY3VycmVudFNwYW4pO1xuICAgICAgICAgICAgICAgICAgICByZXEuZmV0Y2hNZXRyaWNzID0gY29udGV4dC5yZW5kZXJPcHRzLmZldGNoTWV0cmljcztcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBlbmRpbmdXYWl0VW50aWwgPSBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXR0ZW1wdCB1c2luZyBwcm92aWRlZCB3YWl0VW50aWwgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0J3Mgbm90IHdlIGZhbGxiYWNrIHRvIHNlbmRSZXNwb25zZSdzIGhhbmRsaW5nXG4gICAgICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nV2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LndhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC53YWl0VW50aWwocGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1dhaXRVbnRpbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZVRhZ3MgPSBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkVGFncztcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljIHJlc3BvbnNlLCB3ZSBjYW4gY2FjaGUgaXQgc28gbG9uZ1xuICAgICAgICAgICAgICAgICAgICAvLyBhcyBpdCdzIG5vdCBlZGdlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJc3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3B5IHRoZSBoZWFkZXJzIGZyb20gdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IHRvTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMocmVzcG9uc2UuaGVhZGVycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVUYWdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1tORVhUX0NBQ0hFX1RBR1NfSEVBREVSXSA9IGNhY2hlVGFncztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGVhZGVyc1snY29udGVudC10eXBlJ10gJiYgYmxvYi50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1snY29udGVudC10eXBlJ10gPSBibG9iLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXZhbGlkYXRlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA+PSBJTkZJTklURV9DQUNIRSA/IGZhbHNlIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleHBpcmUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZSA+PSBJTkZJTklURV9DQUNIRSA/IHVuZGVmaW5lZCA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGNhY2hlIGVudHJ5IGZvciB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBCdWZmZXIuZnJvbShhd2FpdCBibG9iLmFycmF5QnVmZmVyKCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZUVudHJ5O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VuZCByZXNwb25zZSB3aXRob3V0IGNhY2hpbmcgaWYgbm90IElTUlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgcmVzcG9uc2UsIGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSBiYWNrZ3JvdW5kIHJldmFsaWRhdGUgd2UgbmVlZCB0byByZXBvcnRcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlcXVlc3QgZXJyb3IgaGVyZSBhcyBpdCB3b24ndCBiZSBidWJibGVkXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZpb3VzQ2FjaGVFbnRyeS5pc1N0YWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IHNyY1BhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVUeXBlOiAncm91dGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGVSZWFzb246IGdldFJldmFsaWRhdGVSZWFzb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJvdXRlclNlcnZlckNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IGF3YWl0IHJvdXRlTW9kdWxlLmhhbmRsZVJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgbmV4dENvbmZpZyxcbiAgICAgICAgICAgICAgICBjYWNoZUtleSxcbiAgICAgICAgICAgICAgICByb3V0ZUtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgICAgICAgICAgaXNGYWxsYmFjazogZmFsc2UsXG4gICAgICAgICAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgaXNSb3V0ZVBQUkVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlR2VuZXJhdG9yLFxuICAgICAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBjcmVhdGUgYSBjYWNoZUVudHJ5IGZvciBJU1JcbiAgICAgICAgICAgIGlmICghaXNJc3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoY2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogKF9jYWNoZUVudHJ5X3ZhbHVlID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlLmtpbmQpICE9PSBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9jYWNoZUVudHJ5X3ZhbHVlMTtcbiAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBJbnZhcmlhbnQ6IGFwcC1yb3V0ZSByZWNlaXZlZCBpbnZhbGlkIGNhY2hlIGVudHJ5ICR7Y2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogKF9jYWNoZUVudHJ5X3ZhbHVlMSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZTEua2luZH1gKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkU3MDFcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcigneC1uZXh0anMtY2FjaGUnLCBpc09uRGVtYW5kUmV2YWxpZGF0ZSA/ICdSRVZBTElEQVRFRCcgOiBjYWNoZUVudHJ5LmlzTWlzcyA/ICdNSVNTJyA6IGNhY2hlRW50cnkuaXNTdGFsZSA/ICdTVEFMRScgOiAnSElUJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEcmFmdCBtb2RlIHNob3VsZCBuZXZlciBiZSBjYWNoZWRcbiAgICAgICAgICAgIGlmIChpc0RyYWZ0TW9kZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAncHJpdmF0ZSwgbm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG11c3QtcmV2YWxpZGF0ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IGZyb21Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhjYWNoZUVudHJ5LnZhbHVlLmhlYWRlcnMpO1xuICAgICAgICAgICAgaWYgKCEoZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc0lzcikpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLmRlbGV0ZShORVhUX0NBQ0hFX1RBR1NfSEVBREVSKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIGNhY2hlIGNvbnRyb2wgaXMgYWxyZWFkeSBzZXQgb24gdGhlIHJlc3BvbnNlIHdlIGRvbid0XG4gICAgICAgICAgICAvLyBvdmVycmlkZSBpdCB0byBhbGxvdyB1c2VycyB0byBjdXN0b21pemUgaXQgdmlhIG5leHQuY29uZmlnXG4gICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wgJiYgIXJlcy5nZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnKSAmJiAhaGVhZGVycy5nZXQoJ0NhY2hlLUNvbnRyb2wnKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuc2V0KCdDYWNoZS1Db250cm9sJywgZ2V0Q2FjaGVDb250cm9sSGVhZGVyKGNhY2hlRW50cnkuY2FjaGVDb250cm9sKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCBuZXcgUmVzcG9uc2UoY2FjaGVFbnRyeS52YWx1ZS5ib2R5LCB7XG4gICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGNhY2hlRW50cnkudmFsdWUuc3RhdHVzIHx8IDIwMFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFRPRE86IGFjdGl2ZVNwYW4gY29kZSBwYXRoIGlzIGZvciB3aGVuIHdyYXBwZWQgYnlcbiAgICAgICAgLy8gbmV4dC1zZXJ2ZXIgY2FuIGJlIHJlbW92ZWQgd2hlbiB0aGlzIGlzIG5vIGxvbmdlciB1c2VkXG4gICAgICAgIGlmIChhY3RpdmVTcGFuKSB7XG4gICAgICAgICAgICBhd2FpdCBoYW5kbGVSZXNwb25zZShhY3RpdmVTcGFuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRyYWNlci53aXRoUHJvcGFnYXRlZENvbnRleHQocmVxLmhlYWRlcnMsICgpPT50cmFjZXIudHJhY2UoQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCwge1xuICAgICAgICAgICAgICAgICAgICBzcGFuTmFtZTogYCR7bWV0aG9kfSAke3JlcS51cmx9YCxcbiAgICAgICAgICAgICAgICAgICAga2luZDogU3BhbktpbmQuU0VSVkVSLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5tZXRob2QnOiBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC50YXJnZXQnOiByZXEudXJsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBoYW5kbGVSZXNwb25zZSkpO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIE5vRmFsbGJhY2tFcnJvcikpIHtcbiAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogbm9ybWFsaXplZFNyY1BhZ2UsXG4gICAgICAgICAgICAgICAgcm91dGVUeXBlOiAncm91dGUnLFxuICAgICAgICAgICAgICAgIHJldmFsaWRhdGVSZWFzb246IGdldFJldmFsaWRhdGVSZWFzb24oe1xuICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldGhyb3cgc28gdGhhdCB3ZSBjYW4gaGFuZGxlIHNlcnZpbmcgZXJyb3IgcGFnZVxuICAgICAgICAvLyBJZiB0aGlzIGlzIGR1cmluZyBzdGF0aWMgZ2VuZXJhdGlvbiwgdGhyb3cgdGhlIGVycm9yIGFnYWluLlxuICAgICAgICBpZiAoaXNJc3IpIHRocm93IGVycjtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBzZW5kIGEgNTAwIHJlc3BvbnNlLlxuICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCBuZXcgUmVzcG9uc2UobnVsbCwge1xuICAgICAgICAgICAgc3RhdHVzOiA1MDBcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmetrics%2Froute&page=%2Fapi%2Fmetrics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmetrics%2Froute.ts&appDir=%2FUsers%2Ffelipevdc1%2FDocuments%2Fprojetos%20claude%20code%2Fdashboard%20escala%20independente%2Fdashboard%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ffelipevdc1%2FDocuments%2Fprojetos%20claude%20code%2Fdashboard%20escala%20independente%2Fdashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmetrics%2Froute&page=%2Fapi%2Fmetrics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmetrics%2Froute.ts&appDir=%2FUsers%2Ffelipevdc1%2FDocuments%2Fprojetos%20claude%20code%2Fdashboard%20escala%20independente%2Fdashboard%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ffelipevdc1%2FDocuments%2Fprojetos%20claude%20code%2Fdashboard%20escala%20independente%2Fdashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();